(self.webpackChunkinspinia=self.webpackChunkinspinia||[]).push([["main"],{8255:function(A){function M(h){return Promise.resolve().then(function(){var T=new Error("Cannot find module '"+h+"'");throw T.code="MODULE_NOT_FOUND",T})}M.keys=function(){return[]},M.resolve=M,M.id=8255,A.exports=M},4692:function(A,M,h){"use strict";var T=h(1570),e=h(464),c=h(335),m=h(3882),d=h(7614),g=h(4364),ve=h(8149),qe=h(1918),y=h(7102);class Ce{constructor(a,t,n,i){this.cedula=a,this.username=t,this.email=n,this.password=i}}const __apiBaseUrl="https://tracking-api.tde.com.ec",__noveltiesImageBaseUrl="https://tems-assets.tde.com.ec/tracking/novelties/vehicles/",__authUrl="https://auth.tde.com.ec/auth";var x=h(1134),H=h(9902),Ae=h(4921),I=h(8293),X=h(3927);let D=(()=>{class o{constructor(t,n){this.http=t,this.router=n,this.tokenValidURL=`${__apiBaseUrl}/`,this.headers=new m.WM({"Content-Type":"application/json"}),this.authenticationUrl=__apiBaseUrl+"/user/login",this.authInfo="auth-info"}existUser(t){return this.http.post(this.authenticationUrl,JSON.stringify({user:t}),{headers:this.headers,responseType:"json",observe:"response"}).toPromise().then(n=>n.body).catch(this.handleError)}getAuthInfo(){const t=sessionStorage.getItem(this.authInfo)||null;return JSON.parse(t)||{accessToken:"",refreshToken:""}}setAuthInfo(t){sessionStorage.setItem(this.authInfo,JSON.stringify(t))}getAccessToken(){const t=this.getAuthInfo().accessToken;return t?this.isTokenExpired(t).pipe((0,H.w)(n=>n?this.refreshAccessToken().pipe((0,Ae.b)(i=>{if(!i)throw new Error("Failed to refresh token")}),(0,H.w)(()=>(0,x.of)(this.getAuthInfo().accessToken))):(0,x.of)(t)),(0,I.K)(n=>(console.error("Error in getAccessToken",n),(0,x.of)(null)))):(0,x.of)(null)}handleError(t){return t.error instanceof ErrorEvent?console.error("An error occurred",t.error.message):console.error(`Backend returned code ${t.status}, body was: ${t.error}`),Promise.reject(t.error.message||t.error||t)}refreshAccessToken(){const t=this.getAuthInfo().refreshToken;if(!t)return(0,x.of)(!1);const n=`${__authUrl}/auth/realms/Toyota/protocol/openid-connect/token`,i=new m.WM({"Content-Type":"application/x-www-form-urlencoded"}),r=new URLSearchParams;return r.set("grant_type","refresh_token"),r.set("client_id","resource-management"),r.set("client_secret","55ae4e5a-524f-4135-ac55-3194b6c99f26"),r.set("refresh_token",t),this.http.post(n,r.toString(),{headers:i}).pipe((0,X.U)(s=>(this.setAuthInfo({accessToken:s.access_token,refreshToken:s.refresh_token}),!0)),(0,I.K)(s=>(console.error("Failed to refresh access token",s),(0,x.of)(!1))))}isTokenExpired(t){const n=this.tokenValidURL,i=new m.WM({Authorization:"Bearer "+t});return this.http.get(n,{headers:i,observe:"response"}).pipe((0,X.U)(r=>204!==r.status),(0,I.K)(r=>401===r.status?(0,x.of)(!0):(console.error("Error checking token expiry",r),(0,x.of)(!1))))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN),e.LFG(d.F0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Me=(()=>{class o{constructor(t,n){this.authenticationService=t,this.router=n,sessionStorage.clear()}login(){this.authenticationService.existUser(this.user).then(t=>{!0===t.response.status?(sessionStorage.setItem("permissions",JSON.stringify(t.permissions)),sessionStorage.setItem("user-name",t.user.id),sessionStorage.setItem("user-name-label",t.user.name),sessionStorage.setItem("user-ruc",t.user.ruc),sessionStorage.setItem("auth-info",JSON.stringify(t.auth)),this.router.navigate(["init"])):!1===t.response.status&&alert(t.response.error.message)}).catch(t=>{t.response&&t.response.error?alert(t.response.error.message):alert("Error deconocido, revisar conexi\xf3n")})}ngOnInit(){this.user=new Ce("","","","")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(D),e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],features:[e._Bn([D])],decls:16,vars:2,consts:[[1,"middle-box","text-center","loginscreen","animated","fadeInDown"],["alt","image","src","https://leightel.com/wp-content/uploads/2018/09/logoToyota.png","width","300px","height","60px",1,"img-circle"],[3,"ngSubmit"],["userForm","ngForm"],[1,"form-group"],["type","text","id","cedula","name","cedula","placeholder","usuario",1,"form-control",3,"ngModel","ngModelChange"],["type","password","id","password","name","password","placeholder","password",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","block","full-width","m-b"],[1,"m-t"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div"),e._UZ(2,"img",1),e.TgZ(3,"h3"),e._uU(4,"Tracking vehicular"),e.qZA(),e.TgZ(5,"form",2,3),e.NdJ("ngSubmit",function(){return n.login()}),e.TgZ(7,"div",4),e.TgZ(8,"input",5),e.NdJ("ngModelChange",function(r){return n.user.username=r}),e.qZA(),e.qZA(),e.TgZ(9,"div",4),e.TgZ(10,"input",6),e.NdJ("ngModelChange",function(r){return n.user.password=r}),e.qZA(),e.qZA(),e.TgZ(11,"button",7),e._uU(12,"Login"),e.qZA(),e.qZA(),e.TgZ(13,"p",8),e.TgZ(14,"small"),e._uU(15,"\xa9 Toyota Ecuador 2017"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Q6J("ngModel",n.user.username),e.xp6(2),e.Q6J("ngModel",n.user.password))},directives:[c._Y,c.JL,c.F,c.Fj,c.JJ,c.On],encapsulation:2}),o})(),k=(()=>{class o{constructor(t){this.http=t,this.getVehiclesUrl=`${__apiBaseUrl}/vehicles/search`,this.getVehicleUrl=`${__apiBaseUrl}/vehicles`,this.getInternalVehiclesUrl=`${__apiBaseUrl}/vehicles/search-internal`,this.getInternalVehicleUrl=`${__apiBaseUrl}/vehicles/internal`,this.getVehicleAccessoriesDocuemntUrl="https://tems-api.tde.com.ec/api/accessories/orders/documents",this.makeGetRequest=(n,i)=>this.http.get(n,{responseType:"json"}).toPromise().then(r=>i(r)).catch(o.handleError),this.mapAsVehicle=n=>n.vehiculo,this.mapAsVehicles=n=>n.vehiculos}static handleError(t){return console.error("An error occurred",t),Promise.reject(t.error.message||t.message||t)}getVehicles(t){return this.makeGetRequest(`${this.getVehiclesUrl}/${t}`,this.mapAsVehicles)}getVehicle(t){return this.makeGetRequest(`${this.getVehicleUrl}/${t}`,this.mapAsVehicle)}getInternalVehicles(t){return this.makeGetRequest(`${this.getInternalVehiclesUrl}/${t}`,this.mapAsVehicles)}getInternalVehicle(t){return this.makeGetRequest(`${this.getInternalVehicleUrl}/${t}`,this.mapAsVehicle)}getVehicleAccessoriesDocumentUrl(t){return`${this.getVehicleAccessoriesDocuemntUrl}?chassis=${t}`}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();const xe=function(o){return["/track-form",o]};function ke(o,a){if(1&o&&(e.TgZ(0,"td"),e.TgZ(1,"a",18),e._UZ(2,"i",19),e._uU(3," Iniciar tracking"),e.qZA(),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(1,xe,t.chasis))}}function Oe(o,a){1&o&&(e.TgZ(0,"td"),e._UZ(1,"i",19),e._uU(2," Tracking finalizado"),e.qZA())}function ye(o,a){1&o&&(e.TgZ(0,"td"),e._UZ(1,"i",19),e._uU(2," Tracking cerrado"),e.qZA())}function Ue(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.YNc(9,ke,4,3,"td",17),e.YNc(10,Oe,3,0,"td",17),e.YNc(11,ye,3,0,"td",17),e.qZA()),2&o){const t=a.$implicit,n=a.index,i=e.oxw();e.uIk("data-index",n),e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.chasis),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(t.color),e.xp6(1),e.Q6J("ngIf","transito"==i.stateTracking(t)),e.xp6(1),e.Q6J("ngIf","finalizado"==i.stateTracking(t)),e.xp6(1),e.Q6J("ngIf","cerrado"==i.stateTracking(t))}}let Pe=(()=>{class o{constructor(t,n){this.vehicleService=t,this.router=n}searchVehicles(t){this.vehicleService.getVehicles(t).then(n=>{this.vehicles=n})}stateTracking(t){return"entrada"===t.evento_anterior&&"externo"===t.tipo_destino_anterior?"administrador"===t.usuario_crea.toLowerCase()?"cerrado":"finalizado":sessionStorage.getItem("user-ruc")===t.ruc_destino_anterior?"transito":void 0}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k),e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["search-vehicle"]],features:[e._Bn([k])],decls:35,vars:1,consts:[[1,"wrapper","wrapper-content"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"ibox","float-e-margins"],[1,"ibox-title"],[1,"ibox-content"],[1,"col-sm-4"],["trackForm","ngForm"],[1,"input-group"],["type","text","placeholder","Ingrese al menos 6 n\xfameros","required","","minlength","4","maxlength","24",1,"input-sm","form-control"],["search",""],[1,"input-group-btn"],["type","submit",1,"btn","btn-sm","btn-primary",3,"click"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"routerLink"],[1,"fa","fa-car"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"h5"),e._uU(7,"Buscar Veh\xedculos"),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"div",2),e.TgZ(10,"div",7),e.TgZ(11,"form",null,8),e.TgZ(13,"div",9),e._UZ(14,"input",10,11),e.TgZ(16,"span",12),e.TgZ(17,"button",13),e.NdJ("click",function(){e.CHM(i);const s=e.MAs(15);return n.searchVehicles(s.value)}),e._uU(18," Buscar chasis"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",14),e.TgZ(20,"table",15),e.TgZ(21,"thead"),e.TgZ(22,"tr"),e.TgZ(23,"th"),e._uU(24,"#"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Chasis "),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Modelo "),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Color "),e.qZA(),e._UZ(31,"th"),e._UZ(32,"th"),e.qZA(),e.qZA(),e.TgZ(33,"tbody"),e.YNc(34,Ue,12,8,"tr",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(34),e.Q6J("ngForOf",n.vehicles))},directives:[c._Y,c.JL,c.F,g.sg,g.O5,d.yS],encapsulation:2}),o})();const we=function(o){return["/change-location",o]};function Fe(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e.TgZ(10,"a",16),e._UZ(11,"i",17),e._uU(12," Cambiar ubicaci\xf3n"),e.qZA(),e.qZA(),e.qZA()),2&o){const t=a.$implicit,n=a.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.chasis),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(t.color),e.xp6(2),e.Q6J("routerLink",e.VKq(5,we,t.chasis))}}let Re=(()=>{class o{constructor(t){this.vehicleService=t,this.isNotEmpty=n=>n.length>0,this.makeRequestForInternalVehicles=n=>this.vehicleService.getInternalVehicles(n).then(i=>this.handleVehicles(i)),this.isEmpty=n=>0===n.length}searchVehicles(t){this.isNotEmpty(t)?this.makeRequestForInternalVehicles(t).then():alert("Debe ingresar al menos 1 n\xfamero")}handleVehicles(t){this.isEmpty(t)?alert("No se encontraron resultados"):this.vehicles=t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-search-internal-vehicle"]],features:[e._Bn([k])],decls:34,vars:1,consts:[[1,"wrapper","wrapper-content"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"ibox","float-e-margins"],[1,"ibox-title"],[1,"ibox-content"],[1,"col-sm-4"],[1,"input-group"],["type","text","minlength","4","maxlength","24",1,"input-sm","form-control"],["search",""],[1,"input-group-btn"],["type","submit",1,"btn","btn-sm","btn-primary",3,"click"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"fa","fa-location-arrow"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"h5"),e._uU(7,"Buscar Veh\xedculos Internos"),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"div",2),e.TgZ(10,"div",7),e.TgZ(11,"form"),e.TgZ(12,"div",8),e._UZ(13,"input",9,10),e.TgZ(15,"span",11),e.TgZ(16,"button",12),e.NdJ("click",function(){e.CHM(i);const s=e.MAs(14);return n.searchVehicles(s.value)}),e._uU(17," Buscar chasis"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",13),e.TgZ(19,"table",14),e.TgZ(20,"thead"),e.TgZ(21,"tr"),e.TgZ(22,"th"),e._uU(23,"#"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Chasis "),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Modelo "),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Color "),e.qZA(),e._UZ(30,"th"),e._UZ(31,"th"),e.qZA(),e.qZA(),e.TgZ(32,"tbody"),e.YNc(33,Fe,13,7,"tr",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(33),e.Q6J("ngForOf",n.vehicles))},directives:[c._Y,c.JL,c.F,g.sg,d.yS],encapsulation:2}),o})();class z{}class P{constructor(a,t,n,i,r,s,p){this.parteId=a,this.parte=t,this.tipo=n,this.observacion=i,this.fotos=r,this.numeroFotos=s,this.vista=p}}let E=(()=>{class o{constructor(t){this.http=t,this.locationChangeUrl=`${__apiBaseUrl}/track/locationChange`,this.changeLocationReportUrl=`${__apiBaseUrl}/track/changeLocationsReport`}static handleError(t){let n=t;return n=n.error||n,n=n.response||n,n=n.error||n,n=n.message||n,console.error("An error occurred",n),Promise.reject(n)}saveNewLocation(t){return this.http.post(this.locationChangeUrl,t,{responseType:"json"}).toPromise().catch(o.handleError)}requestForChangeLocationReport(t){return this.http.get(this.changeLocationReportUrl,{params:{chasis:t},responseType:"json"}).toPromise().then(n=>n).catch(o.handleError)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();class Je{constructor(){this.comentario="",this.novedades=[],this.fuente="angular"}}var q=h(4183);function Ne(o,a){if(1&o&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.codigo)}}function De(o,a){1&o&&(e.TgZ(0,"div",6),e._UZ(1,"input",42),e._uU(2," Frontal "),e.qZA())}function Se(o,a){1&o&&(e.TgZ(0,"div",6),e._UZ(1,"input",43),e._uU(2," Derecha "),e.qZA())}function Ie(o,a){1&o&&(e.TgZ(0,"div",6),e._UZ(1,"input",44),e._uU(2," Izquierda "),e.qZA())}function Ee(o,a){1&o&&(e.TgZ(0,"div",6),e._UZ(1,"input",45),e._uU(2," Posterior "),e.qZA())}function Be(o,a){if(1&o&&e._UZ(0,"img",46),2&o){const t=e.oxw(2);e.MGl("src","",t.noveltiesImageBaseUrl+t.sidesFrontal[0].imagen,".jpg",e.LSH)}}function je(o,a){if(1&o&&e._UZ(0,"img",47),2&o){const t=e.oxw(2);e.MGl("src","",t.noveltiesImageBaseUrl+t.sidesDerecha[0].imagen,".jpg",e.LSH)}}function Le(o,a){if(1&o&&e._UZ(0,"img",48),2&o){const t=e.oxw(2);e.MGl("src","",t.noveltiesImageBaseUrl+t.sidesIzquierda[0].imagen,".jpg",e.LSH)}}function Qe(o,a){if(1&o&&e._UZ(0,"img",49),2&o){const t=e.oxw(2);e.MGl("src","",t.noveltiesImageBaseUrl+t.sidesPosterior[0].imagen,".jpg",e.LSH)}}function Ye(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"img",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).selectedPart(i.parte_id,i.nombre)})("mouseover",function(){return e.CHM(t),e.oxw(3).over()}),e.qZA()}}function $e(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div"),e.YNc(2,Ye,1,0,"img",50),e.TgZ(3,"area",51),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).selectedPart(r.parte_id,r.nombre)}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(2),e.Q6J("ngIf","INTERIOR"==t.nombre),e.xp6(1),e.hYB("coords","",t.posicion_x,",",t.posicion_y,",30"),e.s9C("title",t.nombre)}}function He(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"area",51),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).selectedPart(r.parte_id,r.nombre)}),e.qZA()}if(2&o){const t=a.$implicit;e.hYB("coords","",t.posicion_x,",",t.posicion_y,",30"),e.s9C("title",t.nombre)}}function ze(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"area",51),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).selectedPart(r.parte_id,r.nombre)}),e.qZA()}if(2&o){const t=a.$implicit;e.hYB("coords","",t.posicion_x,",",t.posicion_y,",30"),e.s9C("title",t.nombre)}}function Ve(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"area",51),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).selectedPart(r.parte_id,r.nombre)}),e.qZA()}if(2&o){const t=a.$implicit;e.hYB("coords","",t.posicion_x,",",t.posicion_y,",30"),e.s9C("title",t.nombre)}}function Ge(o,a){if(1&o&&(e.TgZ(0,"option",53),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Xe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",20),e.TgZ(1,"div",1),e.TgZ(2,"b"),e._uU(3,"A\xf1adir novedad"),e.qZA(),e.TgZ(4,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().bsModalRef.hide()}),e.TgZ(5,"span",22),e._uU(6,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",23),e.TgZ(8,"div",5),e.YNc(9,De,3,0,"div",24),e.YNc(10,Se,3,0,"div",24),e.YNc(11,Ie,3,0,"div",24),e.YNc(12,Ee,3,0,"div",24),e.qZA(),e._UZ(13,"br"),e._UZ(14,"br"),e.TgZ(15,"div",25),e.YNc(16,Be,1,1,"img",26),e.YNc(17,je,1,1,"img",27),e.YNc(18,Le,1,1,"img",28),e.YNc(19,Qe,1,1,"img",29),e.TgZ(20,"map",30),e.YNc(21,$e,4,4,"div",10),e.qZA(),e.TgZ(22,"map",31),e.YNc(23,He,1,3,"area",32),e.qZA(),e.TgZ(24,"map",33),e.YNc(25,ze,1,3,"area",32),e.qZA(),e.TgZ(26,"map",34),e.YNc(27,Ve,1,3,"area",32),e.qZA(),e.qZA(),e.TgZ(28,"div",5),e.TgZ(29,"div",11),e.TgZ(30,"div",1),e.TgZ(31,"font",35),e.TgZ(32,"b"),e.TgZ(33,"h3"),e._uU(34),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(35,"br"),e.TgZ(36,"div",5),e.TgZ(37,"div",6),e._uU(38," Tipo "),e.qZA(),e.TgZ(39,"div",36),e.TgZ(40,"select",37),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().damage.tipo=i}),e.YNc(41,Ge,2,2,"option",38),e.qZA(),e.qZA(),e.qZA(),e._UZ(42,"br"),e._UZ(43,"br"),e.TgZ(44,"div",5),e.TgZ(45,"div",6),e._uU(46," Observaci\xf3n "),e.qZA(),e.TgZ(47,"div",36),e.TgZ(48,"textarea",39),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().damage.observacion=i}),e.qZA(),e.qZA(),e.qZA(),e._UZ(49,"br"),e._UZ(50,"br"),e._UZ(51,"br"),e.TgZ(52,"div",5),e.TgZ(53,"div",40),e.TgZ(54,"a",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().addDamage()}),e._uU(55,"A\xf1adir novedad"),e.qZA(),e.qZA(),e.qZA(),e._UZ(56,"br"),e.qZA()}if(2&o){const t=e.oxw();e.xp6(9),e.Q6J("ngIf",null!=t.sidesFrontal&&t.sidesFrontal.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.sidesDerecha&&t.sidesDerecha.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.sidesIzquierda&&t.sidesIzquierda.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.sidesPosterior&&t.sidesPosterior.length>0),e.xp6(4),e.Q6J("ngIf",null!=t.sidesFrontal&&t.sidesFrontal.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.sidesDerecha&&t.sidesDerecha.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.sidesIzquierda&&t.sidesIzquierda.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.sidesPosterior&&t.sidesPosterior.length>0),e.xp6(2),e.Q6J("ngForOf",t.sidesFrontal),e.xp6(2),e.Q6J("ngForOf",t.sidesDerecha),e.xp6(2),e.Q6J("ngForOf",t.sidesIzquierda),e.xp6(2),e.Q6J("ngForOf",t.sidesPosterior),e.xp6(7),e.Oqu(t.damage.parte),e.xp6(6),e.Q6J("ngModel",t.damage.tipo),e.xp6(1),e.Q6J("ngForOf",t.typeDamages),e.xp6(7),e.Q6J("ngModel",t.damage.observacion)}}function We(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"a",13),e.NdJ("click",function(){const r=e.CHM(t).index;return e.oxw().deleteDamage(r)}),e._uU(8,"Eliminar "),e._UZ(9,"i",54),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(2),e.Oqu(t.parte),e.xp6(2),e.Oqu(t.tipo),e.xp6(2),e.Oqu(t.observacion)}}let Ke=(()=>{class o{constructor(t,n,i,r,s){this.vehicleService=t,this.changeLocationService=n,this.route=i,this.location=r,this.modalService=s,this.changeLocation=new Je,this.vehicle=new z,this.damage=new P(0,"","Desconche",""),this.typeDamages=["Desconche","Faltante","Golpe","Raspado","Raya","Roto","Sucio","Trizado"],this.newLocationDefaultValue="Seleccione nueva ubicaci\xf3n",this.noveltiesImageBaseUrl=__noveltiesImageBaseUrl}ngOnInit(){this.vehicleService.getInternalVehicle(this.route.snapshot.params.chasis).then(t=>{this.vehicle=t,this.setSides(t.vistas)})}openModal(t){this.damage=new P(0,"","Desconche",""),$.getScript("assets/damage.js"),this.bsModalRef=this.modalService.show(t)}selectedPart(t,n){this.damage.parteId=t,this.damage.parte=n,$("#circlePart").hide()}over(){$("#circlePart").hide()}addDamage(){if(0!==this.damage.parteId){const t=new P(this.damage.parteId,this.damage.parte,this.damage.tipo,this.damage.observacion);this.changeLocation.novedades.push(t),this.bsModalRef.hide()}else alert("Seleccione una parte del veh\xedculo")}deleteDamage(t){this.changeLocation.novedades.splice(t,1)}requestChangeLocation(){if(this.isNotValid())return void alert("Debe seleccionar nueva ubicaci\xf3n");const t=this.buildChangeLocationRequest();this.changeLocationService.saveNewLocation(t).then(n=>this.handleChangeLocationResponse(n)).catch(n=>alert(n))}setSides(t){if(this.sides=t,this.sides.length>0){const n=this.sides.find(p=>"frontal"in p),i=this.sides.find(p=>"derecha"in p),r=this.sides.find(p=>"izquierda"in p),s=this.sides.find(p=>"posterior"in p);this.sidesFrontal=void 0!==n?n.frontal:[],this.sidesDerecha=void 0!==i?i.derecha:[],this.sidesIzquierda=void 0!==r?r.izquierda:[],this.sidesPosterior=void 0!==s?s.posterior:[]}}isNotValid(){return!this.changeLocation.nuevaUbicacion||this.changeLocation.nuevaUbicacion===this.newLocationDefaultValue}buildChangeLocationRequest(){const t=this.changeLocation;return t.chasis=this.vehicle.chasis,t.usuario=sessionStorage.getItem("user-name"),t}handleChangeLocationResponse(t){t?(alert(`El vehiculo ha sido cambiado a la ubicaci\xf3n ${this.changeLocation.nuevaUbicacion}`),this.location.navigate(["search-internal-vehicle"]).catch(n=>console.log(n))):alert("No se pudo realizar el cambio de ubicaci\xf3n")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k),e.Y36(E),e.Y36(d.gz),e.Y36(d.F0),e.Y36(q.tT))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-change-location"]],features:[e._Bn([k,E])],decls:62,vars:10,consts:[[1,"container","infoVehicle"],["align","center"],[1,"fa","fa-car","fa-3x"],["align","center",1,"chasis"],[1,"container"],[1,"form-group"],[1,"col-lg-3"],["disabled","",1,"form-control",3,"value"],["name","nuevaUbicacion","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","",3,"defaultSelected"],[4,"ngFor","ngForOf"],[1,"col-lg-12"],["name","observacion","maxlength","200",1,"form-control",3,"ngModel","ngModelChange"],[3,"click"],[1,"fa","fa-plus-circle"],[1,"row"],["myModal",""],[1,"table-responsive"],[1,"table","table-striped"],["type","submit",1,"btn","btn-success",3,"click"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true",2,"font-size","125%"],[1,"modal-body"],["class","col-lg-3",4,"ngIf"],["id","image_container",2,"width","2260px"],["id","viewFront","class","image1","width","560px","height","280px","usemap","#automapFront",3,"src",4,"ngIf"],["id","viewRight","alt","image","width","560px","height","280px","usemap","#automapRight","style","display:none",3,"src",4,"ngIf"],["id","viewLeft","alt","image","width","560px","height","280px","usemap","#automapLeft","style","display:none",3,"src",4,"ngIf"],["id","viewBack","alt","image","width","560px","height","280px","usemap","#automapBack","style","display:none",3,"src",4,"ngIf"],["name","automapFront","id","automapFront"],["name","automapRight","id","automapRight"],["shape","circle",3,"coords","title","click",4,"ngFor","ngForOf"],["name","automapLeft","id","automapLeft"],["name","automapBack","id","automapBack"],["color","black"],[1,"col-lg-9"],["id","typeDamage","required","","name","typeDamage",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","id","damageObservacion","name","damageObservacion",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-lg-12","text-right"],[1,"btn","btn-primary",3,"click"],["type","radio","name","group2","value","Water","onclick","front();","checked","checked"],["type","radio","name","group2","value","Water","onclick","right();"],["type","radio","name","group2","value","Water","onclick","left();"],["type","radio","name","group2","value","Water","onclick","back();"],["id","viewFront","width","560px","height","280px","usemap","#automapFront",1,"image1",3,"src"],["id","viewRight","alt","image","width","560px","height","280px","usemap","#automapRight",2,"display","none",3,"src"],["id","viewLeft","alt","image","width","560px","height","280px","usemap","#automapLeft",2,"display","none",3,"src"],["id","viewBack","alt","image","width","560px","height","280px","usemap","#automapBack",2,"display","none",3,"src"],["id","interiorImage","src","/assets/images/insideCar.png","width","50","height","50","style","position:absolute;top:90px;left:490px;",3,"click","mouseover",4,"ngIf"],["shape","circle",3,"coords","title","click"],["id","interiorImage","src","/assets/images/insideCar.png","width","50","height","50",2,"position","absolute","top","90px","left","490px",3,"click","mouseover"],[3,"value"],[1,"fa","fa-trash"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"table"),e.TgZ(2,"tr"),e.TgZ(3,"td",1),e._UZ(4,"i",2),e.qZA(),e.TgZ(5,"td",3),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"tr"),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"div",4),e.TgZ(14,"form"),e.TgZ(15,"div",5),e.TgZ(16,"div",6),e.TgZ(17,"label"),e._uU(18,"Ubicaci\xf3n actual"),e.qZA(),e._UZ(19,"input",7),e.qZA(),e.TgZ(20,"div",6),e.TgZ(21,"label"),e._uU(22,"Ubicaci\xf3n destino"),e.qZA(),e.TgZ(23,"select",8),e.NdJ("ngModelChange",function(s){return n.changeLocation.nuevaUbicacion=s}),e.TgZ(24,"option",9),e._uU(25),e.qZA(),e.YNc(26,Ne,2,1,"option",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",5),e.TgZ(28,"div",11),e.TgZ(29,"label"),e._uU(30,"Observaci\xf3n"),e.qZA(),e.TgZ(31,"input",12),e.NdJ("ngModelChange",function(s){return n.changeLocation.comentario=s}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",5),e.TgZ(33,"div",11),e._UZ(34,"hr"),e.qZA(),e.qZA(),e.TgZ(35,"div",5),e.TgZ(36,"div",11),e.TgZ(37,"a",13),e.NdJ("click",function(){e.CHM(i);const s=e.MAs(42);return n.openModal(s)}),e._uU(38,"A\xf1adir novedad "),e._UZ(39,"i",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",15),e.YNc(41,Xe,57,16,"ng-template",null,16,e.W1O),e.qZA(),e.TgZ(43,"div",5),e.TgZ(44,"div",11),e.TgZ(45,"div",17),e.TgZ(46,"table",18),e.TgZ(47,"thead"),e.TgZ(48,"tr"),e.TgZ(49,"th"),e._uU(50,"Parte "),e.qZA(),e.TgZ(51,"th"),e._uU(52,"Tipo "),e.qZA(),e.TgZ(53,"th"),e._uU(54,"Observaci\xf3n "),e.qZA(),e._UZ(55,"th"),e.qZA(),e.qZA(),e.TgZ(56,"tbody"),e.YNc(57,We,10,3,"tr",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(58,"br"),e._UZ(59,"br"),e.TgZ(60,"button",19),e.NdJ("click",function(){return n.requestChangeLocation()}),e._uU(61,"Cambiar ubicaci\xf3n"),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(6),e.Oqu(n.vehicle.chasis),e.xp6(3),e.Oqu(n.vehicle.color),e.xp6(2),e.Oqu(n.vehicle.descripcion),e.xp6(8),e.Q6J("value",n.vehicle.ubicacion),e.xp6(4),e.Q6J("ngModel",n.changeLocation.nuevaUbicacion),e.xp6(1),e.Q6J("defaultSelected",!0),e.xp6(1),e.Oqu(n.newLocationDefaultValue),e.xp6(1),e.Q6J("ngForOf",n.vehicle.ubicaciones),e.xp6(5),e.Q6J("ngModel",n.changeLocation.comentario),e.xp6(26),e.Q6J("ngForOf",n.changeLocation.novedades))},directives:[c._Y,c.JL,c.F,c.EJ,c.Q7,c.JJ,c.On,c.YN,c.Kr,g.sg,c.Fj,c.nD,g.O5],styles:["td[_ngcontent-%COMP%]{padding-left:20px;color:#000}.chasis[_ngcontent-%COMP%]{font-size:20px;font-weight:bold}.infoVehicle[_ngcontent-%COMP%]{background-color:#ccc;padding:20px}.ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}label[_ngcontent-%COMP%]{cursor:pointer}#upload-photo[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:-1}#page[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0;margin:0}#page[_ngcontent-%COMP%]{border-collapse:collapse}"]}),o})();class O{}class et{}let B=(()=>{class o{constructor(t){this.http=t}downloadBlobFile(t,n="file"){this.http.get(t,{responseType:"blob",observe:"response"}).toPromise().then(i=>{const r=i.body,s=i.headers.get("content-disposition");if(s){const Z=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(s);null!=Z&&Z[1]&&(n=Z[1].replace(/['"]/g,""))}const p=window.URL.createObjectURL(r),l=document.createElement("a");l.href=p,l.setAttribute("download",n),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(p)}).catch(this.handleError)}handleError(t){return 0===t.status&&t.error instanceof ProgressEvent?Promise.reject("No se pudo realizar la petici\xf3n al api, revise su conexi\xf3n."):Promise.reject(t.error.message||t.message||t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),b=(()=>{class o{constructor(t,n){this.http=t,this.downloadService=n,this.headers=new m.WM({"Content-Type":"application/json"}),this.postTrackingUrl=__apiBaseUrl+"/track/web",this.getTracksUrl=__apiBaseUrl+"/track",this.getTracksUrlStockReport=__apiBaseUrl+"/stock_report",this.getPhotosUrl=__apiBaseUrl+"/track/photos",this.getOriginsUrl=__apiBaseUrl+"/origin",this.getModelsUrl=__apiBaseUrl+"/models",this.getDealersUrl=__apiBaseUrl+"/dealers",this.inspectionPointReportUrl=__apiBaseUrl+"/inspection_point_report",this.dealerReportUrl=__apiBaseUrl+"/dealer_report",this.damageReportUrl=__apiBaseUrl+"/damage_report",this.peakReportUrl=__apiBaseUrl+"/peak_report",this.jdGuideUrl=`${this.getTracksUrl}/guide`}create(t){return this.http.post(this.postTrackingUrl,JSON.stringify({tracking:t}),{headers:this.headers,responseType:"json"}).toPromise().then(n=>n.data).catch(this.handleError)}getTracks(t,n){return this.http.get(`${this.getTracksUrl}/${t}?type=${n}`,{responseType:"json"}).toPromise().then(r=>r.tracks).catch(this.handleError)}getTracksByTrackingId(t,n){const i=`${this.getTracksUrl}/trackingid/${t}`;let r=new m.LE;return void 0!==n&&n.length>0&&(r=r.append("event",n)),this.http.get(i,{params:r,responseType:"json"}).toPromise().then(s=>s.tracks).catch(o.handleJsonError)}getBatchTrackings(t,n,i,r,s){const p=`${this.getTracksUrl}/get/batch`;let l=new m.LE;return l=l.append("origin",t),l=l.append("destination",n),l=l.append("fromDate",i),l=l.append("toDate",r),l=l.append("event",s),this.http.get(p,{params:l,responseType:"json"}).toPromise().then(u=>u.tracks).catch(o.handleJsonError)}updateTrackById(t,n,i,r,s){const p=`${this.getTracksUrl}/id`,l=sessionStorage.getItem("user-name"),u=JSON.stringify({ids:t,trakingId:n,date:i,motive:r,user:l});let Z=new m.LE;return void 0!==s&&!0===s&&(Z=Z.append("delete","true")),this.http.put(p,u,{headers:this.headers,params:Z,responseType:"json"}).toPromise().then(N=>N.response.status).catch(o.handleJsonError)}updateTracksByTrackingId(t,n,i,r,s){const p=`${this.getTracksUrl}/batch/${t}`;let l=new m.LE;const Z={user:sessionStorage.getItem("user-name")};return n.length>0&&(Z.newTrakingId=n),i.length>0&&(Z.date=i),void 0!==r&&r.length>0&&(Z.motive=r),void 0!==s&&s.length>0&&(l=l.append("event",s)),this.http.put(p,JSON.stringify(Z),{headers:this.headers,params:l,responseType:"json"}).toPromise().then(N=>N.response.status).catch(o.handleJsonError)}deleteTrackById(t,n,i,r){const s=`${this.getTracksUrl}/id/${t}`;return this.updateTrackById([t],n,i,r,!0).then(()=>this.http.delete(s,{responseType:"json"}).toPromise().then(p=>p.response.status).catch(o.handleJsonError)).catch(o.handleJsonError)}getTracksExcel(t,n){this.downloadService.downloadBlobFile(`${this.getTracksUrl}/${t}?type=${n}`,"ReporteTracking.xlsx")}getPhotos(t){return this.http.get(`${this.getPhotosUrl}/${t}`,{responseType:"json"}).toPromise().then(i=>i.photos).catch(this.handleError)}getOrigins(){return this.http.get(`${this.getOriginsUrl}`,{responseType:"json"}).toPromise().then(n=>n.origenes).catch(this.handleError)}getModels(){return this.http.get(`${this.getModelsUrl}`,{responseType:"json"}).toPromise().then(n=>n.models).catch(this.handleError)}getDealers(){return this.http.get(`${this.getDealersUrl}`,{responseType:"json"}).toPromise().then(n=>n.dealers).catch(this.handleError)}stockReportPlace(t,n){return this.http.get(`${this.getTracksUrlStockReport}/${t}?type=${n}`,{responseType:"json"}).toPromise().then(r=>r.data.vehiculos).catch(this.handleError)}stockReportPlaceExcel(t,n){this.downloadService.downloadBlobFile(`${this.getTracksUrlStockReport}/${t}?type=${n}`,"ReporteStock.xlsx")}stockReportPlaceDescription(t,n,i){return this.http.get(`${this.getTracksUrlStockReport}/${t}/${n}?type=${i}`,{responseType:"json"}).toPromise().then(s=>s.data.vehiculos).catch(this.handleError)}stockReportPlaceDescriptionExcel(t,n,i){this.downloadService.downloadBlobFile(`${this.getTracksUrlStockReport}/${t}/${n}?type=${i}`,"ReporteStock.xlsx")}inspectionPointReport(t,n,i,r,s,p){let l=`?inspectionPoint=${t}&event=${n}&from=${s}&to=${p}`;return null!=i&&"TODOS"!==i&&(l+=`&place=${i}`),null!=r&&"TODOS"!==r&&(l+=`&model=${r}`),this.http.get(`${this.inspectionPointReportUrl}${l}`,{responseType:"json"}).toPromise().then(Z=>Z.tracks).catch(this.handleError)}inspectionPointReportExcel(t,n,i,r,s,p){let l=`?inspectionPoint=${t}&event=${n}&from=${s}&to=${p}&type=excel`;null!=i&&"TODOS"!==i&&(l+=`&place=${i}`),null!=r&&"TODOS"!==r&&(l+=`&model=${r}`),this.downloadService.downloadBlobFile(`${this.inspectionPointReportUrl}${l}`,"Reporte Punto de inspecci\xf3n.xlsx")}dealerReport(t,n,i,r){let s=`?from=${i}&to=${r}`;return null!=t&&"TODOS"!==t&&(s+=`&dealer=${t}`),null!=n&&"TODOS"!==n&&(s+=`&model=${n}`),this.http.get(`${this.dealerReportUrl}${s}`,{responseType:"json"}).toPromise().then(l=>l.dealerReportResult).catch(this.handleError)}dealerReportExcel(t,n,i,r){let s=`?from=${i}&to=${r}&type=excel`;null!=t&&"TODOS"!==t&&(s+=`&dealer=${t}`),null!=n&&"TODOS"!==n&&(s+=`&model=${n}`),this.downloadService.downloadBlobFile(`${this.dealerReportUrl}${s}`,"ReporteConcesionario.xlsx")}damageReport(t,n,i,r,s,p){let l=`?inspectionPoint=${t}&event=${n}&from=${s}&to=${p}`;null!=i&&"TODOS"!==i&&(l+=`&place=${i}`),null!=r&&"TODOS"!==r&&(l+=`&model=${r}`);const u=`${this.damageReportUrl}${l}`;return console.log(u),this.http.get(u,{responseType:"json"}).toPromise().then(Z=>Z.damageReportResult).catch(this.handleError)}damageReportExcel(t,n,i,r,s,p){let l=`?inspectionPoint=${t}&event=${n}&from=${s}&to=${p}&type=excel`;null!=i&&"TODOS"!==i&&(l+=`&place=${i}`),null!=r&&"TODOS"!==r&&(l+=`&model=${r}`),this.downloadService.downloadBlobFile(`${this.damageReportUrl}${l}`,"ReporteNovedades.xlsx")}peakReport(t,n){return this.http.get(`${this.peakReportUrl}?year=${t}&month=${n}`,{responseType:"json"}).toPromise().then(s=>s).catch(this.handleError)}getGuide(t){return this.http.get(`${this.jdGuideUrl}/${t}`,{responseType:"json"}).toPromise().then(i=>i).catch(this.handleError)}handleError(t){return console.error("An error occurred",t),0===t.status&&t.error instanceof ProgressEvent?Promise.reject("No se pudo realizar la petici\xf3n al api, revise su conexi\xf3n."):Promise.reject(t.error.message||t.message||t)}static handleJsonError(t){return Promise.reject(JSON.parse(t._body).response.error)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN),e.LFG(B))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();function tt(o,a){if(1&o&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.Oqu(t.nombre)}}function nt(o,a){if(1&o&&(e.TgZ(0,"div",8),e.TgZ(1,"label",9),e._uU(2,"Veh\xedculos"),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"label",9),e._uU(5),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(5),e.Oqu(t.vehicles.length)}}function ot(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",20),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.qZA(),e.TgZ(28,"td"),e._uU(29),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.qZA(),e.TgZ(32,"td"),e._uU(33),e.qZA(),e.TgZ(34,"td"),e._uU(35),e.qZA(),e.qZA()),2&o){const t=a.$implicit,n=a.index,i=e.oxw();e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.chasis),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(t.motor),e.xp6(2),e.Oqu(t.color),e.xp6(2),e.Oqu(e.xi3(13,17,t.fecha,"dd/MM/yyyy HH:mm")),e.xp6(3),e.Oqu(i.diffDays(t.fecha)),e.xp6(2),e.Oqu(t.destino_anterior),e.xp6(2),e.Oqu(t.ubicacion),e.xp6(2),e.Oqu(t.usuario),e.xp6(2),e.Oqu(t.observacion),e.xp6(2),e.Oqu(t.transportista_anterior),e.xp6(2),e.Oqu(t.guia_anterior),e.xp6(2),e.Oqu(t.chofer),e.xp6(2),e.Oqu(t.pedido),e.xp6(2),e.Oqu(t.factura),e.xp6(2),e.Oqu(t.bl)}}let it=(()=>{class o{constructor(t){this.trackingService=t}searchVehicles(t,n,i){null!=this.stockReport.origin&&null!=this.stockReport.model&&("web"===i&&this.trackingService.stockReportPlaceDescription(t,n,i).then(r=>this.vehicles=r),"excel"===i&&this.trackingService.stockReportPlaceDescriptionExcel(t,n,i)),null!=this.stockReport.origin&&null==this.stockReport.model&&("web"===i&&this.trackingService.stockReportPlace(t,i).then(r=>this.vehicles=r),"excel"===i&&this.trackingService.stockReportPlaceExcel(t,i))}diffDays(t){const n=t.split(/\D+/),r=new Date(+n[0],+n[1]-1,+n[2]);return Math.round(Math.abs((Date.now()-r.getTime())/864e5))}ngOnInit(){this.stockReport=new et,this.trackingService.getOrigins().then(t=>{const n=t.findIndex(r=>"FABRICANTE"===r.nombre.toUpperCase());n>=0&&t.splice(n,1);const i=new O;i.nombre="CONCESIONARIO",t.push(i),this.origins=t.sort((r,s)=>r.nombre.localeCompare(s.nombre))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["stock-report"]],features:[e._Bn([b])],decls:75,vars:5,consts:[[1,"wrapper","wrapper-content"],[1,"row"],[1,"col-lg-12"],[1,"ibox","float-e-margins"],[1,"ibox-title"],[1,"col-sm-6"],[1,"ibox-content"],[1,"col-sm-4"],[1,"input-group"],["for","evento"],["id","origin","required","","name","origin",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text",1,"input-sm","form-control",3,"ngModel","ngModelChange"],[1,"col-sm-1"],["class","input-group",4,"ngIf"],[1,"col-sm-2"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-file-excel-o"],[1,"table-responsive"],[1,"table","table-striped"],[2,"width","300px"],[4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",1),e.TgZ(6,"div",5),e.TgZ(7,"h5"),e._uU(8,"Reporte Stock"),e.qZA(),e.qZA(),e.TgZ(9,"div",5),e.TgZ(10,"h5"),e._uU(11,"Reporte Stock"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",6),e.TgZ(13,"div",1),e.TgZ(14,"div",7),e.TgZ(15,"div",8),e.TgZ(16,"label",9),e._uU(17,"Bodega"),e.qZA(),e.TgZ(18,"select",10),e.NdJ("ngModelChange",function(r){return n.stockReport.origin=r}),e.YNc(19,tt,2,2,"option",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",7),e.TgZ(21,"div",8),e.TgZ(22,"label",9),e._uU(23,"Modelo"),e.qZA(),e.TgZ(24,"input",12),e.NdJ("ngModelChange",function(r){return n.stockReport.model=r}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",13),e.YNc(26,nt,6,1,"div",14),e.qZA(),e.TgZ(27,"div",15),e.TgZ(28,"div",8),e.TgZ(29,"button",16),e.NdJ("click",function(){return n.searchVehicles(n.stockReport.origin,n.stockReport.model,"web")}),e._uU(30," Buscar "),e.qZA(),e._uU(31," \xa0 "),e.TgZ(32,"button",16),e.NdJ("click",function(){return n.searchVehicles(n.stockReport.origin,n.stockReport.model,"excel")}),e._UZ(33,"i",17),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(34,"hr"),e.TgZ(35,"div",18),e.TgZ(36,"table",19),e.TgZ(37,"thead"),e.TgZ(38,"tr"),e.TgZ(39,"th"),e._uU(40,"#"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"Chasis"),e.qZA(),e.TgZ(43,"th",20),e._uU(44,"Modelo"),e.qZA(),e.TgZ(45,"th"),e._uU(46,"Motor"),e.qZA(),e.TgZ(47,"th"),e._uU(48,"Color"),e.qZA(),e.TgZ(49,"th"),e._uU(50,"Fecha inspecci\xf3n"),e.qZA(),e.TgZ(51,"th"),e._uU(52,"Permanencia (d\xedas)"),e.qZA(),e.TgZ(53,"th"),e._uU(54,"Bodega"),e.qZA(),e.TgZ(55,"th"),e._uU(56,"Ubicaci\xf3n"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"Responsable"),e.qZA(),e.TgZ(59,"th"),e._uU(60,"Observaci\xf3n"),e.qZA(),e.TgZ(61,"th"),e._uU(62,"Transportista"),e.qZA(),e.TgZ(63,"th"),e._uU(64,"Gu\xeda"),e.qZA(),e.TgZ(65,"th"),e._uU(66,"Chofer"),e.qZA(),e.TgZ(67,"th"),e._uU(68,"No. Pedido"),e.qZA(),e.TgZ(69,"th"),e._uU(70,"No. Factura"),e.qZA(),e.TgZ(71,"th"),e._uU(72,"No. B/L"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(73,"tbody"),e.YNc(74,ot,36,20,"tr",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(18),e.Q6J("ngModel",n.stockReport.origin),e.xp6(1),e.Q6J("ngForOf",n.origins),e.xp6(5),e.Q6J("ngModel",n.stockReport.model),e.xp6(2),e.Q6J("ngIf",null!=n.vehicles),e.xp6(48),e.Q6J("ngForOf",n.vehicles))},directives:[c.EJ,c.Q7,c.JJ,c.On,g.sg,c.Fj,g.O5,c.YN,c.Kr],pipes:[g.uU],encapsulation:2}),o})(),C=(()=>{class o{toLocateDate(t){const n=t.split(/\D+/),i=new Date(+n[0],+n[1]-1,+n[2],+n[3],+n[4],0,0);return i.setHours(i.getHours()-5),i}sortObjectArray(t){return t.sort((n,i)=>n.nombre>i.nombre?1:n.nombre<i.nombre?-1:0),t}sortModelsObjectArray(t){return t.sort((n,i)=>n.descripcion>i.descripcion?1:n.descripcion<i.descripcion?-1:0),t}sortAlphanumeric(t,n){let i,r,p,s=0;const l=/(\.\d+)|(\d+(\.\d+)?)|([^\d.]+)|(\.\D+)|(\.$)/g;if(t===n)return 0;const u=t.toLowerCase().match(l),Z=n.toLowerCase().match(l),N=u.length;for(;s<N;){if(!Z[s])return 1;if(i=u[s],r=Z[s++],i!==r)return p=i-r,isNaN(p)?i>r?1:-1:p}return Z[s]?-1:0}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var U=h(4646),v=h(2281);function at(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e.TgZ(15,"span",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(),p=e.MAs(31);return s.openNoveltiesModal(r.novedades,p)}),e._UZ(16,"i",13),e._uU(17),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit,n=a.index,i=e.oxw();e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(e.xi3(5,7,t.fecha,"dd/MM/yyyy HH:mm")),e.xp6(3),e.Oqu(t.patio),e.xp6(2),e.Oqu(t.ubicacion),e.xp6(2),e.Oqu(null==t.comentario?i.noObservationString:t.comentario),e.xp6(2),e.Oqu(t.usuario),e.xp6(4),e.hij(" ",t.novedades.length," ")}}function rt(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.qZA()),2&o){const t=a.$implicit,n=a.index,i=e.oxw(2);e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.vista),e.xp6(2),e.hij("",t.parte," "),e.xp6(2),e.Oqu(t.tipo),e.xp6(2),e.Oqu(null==t.observacion?i.noObservationString:t.observacion)}}function st(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",14),e.TgZ(1,"h4",15),e._uU(2,"Novedades"),e.qZA(),e.TgZ(3,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().bsModalRef.hide()}),e.TgZ(4,"span",17),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",18),e.TgZ(7,"table",9),e.TgZ(8,"thead"),e.TgZ(9,"tr"),e.TgZ(10,"th"),e._uU(11,"#"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Vista"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Parte"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Tipo"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Observacion"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"tbody"),e.YNc(21,rt,11,5,"tr",10),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(21),e.Q6J("ngForOf",t.novelties)}}let ct=(()=>{class o{constructor(t,n){this.changeLocationService=t,this.modalService=n,this.noObservationString="Sin observaci\xf3n"}ngOnInit(){this.changeLocationService.requestForChangeLocationReport(this.chassis).then(t=>this.changeLocationsReport=this.changeLocationsReportFilter(t))}collapse(t){t.preventDefault();const n=jQuery(t.target).closest("div.ibox"),i=jQuery(".collapse-link").find("i");n.children(".ibox-content").slideToggle(200),i.toggleClass("fa-chevron-down").toggleClass("fa-chevron-up"),n.toggleClass("").toggleClass("border-bottom"),setTimeout(function(){n.resize(),n.find("[id^=map-]").resize()},50)}changeLocationsReportFilter(t){let n=null,i=t;const s="dd/MM/yyyy HH:mm",p=this.tracks.findIndex(l=>v(this.selectDate).format(s)===v(l.fecha).format(s));for(let l=p;l>=0;l--){const u=this.tracks[l];if("SALIDA"===u.evento.toUpperCase()){n=v(u.fecha);break}}return n&&(i=t.filter(l=>{const u=v(`${l.fecha}`);return v(u)>=v(this.selectDate).millisecond(0).seconds(0)&&v(u)<=v(n)})),n||(i=t.filter(l=>{const u=v(`${l.fecha}`);return v(u)>=v(this.selectDate).millisecond(0).seconds(0)})),i}openNoveltiesModal(t,n){t.length>0&&(this.novelties=t,this.bsModalRef=this.modalService.show(n))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(E),e.Y36(q.tT))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-change-location-report"]],inputs:{chassis:"chassis",selectDate:"selectDate",tracks:"tracks"},features:[e._Bn([E])],decls:32,vars:1,consts:[[1,"row"],[1,"col-lg-11"],[1,"ibox","change-location-report-table"],[1,"ibox-title","bg-primary",3,"click"],[1,"ibox-tools"],[1,"collapse-link"],[1,"fa","fa-chevron-down"],["hidden","",1,"ibox-content"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["changeLocationNoveltiesModal",""],[1,"notify-novelties",3,"click"],[1,"fa","fa-bell"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true",2,"font-size","125%"],[1,"modal-body"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.NdJ("click",function(r){return n.collapse(r)}),e.TgZ(4,"h5"),e._uU(5,"Cambios internos de ubicaci\xf3n"),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"a",5),e._UZ(8,"i",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"table",9),e.TgZ(12,"thead"),e.TgZ(13,"tr"),e.TgZ(14,"th"),e._uU(15,"#"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Fecha "),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Patio "),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Ubicaci\xf3n "),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Observaci\xf3n "),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Usuario "),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Novedades"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"tbody"),e.YNc(29,at,18,10,"tr",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(30,st,22,1,"ng-template",null,11,e.W1O),e.qZA()),2&t&&(e.xp6(29),e.Q6J("ngForOf",n.changeLocationsReport))},directives:[g.sg],pipes:[g.uU],styles:[".change-location-report-table[_ngcontent-%COMP%]{margin-bottom:0}.ibox-tools[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.notify-novelties[_ngcontent-%COMP%]{color:#337ab7;cursor:pointer}"]}),o})();function lt(o,a){if(1&o&&e._UZ(0,"img",29),2&o){const t=a.$implicit,n=e.oxw(2);e.Q6J("src",n.sanitizer.bypassSecurityTrustUrl(t.image),e.LSH)}}function pt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",21),e.TgZ(1,"div",22),e.TgZ(2,"b"),e._uU(3,"Fotos"),e.qZA(),e.TgZ(4,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().bsModalRef.hide()}),e.TgZ(5,"span",24),e._uU(6,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",25),e.YNc(8,lt,1,1,"img",26),e.qZA(),e.TgZ(9,"div",27),e.TgZ(10,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw().print()}),e._uU(11,"Imprimir"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(8),e.Q6J("ngForOf",t.photos)}}function gt(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",30),e.TgZ(2,"font",31),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td",30),e.TgZ(5,"font",31),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"td",30),e.TgZ(8,"font",31),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"td",30),e.TgZ(11,"font",31),e._uU(12),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.tracks[0].chasis),e.xp6(3),e.Oqu(t.tracks[0].descripcion),e.xp6(3),e.Oqu(t.tracks[0].motor),e.xp6(3),e.Oqu(t.tracks[0].color)}}function dt(o,a){if(1&o&&(e.TgZ(0,"button",37),e._UZ(1,"i",38),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("popover",t.observacion)}}function ut(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"Sin observaci\xf3n"),e.qZA())}function _t(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"a",28),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2),p=e.MAs(23);return s.openModal(p,r.id)}),e._UZ(9,"i",39),e._uU(10),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.tipo),e.xp6(2),e.Oqu(t.observacion),e.xp6(4),e.hij(" ",t.numeroFotos,"")}}function mt(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",40),e._UZ(2,"app-change-location-report",41),e.qZA(),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.Q6J("chassis",t.chasis)("selectDate",t.fecha)("tracks",n.tracks)}}function ht(o,a){if(1&o&&(e.TgZ(0,"table",32),e.TgZ(1,"thead"),e.TgZ(2,"tr"),e.TgZ(3,"th"),e._uU(4,"Fecha"),e.TgZ(5,"small"),e._uU(6," (dd/mm/yyyy)"),e.qZA(),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Usuario"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Evento"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Origen"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Destino"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Ubicaci\xf3n"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Gasolina"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Transportista"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Gu\xeda"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Chofer"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Kil\xf3metros"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Observaci\xf3n"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"No. Pedido"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"No. Factura"),e.qZA(),e.TgZ(33,"th"),e._uU(34,"No. B/L"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"tbody"),e.TgZ(36,"tr"),e.TgZ(37,"td"),e._uU(38),e.ALo(39,"date"),e.qZA(),e.TgZ(40,"td"),e._uU(41),e.qZA(),e.TgZ(42,"td"),e._uU(43),e.qZA(),e.TgZ(44,"td"),e._uU(45),e.qZA(),e.TgZ(46,"td"),e._uU(47),e.qZA(),e.TgZ(48,"td"),e._uU(49),e.qZA(),e.TgZ(50,"td"),e._uU(51),e.qZA(),e.TgZ(52,"td"),e._uU(53),e.qZA(),e.TgZ(54,"td"),e._uU(55),e.qZA(),e.TgZ(56,"td"),e._uU(57),e.qZA(),e.TgZ(58,"td"),e._uU(59),e.qZA(),e.TgZ(60,"td"),e.YNc(61,dt,2,1,"button",33),e.YNc(62,ut,2,0,"span",18),e.qZA(),e.TgZ(63,"td"),e._uU(64),e.qZA(),e.TgZ(65,"td"),e._uU(66),e.qZA(),e.TgZ(67,"td"),e._uU(68),e.qZA(),e.qZA(),e.TgZ(69,"tr"),e.TgZ(70,"td",34),e.TgZ(71,"table",32),e.TgZ(72,"thead"),e.TgZ(73,"tr",35),e.TgZ(74,"th"),e._uU(75,"Parte"),e.qZA(),e.TgZ(76,"th"),e._uU(77,"Da\xf1o"),e.qZA(),e.TgZ(78,"th"),e._uU(79,"Observaci\xf3n"),e.qZA(),e.TgZ(80,"th"),e._uU(81,"Fotos"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(82,"tbody"),e.YNc(83,_t,11,4,"tr",36),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(84,mt,3,3,"tr",18),e.qZA(),e.qZA()),2&o){const t=a.$implicit;e.xp6(38),e.Oqu(e.xi3(39,18,t.fecha,"dd/MM/yyyy HH:mm")),e.xp6(3),e.Oqu(t.usuario),e.xp6(2),e.Oqu(t.evento),e.xp6(2),e.Oqu(t.origen),e.xp6(2),e.Oqu(t.destino),e.xp6(2),e.Oqu(t.ubicacion),e.xp6(2),e.Oqu(t.combustible),e.xp6(2),e.Oqu(t.transportista),e.xp6(2),e.Oqu(t.guia),e.xp6(2),e.Oqu(t.chofer),e.xp6(2),e.Oqu(t.kilometraje),e.xp6(2),e.Q6J("ngIf",null!==t.observacion&&t.observacion.length>0),e.xp6(1),e.Q6J("ngIf",null==t.observacion),e.xp6(2),e.Oqu(t.pedido),e.xp6(2),e.Oqu(t.factura),e.xp6(2),e.Oqu(t.bl),e.xp6(15),e.Q6J("ngForOf",t.novedades),e.xp6(1),e.Q6J("ngIf","entrada"==t.evento&&"TOYOTA"==t.destino)}}let Zt=(()=>{class o{constructor(t,n,i,r,s,p){this.trackingService=t,this.functionsService=n,this.route=i,this.sanitizer=r,this.router=s,this.modalService=p,this.tracks=[]}ngOnInit(){this.route.queryParams.subscribe(t=>{const n=t.chasis;null!=n&&this.trackingService.getTracks(n,"web").then(i=>{this.tracks=i})})}openModal(t,n){this.trackingService.getPhotos(n).then(i=>{this.photos=i,this.bsModalRef=this.modalService.show(t)})}searchTracks(t,n){null===t||t.length<6?alert("Debe ingresar un m\xednimo 6 caracteres"):("web"===n&&this.trackingService.getTracks(t,n).then(i=>{i.length>0?this.tracks=i:alert("No se encontraron resultados")}),"excel"===n&&this.trackingService.getTracksExcel(t,n))}print(){const t=document.getElementsByClassName("modal fade in")[0].innerHTML,n=window.open("","_blank","top=0,left=0,height=100%,width=auto");n.document.open(),n.document.write(`\n      <html>\n        <head>\n        </head>\n    <body onload="window.print();window.close()">${t}</body>\n      </html>`),n.document.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b),e.Y36(C),e.Y36(d.gz),e.Y36(T.H7),e.Y36(d.F0),e.Y36(q.tT))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-search-tracking"]],features:[e._Bn([b,C])],decls:39,vars:2,consts:[[1,"wrapper","wrapper-content"],[1,"row"],[1,"col-lg-12"],[1,"ibox","float-e-margins"],[1,"ibox-title"],[1,"ibox-content"],[1,"col-sm-3"],["trackForm","ngForm"],[1,"input-group"],["type","text","placeholder","Ingrese al menos 6 n\xfameros","required","","minlength","4","maxlength","24",1,"input-sm","form-control"],["search",""],[1,"input-group-btn"],["type","submit",1,"btn","btn-sm","btn-primary",3,"click"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-file-excel-o"],["id","photosSection",1,"row"],["myModal",""],[1,"table"],[4,"ngIf"],[1,"table-responsive"],["class","table table-striped",4,"ngFor","ngForOf"],[1,"modal-header"],["align","center"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true",2,"font-size","125%"],[1,"modal-body"],["style","margin: auto; display: table; border: 1px solid black","width","400px","height","400px",3,"src",4,"ngFor","ngForOf"],[1,"modal-footer"],[3,"click"],["width","400px","height","400px",2,"margin","auto","display","table","border","1px solid black",3,"src"],["bgcolor","#009ACD"],["color","white"],[1,"table","table-striped"],["type","button","class","btn btn-default","placement","bottom","outsideClick","true",3,"popover",4,"ngIf"],["colspan","14"],[1,"warning"],[4,"ngFor","ngForOf"],["type","button","placement","bottom","outsideClick","true",1,"btn","btn-default",3,"popover"],[1,"fa","fa-eye","text-success"],[1,"fa","fa-camera"],["colspan","15"],[3,"chassis","selectDate","tracks"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h5"),e._uU(6,"Reporte Tracking"),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",1),e.TgZ(9,"div",6),e.TgZ(10,"form",null,7),e.TgZ(12,"div",8),e._UZ(13,"input",9,10),e.TgZ(15,"span",11),e.TgZ(16,"button",12),e.NdJ("click",function(){e.CHM(i);const s=e.MAs(14);return n.searchTracks(s.value,"web")}),e._uU(17," Buscar "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",6),e.TgZ(19,"button",13),e.NdJ("click",function(){e.CHM(i);const s=e.MAs(14);return n.searchTracks(s.value,"excel")}),e._UZ(20,"i",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",15),e.YNc(22,pt,12,1,"ng-template",null,16,e.W1O),e.qZA(),e.TgZ(24,"table",17),e.TgZ(25,"thead"),e.TgZ(26,"tr"),e.TgZ(27,"th"),e._uU(28,"Chasis"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Modelo"),e.qZA(),e.TgZ(31,"th"),e._uU(32,"Motor"),e.qZA(),e.TgZ(33,"th"),e._uU(34,"Color"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"tbody"),e.YNc(36,gt,13,4,"tr",18),e.qZA(),e.qZA(),e.TgZ(37,"div",19),e.YNc(38,ht,85,21,"table",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(36),e.Q6J("ngIf",n.tracks.length>0),e.xp6(2),e.Q6J("ngForOf",n.tracks))},directives:[c._Y,c.JL,c.F,g.O5,g.sg,U.k5,ct],pipes:[g.uU],styles:["td[_ngcontent-%COMP%]{padding-left:20px;color:#000}.chasis[_ngcontent-%COMP%]{font-size:20px;font-weight:bold}.infoVehicle[_ngcontent-%COMP%]{background-color:#ccc;padding:20px}.ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}label[_ngcontent-%COMP%]{cursor:pointer}#upload-photo[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:-1}#page[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0;margin:0}#page[_ngcontent-%COMP%]{border-collapse:collapse}"]}),o})(),ft=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],decls:2,vars:0,consts:[[2,"text-align","center"],["alt","image","src","assets/images/logoToyota.png","width","648px","height","140px",1,"img-circle"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.qZA())},encapsulation:2}),o})(),Tt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],decls:4,vars:0,consts:[[2,"text-align","center"],["alt","image","src","assets/images/logoToyota.png","width","648px","height","140px",1,"img-circle"],[1,"not-found-message"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"div",2),e._uU(3,"No se ha encontrado ninguna p\xe1gina disponible."),e.qZA(),e.qZA())},encapsulation:2}),o})();class W{constructor(a){this.notificar=!1,this.chasis=a.chasis,this.descripcion=a.descripcion,this.notificarEmail="NO",this.fuente="angular";const t=sessionStorage.getItem("user-name");this.usuario=t.toUpperCase(),this.nombreUsuario=sessionStorage.getItem("user-name-label"),"salida"===a.evento_anterior&&(this.origenId=a.origen_anterior_id,this.origen=a.origen_anterior,this.destinoId=a.destino_anterior_id,this.destino=a.destino_anterior,this.evento="entrada",this.guia=a.guia_anterior,this.chofer=a.chofer,this.transportista=a.transportista_anterior,"PROVEEDOR"===a.destino_anterior&&(this.origen=a.destino_anterior,this.destino=a.origen_anterior)),"entrada"===a.evento_anterior&&(this.origenId=a.destino_anterior_id,this.origen=a.destino_anterior,this.evento="salida")}}class bt{constructor(a){this.data=a}}function vt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"label",38),e._uU(2,"Destino"),e.qZA(),e.TgZ(3,"input",39),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().tracking.destino=i}),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.tracking.destino)}}function qt(o,a){if(1&o&&(e.TgZ(0,"option",42),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("ngValue",t.nombre),e.xp6(1),e.Oqu(t.nombre)}}function Ct(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"label",38),e._uU(2,"Destinos"),e.qZA(),e.TgZ(3,"select",40),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().tracking.destino=i}),e.YNc(4,qt,2,2,"option",41),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.tracking.destino),e.xp6(1),e.Q6J("ngForOf",t.destinations)}}function At(o,a){if(1&o&&(e.TgZ(0,"option",45),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.codigo),e.xp6(1),e.Oqu(t.codigo)}}function Mt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"label",43),e._uU(2,"Ubicaci\xf3n"),e.qZA(),e.TgZ(3,"select",44),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().tracking.ubicacion=i}),e.YNc(4,At,2,2,"option",21),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.tracking.ubicacion),e.xp6(1),e.Q6J("ngForOf",t.locations)}}function xt(o,a){if(1&o&&(e.TgZ(0,"option",45),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function kt(o,a){if(1&o&&(e.TgZ(0,"option",45),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Ot(o,a){if(1&o&&(e.TgZ(0,"option",45),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.Oqu(t.nombre)}}function yt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",18),e.TgZ(1,"label",46),e._uU(2,"Transportista"),e.qZA(),e.TgZ(3,"select",47),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().tracking.transportista=i}),e.YNc(4,Ot,2,2,"option",21),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.tracking.transportista),e.xp6(1),e.Q6J("ngForOf",t.carriers)}}function Ut(o,a){if(1&o&&(e.TgZ(0,"option",45),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.Oqu(t.nombre)}}function Pt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",18),e.TgZ(1,"label",46),e._uU(2,"Transportista"),e.qZA(),e.TgZ(3,"select",48),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().tracking.transportista=i}),e.YNc(4,Ut,2,2,"option",21),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.tracking.transportista),e.xp6(1),e.Q6J("ngForOf",t.carriers)}}function wt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"div",25),e.TgZ(2,"label",28),e._uU(3,"Chofer"),e.qZA(),e.TgZ(4,"input",49),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().tracking.chofer=i}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.tracking.chofer)}}function Ft(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"div",25),e.TgZ(2,"label",28),e._uU(3,"Chofer"),e.qZA(),e.TgZ(4,"input",50,51),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().tracking.chofer=i}),e.qZA(),e.TgZ(6,"div",52),e._uU(7," Campo requerido "),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.MAs(5),n=e.oxw();e.xp6(4),e.Q6J("ngModel",n.tracking.chofer),e.xp6(2),e.Q6J("hidden",t.valid||t.pristine)}}function Rt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"div",25),e.TgZ(2,"label",28),e._uU(3,"Gu\xeda"),e.qZA(),e.TgZ(4,"input",53),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().tracking.guia=i}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.tracking.guia)}}function Jt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"div",25),e.TgZ(2,"label",28),e._uU(3,"Gu\xeda"),e.qZA(),e.TgZ(4,"input",54,55),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().tracking.guia=i}),e.qZA(),e.TgZ(6,"div",52),e._uU(7," Campo requerido "),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.MAs(5),n=e.oxw();e.xp6(4),e.Q6J("ngModel",n.tracking.guia),e.xp6(2),e.Q6J("hidden",t.valid||t.pristine)}}function Nt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"a",30),e.NdJ("click",function(){const r=e.CHM(t).index;return e.oxw().deleteDamage(r)}),e._uU(8,"Eliminar "),e._UZ(9,"i",56),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(2),e.Oqu(t.parte),e.xp6(2),e.Oqu(t.tipo),e.xp6(2),e.Oqu(t.observacion)}}function Dt(o,a){1&o&&(e.TgZ(0,"div",11),e._UZ(1,"input",83),e._uU(2," Frontal "),e.qZA())}function St(o,a){1&o&&(e.TgZ(0,"div",11),e._UZ(1,"input",84),e._uU(2," Derecha "),e.qZA())}function It(o,a){1&o&&(e.TgZ(0,"div",11),e._UZ(1,"input",85),e._uU(2," Izquierda "),e.qZA())}function Et(o,a){1&o&&(e.TgZ(0,"div",11),e._UZ(1,"input",86),e._uU(2," Posterior "),e.qZA())}function Bt(o,a){if(1&o&&e._UZ(0,"img",87),2&o){const t=e.oxw(2);e.MGl("src","",t.noveltiesImageBaseUrl+t.sidesFrontal[0].imagen,".jpg",e.LSH)}}function jt(o,a){if(1&o&&e._UZ(0,"img",88),2&o){const t=e.oxw(2);e.MGl("src","",t.noveltiesImageBaseUrl+t.sidesDerecha[0].imagen,".jpg",e.LSH)}}function Lt(o,a){if(1&o&&e._UZ(0,"img",89),2&o){const t=e.oxw(2);e.MGl("src","",t.noveltiesImageBaseUrl+t.sidesIzquierda[0].imagen,".jpg",e.LSH)}}function Qt(o,a){if(1&o&&e._UZ(0,"img",90),2&o){const t=e.oxw(2);e.MGl("src","",t.noveltiesImageBaseUrl+t.sidesPosterior[0].imagen,".jpg",e.LSH)}}function Yt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"img",93),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).selectedPart(i.parte_id,i.nombre)})("mouseover",function(){return e.CHM(t),e.oxw(3).over()}),e.qZA()}}function $t(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div"),e.YNc(2,Yt,1,0,"img",91),e.TgZ(3,"area",92),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).selectedPart(r.parte_id,r.nombre)}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(2),e.Q6J("ngIf","INTERIOR"==t.nombre),e.xp6(1),e.hYB("coords","",t.posicion_x,",",t.posicion_y,",30"),e.s9C("title",t.nombre)}}function Ht(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"area",92),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).selectedPart(r.parte_id,r.nombre)}),e.qZA()}if(2&o){const t=a.$implicit;e.hYB("coords","",t.posicion_x,",",t.posicion_y,",30"),e.s9C("title",t.nombre)}}function zt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"area",92),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).selectedPart(r.parte_id,r.nombre)}),e.qZA()}if(2&o){const t=a.$implicit;e.hYB("coords","",t.posicion_x,",",t.posicion_y,",30"),e.s9C("title",t.nombre)}}function Vt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"area",92),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).selectedPart(r.parte_id,r.nombre)}),e.qZA()}if(2&o){const t=a.$implicit;e.hYB("coords","",t.posicion_x,",",t.posicion_y,",30"),e.s9C("title",t.nombre)}}function Gt(o,a){if(1&o&&(e.TgZ(0,"option",45),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Xt(o,a){if(1&o&&(e.TgZ(0,"div",94),e._UZ(1,"img",95),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.s9C("src",t.data,e.LSH)}}function Wt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",57),e.TgZ(1,"div",2),e.TgZ(2,"b"),e._uU(3,"A\xf1adir novedad"),e.qZA(),e.TgZ(4,"button",58),e.NdJ("click",function(){return e.CHM(t),e.oxw().bsModalRef.hide()}),e.TgZ(5,"span",59),e._uU(6,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",60),e.TgZ(8,"div",10),e.YNc(9,Dt,3,0,"div",17),e.YNc(10,St,3,0,"div",17),e.YNc(11,It,3,0,"div",17),e.YNc(12,Et,3,0,"div",17),e.qZA(),e._UZ(13,"br"),e._UZ(14,"br"),e.TgZ(15,"div",61),e.YNc(16,Bt,1,1,"img",62),e.YNc(17,jt,1,1,"img",63),e.YNc(18,Lt,1,1,"img",64),e.YNc(19,Qt,1,1,"img",65),e.TgZ(20,"map",66),e.YNc(21,$t,4,4,"div",34),e.qZA(),e.TgZ(22,"map",67),e.YNc(23,Ht,1,3,"area",68),e.qZA(),e.TgZ(24,"map",69),e.YNc(25,zt,1,3,"area",68),e.qZA(),e.TgZ(26,"map",70),e.YNc(27,Vt,1,3,"area",68),e.qZA(),e.qZA(),e.TgZ(28,"div",10),e.TgZ(29,"div",25),e.TgZ(30,"div",2),e.TgZ(31,"font",71),e.TgZ(32,"b"),e.TgZ(33,"h3"),e._uU(34),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(35,"br"),e.TgZ(36,"div",10),e.TgZ(37,"div",11),e._uU(38," Tipo "),e.qZA(),e.TgZ(39,"div",1),e.TgZ(40,"select",72),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().damage.tipo=i}),e.YNc(41,Gt,2,2,"option",21),e.qZA(),e.qZA(),e.qZA(),e._UZ(42,"br"),e._UZ(43,"br"),e.TgZ(44,"div",10),e.TgZ(45,"div",11),e._uU(46," Observaci\xf3n "),e.qZA(),e.TgZ(47,"div",1),e.TgZ(48,"input",73),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().damage.observacion=i}),e.qZA(),e.qZA(),e.qZA(),e._UZ(49,"br"),e._UZ(50,"br"),e.TgZ(51,"div",10),e.TgZ(52,"div",74),e.TgZ(53,"label",75),e.TgZ(54,"a",76),e._uU(55,"A\xf1adir Foto "),e._UZ(56,"i",77),e.qZA(),e.qZA(),e.TgZ(57,"input",78),e.NdJ("change",function(i){return e.CHM(t),e.oxw().fileChangeEvent(i)}),e.qZA(),e.qZA(),e.TgZ(58,"div",79),e.TgZ(59,"a",80),e.NdJ("click",function(){return e.CHM(t),e.oxw().addDamage()}),e._uU(60,"A\xf1adir novedad"),e.qZA(),e.qZA(),e.qZA(),e._UZ(61,"br"),e.qZA(),e.TgZ(62,"div",81),e.YNc(63,Xt,2,1,"div",82),e.qZA()}if(2&o){const t=e.oxw();e.xp6(9),e.Q6J("ngIf",null!=t.sidesFrontal&&t.sidesFrontal.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.sidesDerecha&&t.sidesDerecha.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.sidesIzquierda&&t.sidesIzquierda.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.sidesPosterior&&t.sidesPosterior.length>0),e.xp6(4),e.Q6J("ngIf",null!=t.sidesFrontal&&t.sidesFrontal.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.sidesDerecha&&t.sidesDerecha.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.sidesIzquierda&&t.sidesIzquierda.length>0),e.xp6(1),e.Q6J("ngIf",null!=t.sidesPosterior&&t.sidesPosterior.length>0),e.xp6(2),e.Q6J("ngForOf",t.sidesFrontal),e.xp6(2),e.Q6J("ngForOf",t.sidesDerecha),e.xp6(2),e.Q6J("ngForOf",t.sidesIzquierda),e.xp6(2),e.Q6J("ngForOf",t.sidesPosterior),e.xp6(7),e.Oqu(t.damage.parte),e.xp6(6),e.Q6J("ngModel",t.damage.tipo),e.xp6(1),e.Q6J("ngForOf",t.typeDamages),e.xp6(7),e.Q6J("ngModel",t.damage.observacion),e.xp6(15),e.Q6J("ngForOf",t.photos)}}let Kt=(()=>{class o{constructor(t,n,i,r,s){this.vehicleService=t,this.trackingService=n,this.route=i,this.router=r,this.modalService=s,this.filesToUpload=[],this.fuels=["1/2","1/4","1/8","Vac\xedo"],this.mileages=["0 km","1 km","2 km","3 km","4 km","5 km","6 km","7 km","8 km","9 km","10 km","11 km","12 km","13 km","14 km","15 km","16 km","17 km","18 km","19 km","20 km","21 km","22 km","23 km","24 km","25 km","26 km","27 km","28 km","29 km","30 km","mayor a 30 km"],this.typeDamages=["Desconche","Faltante","Golpe","Raspado","Raya","Roto","Sucio","Trizado","Picado"],this.damages=[],this.submitted=!1,this.photos=[],this.reA=/[^a-zA-Z]/g,this.reN=/[^0-9]/g,this.noveltiesImageBaseUrl=__noveltiesImageBaseUrl}createTrack(){confirm("Finalizar tracking?")&&(this.tracking.notificarEmail=!0===this.tracking.notificar?"SI":"NO",console.log("Create track"),console.log(this.tracking),this.trackingService.create(this.tracking).then(()=>{this.submitted=!0,alert("Tracking realizado"),this.router.navigate(["search-vehicle"])}).catch(t=>{alert("Ha ocurrido un error por favor vuelva a intentarlo. "+t)}))}getVehicle(t){this.vehicleService.getVehicle(t).then(n=>{this.vehicle=n,this.destinations=n.destinos_siguiente_tracking,null!=this.destinations&&this.destinations.sort((r,s)=>r.nombre<s.nombre?-1:r.nombre>s.nombre?1:0),this.carriers=n.transportistas,null!=this.carriers&&this.carriers.sort((r,s)=>r.nombre<s.nombre?-1:r.nombre>s.nombre?1:0);const i=n.ubicaciones.sort((r,s)=>{const p=r.codigo.replace(this.reA,""),l=s.codigo.replace(this.reA,"");if(p===l){const u=parseInt(r.codigo.replace(this.reN,""),10),Z=parseInt(s.codigo.replace(this.reN,""),10);return u===Z?0:u>Z?1:-1}return p>l?1:-1});if(this.locations=i,this.sides=n.vistas,this.sides.length>0){const r=this.sides.find(u=>"frontal"in u),s=this.sides.find(u=>"derecha"in u),p=this.sides.find(u=>"izquierda"in u),l=this.sides.find(u=>"posterior"in u);this.sidesFrontal=void 0!==r?r.frontal:[],this.sidesDerecha=void 0!==s?s.derecha:[],this.sidesIzquierda=void 0!==p?p.izquierda:[],this.sidesPosterior=void 0!==l?l.posterior:[]}this.tracking=new W(n),this.loadGuide(t)})}getVehicleAccessoriesDocument(){const n=this.vehicleService.getVehicleAccessoriesDocumentUrl(this.route.snapshot.params.chasis);window.open(n,"_blank")}addDamage(){if(0!==this.damage.parteId){const t=new P(this.damage.parteId,this.damage.parte,this.damage.tipo,this.damage.observacion,this.photos);this.damages.push(t),this.tracking.novedades=this.damages,this.photos=[],this.bsModalRef.hide()}else alert("Seleccione una parte del veh\xedculo")}selectedPart(t,n){this.damage.parteId=t,this.damage.parte=n,$("#circlePart").hide()}over(){$("#circlePart").hide()}openModal(t){this.photos=[],this.damage=new P(0,"","Desconche",""),$.getScript("assets/damage.js"),this.bsModalRef=this.modalService.show(t)}deleteDamage(t){this.damages.splice(t,1)}ngOnInit(){this.vehicle=new z,this.tracking=new W(new z),this.getVehicle(this.route.snapshot.params.chasis),this.damage=new P(0,"","Desconche","")}fileChangeEvent(t){this.filesToUpload=t.target.files;const n=this.filesToUpload;new Promise(r=>{const s=new FileReader;s.readAsDataURL(n[0]),s.onload=function(){const p=new bt(s.result);r(p)}}).then(r=>{this.photos.push(r)})}loadGuide(t){const n=this.tracking;"salida"===n.evento&&"TOYOTA"===n.origen&&this.trackingService.getGuide(t).then(i=>this.handleGetGuideResponse(i))}handleGetGuideResponse(t){this.isGuideEmpty(t)||this.updateTrackingWithGuide(t)}isGuideEmpty(t){for(const n in t)if(null!==t[n]&&""!==t[n])return!1;return!0}updateTrackingWithGuide(t){const n=this.tracking;n.destino=t.punto_entrega,n.combustible=t.combustible,n.kilometraje=t.kilometraje,n.transportista=t.transportista,n.chofer=t.conductor,n.guia=t.numero_fiscal}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k),e.Y36(b),e.Y36(d.gz),e.Y36(d.F0),e.Y36(q.tT))},o.\u0275cmp=e.Xpm({type:o,selectors:[["track-form"]],features:[e._Bn([k,b,C])],decls:96,vars:22,consts:[[1,"container","infoVehicle"],[1,"col-lg-9"],["align","center"],[1,"fa","fa-car","fa-3x"],["align","center",1,"chasis"],[1,"col-lg-3","text-right"],[1,"btn","btn-success",3,"click"],[1,"container"],[3,"ngSubmit"],["trackForm","ngForm"],[1,"form-group"],[1,"col-lg-3"],["for","evento"],["type","text","id","evento","disabled","","name","evento",1,"form-control",3,"ngModel","ngModelChange"],["for","origen"],["type","text","id","origen","disabled","","name","origen",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],["class","col-lg-3",4,"ngIf"],[1,"col-lg-4"],["for","fuel"],["id","fuel","required","","name","combustible",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","mileage"],["id","mileage","required","","name","kilometraje",1,"form-control",3,"ngModel","ngModelChange"],["class","col-lg-4",4,"ngIf"],[1,"col-lg-12"],["for","observacion"],["type","text","id","observacion","name","observacion",1,"form-control",3,"ngModel","ngModelChange"],["for","guia"],["type","checkbox","id","notificar","name","notificar",3,"ngModel","ngModelChange"],[3,"click"],[1,"fa","fa-plus-circle"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"row"],["myModal",""],["type","submit",1,"btn","btn-success",3,"disabled"],["for","destino"],["type","text","id","destino","disabled","","name","destino",1,"form-control",3,"ngModel","ngModelChange"],["id","destino","required","","name","destino",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["for","location"],["id","location","required","","name","ubicacion",1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],["for","carrier"],["id","carrier","required","","disabled","","name","transportista",1,"form-control",3,"ngModel","ngModelChange"],["id","carrier","required","","name","transportista",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","chofer","name","chofer","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","chofer","name","chofer","required","",1,"form-control",3,"ngModel","ngModelChange"],["chofer","ngModel"],[1,"alert","alert-danger",3,"hidden"],["type","text","id","guia","name","guia","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","guia","name","guia","required","",1,"form-control",3,"ngModel","ngModelChange"],["guia","ngModel"],[1,"fa","fa-trash"],[1,"modal-header"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true",2,"font-size","125%"],[1,"modal-body"],["id","image_container",2,"width","2260px"],["id","viewFront","class","image1","width","560px","height","280px","usemap","#automapFront",3,"src",4,"ngIf"],["id","viewRight","alt","image","width","560px","height","280px","usemap","#automapRight","style","display:none",3,"src",4,"ngIf"],["id","viewLeft","alt","image","width","560px","height","280px","usemap","#automapLeft","style","display:none",3,"src",4,"ngIf"],["id","viewBack","alt","image","width","560px","height","280px","usemap","#automapBack","style","display:none",3,"src",4,"ngIf"],["name","automapFront","id","automapFront"],["name","automapRight","id","automapRight"],["shape","circle",3,"coords","title","click",4,"ngFor","ngForOf"],["name","automapLeft","id","automapLeft"],["name","automapBack","id","automapBack"],["color","black"],["id","typeDamage","required","","name","typeDamage",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","damageObservacion","name","damageObservacion",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-lg-6","text-left"],["for","upload-photo","title","A\xf1adir fotograf\xeda"],[1,"btn","btn-primary"],[1,"fa","fa-camera"],["type","file","name","photo","id","upload-photo",3,"change"],[1,"col-lg-6","text-right"],[1,"btn","btn-primary",3,"click"],[1,"modal-footer"],["style","width:160px;height:160px;background-color: lightblue;float:left;",4,"ngFor","ngForOf"],["type","radio","name","group2","value","Water","onclick","front();","checked","checked"],["type","radio","name","group2","value","Water","onclick","right();"],["type","radio","name","group2","value","Water","onclick","left();"],["type","radio","name","group2","value","Water","onclick","back();"],["id","viewFront","width","560px","height","280px","usemap","#automapFront",1,"image1",3,"src"],["id","viewRight","alt","image","width","560px","height","280px","usemap","#automapRight",2,"display","none",3,"src"],["id","viewLeft","alt","image","width","560px","height","280px","usemap","#automapLeft",2,"display","none",3,"src"],["id","viewBack","alt","image","width","560px","height","280px","usemap","#automapBack",2,"display","none",3,"src"],["id","interiorImage","src","/assets/images/insideCar.png","width","50","height","50","style","position:absolute;top:90px;left:490px;",3,"click","mouseover",4,"ngIf"],["shape","circle",3,"coords","title","click"],["id","interiorImage","src","/assets/images/insideCar.png","width","50","height","50",2,"position","absolute","top","90px","left","490px",3,"click","mouseover"],[2,"width","160px","height","160px","background-color","lightblue","float","left"],["width","160px","height","160px",3,"src"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"table"),e.TgZ(3,"tr"),e.TgZ(4,"td",2),e._UZ(5,"i",3),e.qZA(),e.TgZ(6,"td",4),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"tr"),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",5),e.TgZ(14,"button",6),e.NdJ("click",function(){return n.getVehicleAccessoriesDocument()}),e._uU(15,"Gu\xeda de accesorios"),e.qZA(),e.qZA(),e.qZA(),e._UZ(16,"br"),e.TgZ(17,"div",7),e.TgZ(18,"form",8,9),e.NdJ("ngSubmit",function(){return n.createTrack()}),e.TgZ(20,"div",10),e.TgZ(21,"div",11),e.TgZ(22,"label",12),e._uU(23,"Evento"),e.qZA(),e.TgZ(24,"input",13),e.NdJ("ngModelChange",function(s){return n.tracking.evento=s}),e.qZA(),e.qZA(),e.TgZ(25,"div",11),e.TgZ(26,"label",14),e._uU(27,"Origen"),e.qZA(),e.TgZ(28,"input",15),e.NdJ("ngModelChange",function(s){return n.tracking.origen=s}),e.qZA(),e.qZA(),e.TgZ(29,"div",11),e.YNc(30,vt,4,1,"div",16),e.YNc(31,Ct,5,2,"div",16),e.qZA(),e.YNc(32,Mt,5,2,"div",17),e.qZA(),e.TgZ(33,"div",10),e.TgZ(34,"div",18),e.TgZ(35,"label",19),e._uU(36,"Combustible"),e.qZA(),e.TgZ(37,"select",20),e.NdJ("ngModelChange",function(s){return n.tracking.combustible=s}),e.YNc(38,xt,2,2,"option",21),e.qZA(),e.qZA(),e.TgZ(39,"div",18),e.TgZ(40,"label",22),e._uU(41,"Kilometraje"),e.qZA(),e.TgZ(42,"select",23),e.NdJ("ngModelChange",function(s){return n.tracking.kilometraje=s}),e.YNc(43,kt,2,2,"option",21),e.qZA(),e.qZA(),e.YNc(44,yt,5,2,"div",24),e.YNc(45,Pt,5,2,"div",24),e.YNc(46,wt,5,1,"div",16),e.YNc(47,Ft,8,2,"div",16),e.qZA(),e.YNc(48,Rt,5,1,"div",16),e.YNc(49,Jt,8,2,"div",16),e.TgZ(50,"div",10),e.TgZ(51,"div",25),e.TgZ(52,"label",26),e._uU(53,"Observaci\xf3n"),e.qZA(),e.TgZ(54,"input",27),e.NdJ("ngModelChange",function(s){return n.tracking.observacion=s}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(55,"div",10),e.TgZ(56,"div",25),e.TgZ(57,"label",28),e._uU(58,"Notificar"),e.qZA(),e.TgZ(59,"input",29),e.NdJ("ngModelChange",function(s){return n.tracking.notificar=s}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(60,"div",10),e.TgZ(61,"div",25),e._UZ(62,"hr"),e.qZA(),e.qZA(),e.TgZ(63,"div",10),e.TgZ(64,"div",25),e.TgZ(65,"a",30),e.NdJ("click",function(){e.CHM(i);const s=e.MAs(85);return n.openModal(s)}),e._uU(66,"A\xf1adir novedad "),e._UZ(67,"i",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(68,"div",10),e.TgZ(69,"div",25),e.TgZ(70,"div",32),e.TgZ(71,"table",33),e.TgZ(72,"thead"),e.TgZ(73,"tr"),e.TgZ(74,"th"),e._uU(75,"Parte "),e.qZA(),e.TgZ(76,"th"),e._uU(77,"Tipo "),e.qZA(),e.TgZ(78,"th"),e._uU(79,"Observaci\xf3n "),e.qZA(),e._UZ(80,"th"),e.qZA(),e.qZA(),e.TgZ(81,"tbody"),e.YNc(82,Nt,10,3,"tr",34),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(83,"div",35),e.YNc(84,Wt,64,17,"ng-template",null,36,e.W1O),e.qZA(),e._UZ(86,"br"),e._UZ(87,"br"),e.TgZ(88,"button",37),e._uU(89,"Finalizar Tracking"),e.qZA(),e._UZ(90,"br"),e._UZ(91,"br"),e._UZ(92,"br"),e._UZ(93,"br"),e._UZ(94,"br"),e._UZ(95,"br"),e.qZA(),e.qZA()}if(2&t){const i=e.MAs(19);e.xp6(7),e.Oqu(n.tracking.chasis),e.xp6(3),e.Oqu(n.vehicle.color),e.xp6(2),e.Oqu(n.vehicle.descripcion),e.xp6(12),e.Q6J("ngModel",n.tracking.evento),e.xp6(4),e.Q6J("ngModel",n.tracking.origen),e.xp6(2),e.Q6J("ngIf","entrada"==n.tracking.evento),e.xp6(1),e.Q6J("ngIf","salida"==n.tracking.evento),e.xp6(1),e.Q6J("ngIf","entrada"==n.tracking.evento&&("TOYOTA"==n.tracking.destino||"DEPOSITO TABACARCEN"==n.tracking.destino)),e.xp6(5),e.Q6J("ngModel",n.tracking.combustible),e.xp6(1),e.Q6J("ngForOf",n.fuels),e.xp6(4),e.Q6J("ngModel",n.tracking.kilometraje),e.xp6(1),e.Q6J("ngForOf",n.mileages),e.xp6(1),e.Q6J("ngIf","entrada"==n.tracking.evento),e.xp6(1),e.Q6J("ngIf","salida"==n.tracking.evento),e.xp6(1),e.Q6J("ngIf","entrada"==n.tracking.evento),e.xp6(1),e.Q6J("ngIf","salida"==n.tracking.evento),e.xp6(1),e.Q6J("ngIf","entrada"==n.tracking.evento),e.xp6(1),e.Q6J("ngIf","salida"==n.tracking.evento),e.xp6(5),e.Q6J("ngModel",n.tracking.observacion),e.xp6(5),e.Q6J("ngModel",n.tracking.notificar),e.xp6(23),e.Q6J("ngForOf",n.tracking.novedades),e.xp6(6),e.Q6J("disabled",!i.form.valid)}},directives:[c._Y,c.JL,c.F,c.Fj,c.JJ,c.On,g.O5,c.EJ,c.Q7,g.sg,c.Wl,c.YN,c.Kr],styles:["td[_ngcontent-%COMP%]{padding-left:20px;color:#000}.chasis[_ngcontent-%COMP%]{font-size:20px;font-weight:bold}.infoVehicle[_ngcontent-%COMP%]{background-color:#ccc;padding:20px}.ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}label[_ngcontent-%COMP%]{cursor:pointer}#upload-photo[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:-1}#page[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0;margin:0}#page[_ngcontent-%COMP%]{border-collapse:collapse}"]}),o})();function en(o,a){if(1&o&&e._UZ(0,"img",2),2&o){const t=a.$implicit,n=e.oxw();e.Q6J("src",n.sanitizer.bypassSecurityTrustResourceUrl(t.image),e.LSH)}}let tn=(()=>{class o{constructor(t,n,i,r){this.trackingService=t,this.route=n,this.sanitizer=i,this.router=r}ngOnInit(){const t=this.route.snapshot.params.novedadId;this.previousPage=this.route.snapshot.params.origin,console.log(this.previousPage),this.trackingService.getPhotos(t).then(n=>{this.photos=n})}goBack(){"damageReport"===this.previousPage?window.history.back():this.router.navigate(["search-tracking"],{queryParams:{chasis:this.route.snapshot.params.chasis}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b),e.Y36(d.gz),e.Y36(T.H7),e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-photos"]],features:[e._Bn([b])],decls:6,vars:1,consts:[[3,"click"],["width","400px","height","400px",3,"src",4,"ngFor","ngForOf"],["width","400px","height","400px",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"a",0),e.NdJ("click",function(){return n.goBack()}),e._uU(1," Atr\xe1s"),e.qZA(),e._UZ(2,"br"),e._UZ(3,"br"),e._UZ(4,"br"),e.YNc(5,en,1,1,"img",1)),2&t&&(e.xp6(5),e.Q6J("ngForOf",n.photos))},directives:[g.sg],encapsulation:2}),o})();class K{}class w{}class j{}let F=(()=>{class o{constructor(t){this.http=t,this.destinationsUrl=__apiBaseUrl+"/destinations"}getDestinations(t){return this.http.get(`${this.destinationsUrl}?origin=${t}`,{responseType:"json"}).toPromise().then(i=>i.places).catch(this.handleError)}handleError(t){return console.error("An error occurred",t),Promise.reject(t.error.message||t.message||t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),L=(()=>{class o{constructor(t){this.http=t,this.headers=new m.WM({"Content-Type":"application/json"}),this.originsUrl=__apiBaseUrl+"/origins"}getOrigins(t){return this.http.get(`${this.originsUrl}?destination=${t}`).toPromise().then(i=>i.places).catch(this.handleError)}handleError(t){return console.error("An error occurred",t),Promise.reject(t.error.message||t.message||t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();function nn(o,a){if(1&o&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.Oqu(t.nombre)}}function on(o,a){if(1&o&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function an(o,a){if(1&o&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.Oqu(t.nombre)}}function rn(o,a){if(1&o&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.descripcion),e.xp6(1),e.Oqu(t.descripcion)}}function sn(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(49).clearDate()}),e._UZ(1,"i",37),e.qZA()}}function cn(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(60).clearDate()}),e._UZ(1,"i",37),e.qZA()}}function ln(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.qZA(),e.TgZ(28,"td"),e._uU(29),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.qZA(),e.TgZ(32,"td"),e._uU(33),e.qZA(),e.qZA()),2&o){const t=a.$implicit,n=a.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.chasis),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(t.motor),e.xp6(2),e.Oqu(t.color),e.xp6(2),e.Oqu(e.xi3(13,16,t.fecha,"dd/MM/yyyy HH:mm")),e.xp6(3),e.Oqu(t.usuario),e.xp6(2),e.Oqu(t.observacion),e.xp6(2),e.Oqu(t.origen_anterior),e.xp6(2),e.Oqu(t.destino_anterior),e.xp6(2),e.Oqu(t.transportista_anterior),e.xp6(2),e.Oqu(t.guia_anterior),e.xp6(2),e.Oqu(t.chofer),e.xp6(2),e.Oqu(t.pedido),e.xp6(2),e.Oqu(t.factura),e.xp6(2),e.Oqu(t.bl)}}let pn=(()=>{class o{constructor(t,n,i,r,s){this.trackingService=t,this.functionsService=n,this.destinationService=i,this.originService=r,this.router=s,this.numberVehicles=0,this.myDatePickerOptions={dateFormat:"dd/mm/yyyy",dateRange:!1,showFooterToday:!0}}ngOnInit(){this.inspectionPointReport=new j,this.trackingService.getOrigins().then(t=>{this.origins=t;const n=new O;n.nombre="CONCESIONARIO",this.origins.push(n);const i=new O;i.nombre="AUTOCONSUMO",this.origins.push(i);const r=new O;r.nombre="EMPLEADO",this.origins.push(r),this.origins=this.functionsService.sortObjectArray(this.origins);const s=new O;s.nombre="TODOS",this.origins.unshift(s)}),this.events=["entrada","salida"],this.trackingService.getModels().then(t=>{this.models=t,this.models=this.functionsService.sortModelsObjectArray(this.models);const n=new K;n.descripcion="TODOS",this.models.unshift(n)}),this.placeLabel="Destino:"}search(){this.tracks=null,this.trackingService.inspectionPointReport(this.inspectionPointReport.inspectionPoint,this.inspectionPointReport.event,this.inspectionPointReport.place,this.inspectionPointReport.model,this.inspectionPointReport.from.singleDate.epoc,this.inspectionPointReport.to.singleDate.epoc).then(t=>{this.tracks=t,this.numberVehicles=t.length})}generateExcel(){this.trackingService.inspectionPointReportExcel(this.inspectionPointReport.inspectionPoint,this.inspectionPointReport.event,this.inspectionPointReport.place,this.inspectionPointReport.model,this.inspectionPointReport.from.singleDate.epoc,this.inspectionPointReport.to.singleDate.epoc)}setDestinations(){"entrada"===this.inspectionPointReport.event&&(this.placeLabel="Origen:",this.originService.getOrigins(this.inspectionPointReport.inspectionPoint).then(t=>{this.places=t,this.places=this.functionsService.sortObjectArray(this.places);const n=new w;n.nombre="TODOS",this.places.unshift(n)})),"salida"===this.inspectionPointReport.event&&(this.placeLabel="Destino:",this.destinationService.getDestinations(this.inspectionPointReport.inspectionPoint).then(t=>{if(this.places=t,"TOYOTA"===this.inspectionPointReport.inspectionPoint){const i=new w;i.nombre="CONCESIONARIO",this.places.push(i)}this.places=this.functionsService.sortObjectArray(this.places);const n=new w;n.nombre="TODOS",this.places.unshift(n)}))}resetOptions(){this.inspectionPointReport.event=null,this.inspectionPointReport.place=null,this.inspectionPointReport.model=null}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b),e.Y36(C),e.Y36(F),e.Y36(L),e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-inspection-point-report"]],features:[e._Bn([b,C,F,L])],decls:113,vars:20,consts:[[1,"wrapper","wrapper-content"],[1,"row"],[1,"col-lg-12"],[1,"ibox","float-e-margins"],[1,"ibox-title"],[1,"col-sm-10"],[1,"col-sm-2",2,"text-align","right"],["color","red"],[3,"ngSubmit"],["trackForm","ngForm"],[1,"ibox-content"],[1,"col-sm-3"],[1,"input-group"],["for","evento"],["id","origin","required","","name","inspectionPoint",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-2"],["id","origin","required","","name","event",1,"form-control",3,"ngModel","ngModelChange","change"],["id","place","name","place",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-4"],["id","origin","name","model",1,"form-control",3,"ngModel","ngModelChange"],["name","dateFrom","placeholder","Ingrese una fecha","angular-mydatepicker","","required","",1,"form-control",3,"ngModel","options","locale","ngModelChange"],["dp_from","angular-mydatepicker"],[1,"input-group-btn"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fa","fa-calendar-o"],["name","dateTo","placeholder","Ingrese una fecha","angular-mydatepicker","","required","",1,"form-control",3,"ngModel","options","locale","ngModelChange"],["dp_to","angular-mydatepicker"],[1,"col-sm-6"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-file-excel-o"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[3,"value"],[1,"fa","fa-close"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",1),e.TgZ(6,"div",5),e.TgZ(7,"h5"),e._uU(8,"Reporte Punto de inspecci\xf3n"),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"h5"),e._uU(11,"Veh\xedculos: "),e.TgZ(12,"font",7),e._uU(13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"form",8,9),e.NdJ("ngSubmit",function(){return n.search()}),e.TgZ(16,"div",10),e.TgZ(17,"div",1),e.TgZ(18,"div",11),e.TgZ(19,"div",12),e.TgZ(20,"label",13),e._uU(21,"Punto de inspecci\xf3n:"),e.qZA(),e.TgZ(22,"select",14),e.NdJ("ngModelChange",function(s){return n.inspectionPointReport.inspectionPoint=s})("change",function(){return n.resetOptions()}),e.YNc(23,nn,2,2,"option",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",16),e.TgZ(25,"div",12),e.TgZ(26,"label",13),e._uU(27,"Evento:"),e.qZA(),e.TgZ(28,"select",17),e.NdJ("ngModelChange",function(s){return n.inspectionPointReport.event=s})("change",function(){return n.setDestinations()}),e.YNc(29,on,2,2,"option",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",11),e.TgZ(31,"div",12),e.TgZ(32,"label",13),e._uU(33),e.qZA(),e.TgZ(34,"select",18),e.NdJ("ngModelChange",function(s){return n.inspectionPointReport.place=s}),e.YNc(35,an,2,2,"option",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",19),e.TgZ(37,"div",12),e.TgZ(38,"label",13),e._uU(39,"Modelo:"),e.qZA(),e.TgZ(40,"select",20),e.NdJ("ngModelChange",function(s){return n.inspectionPointReport.model=s}),e.YNc(41,rn,2,2,"option",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(42,"hr"),e.TgZ(43,"div",1),e.TgZ(44,"div",11),e.TgZ(45,"label",13),e._uU(46,"Desde(dd/mm/yyyy):"),e.qZA(),e.TgZ(47,"div",12),e.TgZ(48,"input",21,22),e.NdJ("ngModelChange",function(s){return n.inspectionPointReport.from=s}),e.qZA(),e.TgZ(50,"span",23),e.YNc(51,sn,2,0,"button",24),e.qZA(),e.TgZ(52,"span",23),e.TgZ(53,"button",25),e.NdJ("click",function(){return e.CHM(i),e.MAs(49).toggleCalendar()}),e._UZ(54,"i",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(55,"div",11),e.TgZ(56,"label",13),e._uU(57,"Hasta(dd/mm/yyyy):"),e.qZA(),e.TgZ(58,"div",12),e.TgZ(59,"input",27,28),e.NdJ("ngModelChange",function(s){return n.inspectionPointReport.to=s}),e.qZA(),e.TgZ(61,"span",23),e.YNc(62,cn,2,0,"button",24),e.qZA(),e.TgZ(63,"span",23),e.TgZ(64,"button",25),e.NdJ("click",function(){return e.CHM(i),e.MAs(60).toggleCalendar()}),e._UZ(65,"i",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(66,"div",29),e.TgZ(67,"div",12),e._UZ(68,"br"),e.TgZ(69,"button",30),e._uU(70,"Buscar"),e.qZA(),e._uU(71," \xa0 "),e.TgZ(72,"button",31),e.NdJ("click",function(){return n.generateExcel()}),e._UZ(73,"i",32),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(74,"hr"),e.TgZ(75,"div",33),e.TgZ(76,"table",34),e.TgZ(77,"thead"),e.TgZ(78,"tr"),e.TgZ(79,"th"),e._uU(80,"#"),e.qZA(),e.TgZ(81,"th"),e._uU(82,"Chasis"),e.qZA(),e.TgZ(83,"th"),e._uU(84,"Modelo"),e.qZA(),e.TgZ(85,"th"),e._uU(86,"Motor"),e.qZA(),e.TgZ(87,"th"),e._uU(88,"Color"),e.qZA(),e.TgZ(89,"th"),e._uU(90,"Fecha Inspecci\xf3n"),e.qZA(),e.TgZ(91,"th"),e._uU(92,"Responsable"),e.qZA(),e.TgZ(93,"th"),e._uU(94,"Observaci\xf3n"),e.qZA(),e.TgZ(95,"th"),e._uU(96,"Origen"),e.qZA(),e.TgZ(97,"th"),e._uU(98,"Destino"),e.qZA(),e.TgZ(99,"th"),e._uU(100,"Transportista"),e.qZA(),e.TgZ(101,"th"),e._uU(102,"Gu\xeda"),e.qZA(),e.TgZ(103,"th"),e._uU(104,"Chofer"),e.qZA(),e.TgZ(105,"th"),e._uU(106,"No. Pedido"),e.qZA(),e.TgZ(107,"th"),e._uU(108,"No. Factura"),e.qZA(),e.TgZ(109,"th"),e._uU(110,"No. B/L"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(111,"tbody"),e.YNc(112,ln,34,19,"tr",35),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const i=e.MAs(15);e.xp6(13),e.Oqu(n.numberVehicles),e.xp6(9),e.Q6J("ngModel",n.inspectionPointReport.inspectionPoint),e.xp6(1),e.Q6J("ngForOf",n.origins),e.xp6(5),e.Q6J("ngModel",n.inspectionPointReport.event),e.xp6(1),e.Q6J("ngForOf",n.events),e.xp6(4),e.Oqu(n.placeLabel),e.xp6(1),e.Q6J("ngModel",n.inspectionPointReport.place),e.xp6(1),e.Q6J("ngForOf",n.places),e.xp6(5),e.Q6J("ngModel",n.inspectionPointReport.model),e.xp6(1),e.Q6J("ngForOf",n.models),e.xp6(7),e.Q6J("ngModel",n.inspectionPointReport.from)("options",n.myDatePickerOptions)("locale","es"),e.xp6(3),e.Q6J("ngIf",n.inspectionPointReport.from),e.xp6(8),e.Q6J("ngModel",n.inspectionPointReport.to)("options",n.myDatePickerOptions)("locale","es"),e.xp6(3),e.Q6J("ngIf",n.inspectionPointReport.to),e.xp6(7),e.Q6J("disabled",!i.form.valid),e.xp6(43),e.Q6J("ngForOf",n.tracks)}},directives:[c._Y,c.JL,c.F,c.EJ,c.Q7,c.JJ,c.On,g.sg,c.Fj,y.w_,g.O5,c.YN,c.Kr],pipes:[g.uU],styles:[".ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}"]}),o})();class gn{}function dn(o,a){if(1&o&&(e.TgZ(0,"option",35),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.Oqu(t.nombre)}}function un(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(51).clearDate()}),e._UZ(1,"i",36),e.qZA()}}function _n(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(62).clearDate()}),e._UZ(1,"i",36),e.qZA()}}function mn(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.qZA(),e.qZA()),2&o){const t=a.$implicit,n=a.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.chasis),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(t.color),e.xp6(2),e.Oqu(e.xi3(11,13,t.fecha,"dd/MM/yyyy HH:mm")),e.xp6(3),e.Oqu(t.usuario),e.xp6(2),e.Oqu(t.observacion),e.xp6(2),e.Oqu(t.destino_anterior),e.xp6(2),e.Oqu(t.transportista_anterior),e.xp6(2),e.Oqu(t.guia_anterior),e.xp6(2),e.Oqu(t.chofer),e.xp6(2),e.Oqu(t.pedido),e.xp6(2),e.Oqu(t.factura)}}let hn=(()=>{class o{constructor(t,n,i){this.trackingService=t,this.functionsService=n,this.router=i,this.inspectedVehicles=0,this.sentVehicles="0",this.pendingVehicles="0",this.closedVehicles="0",this.effectiveness=0,this.myDatePickerOptions={dateRange:!1,dateFormat:"dd/mm/yyyy",showFooterToday:!0}}ngOnInit(){this.dealerReport=new gn,this.trackingService.getDealers().then(t=>{this.dealers=t,this.dealers=this.functionsService.sortModelsObjectArray(this.dealers);const n=new w;n.nombre="TODOS",this.dealers.unshift(n)})}search(){this.tracks=null,this.trackingService.dealerReport(this.dealerReport.dealer,this.dealerReport.model,this.dealerReport.from.singleDate.epoc,this.dealerReport.to.singleDate.epoc).then(t=>{this.tracks=t.tracks,this.inspectedVehicles=t.tracks.length,this.sentVehicles=t.sentVehicles,this.pendingVehicles=t.pendingVehicles,this.closedVehicles=t.closedVehicles,this.effectiveness=t.effectiveness})}generateExcel(){this.trackingService.dealerReportExcel(this.dealerReport.dealer,this.dealerReport.model,this.dealerReport.from.singleDate.epoc,this.dealerReport.to.singleDate.epoc)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b),e.Y36(C),e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-dealer-report"]],features:[e._Bn([b,C])],decls:109,vars:18,consts:[[1,"wrapper","wrapper-content"],[1,"row"],[1,"col-lg-12"],[1,"ibox","float-e-margins"],[1,"ibox-title"],[1,"col-sm-2",2,"padding-top","10px"],[1,"col-sm-2",2,"background-color","#1D5493","padding-top","10px"],["color","white"],[3,"ngSubmit"],["trackForm","ngForm"],[1,"ibox-content"],[1,"col-sm-3"],[1,"input-group"],["for","evento"],["id","dealer","required","","name","dealer",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-4"],["name","model","type","text",1,"input-sm","form-control",3,"ngModel","ngModelChange"],["for","from"],["name","dateFrom","placeholder","Ingrese una fecha","angular-mydatepicker","","required","",1,"form-control",3,"ngModel","options","locale","ngModelChange"],["dp_from","angular-mydatepicker"],[1,"input-group-btn"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fa","fa-calendar-o"],["for","to"],["name","dateTo","placeholder","Ingrese una fecha","angular-mydatepicker","","required","",1,"form-control",3,"ngModel","options","locale","ngModelChange"],["dp_to","angular-mydatepicker"],[1,"col-sm-6"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-file-excel-o"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[3,"value"],[1,"fa","fa-close"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",1),e.TgZ(6,"div",5),e.TgZ(7,"h5"),e._uU(8,"Reporte Concesionario"),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"h5"),e.TgZ(11,"font",7),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"h5"),e.TgZ(15,"font",7),e._uU(16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",6),e.TgZ(18,"h5"),e.TgZ(19,"font",7),e._uU(20),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",6),e.TgZ(22,"h5"),e.TgZ(23,"font",7),e._uU(24),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",6),e.TgZ(26,"h5"),e.TgZ(27,"font",7),e._uU(28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"form",8,9),e.NdJ("ngSubmit",function(){return n.search()}),e.TgZ(31,"div",10),e.TgZ(32,"div",1),e.TgZ(33,"div",11),e.TgZ(34,"div",12),e.TgZ(35,"label",13),e._uU(36,"Concesionario:"),e.qZA(),e.TgZ(37,"select",14),e.NdJ("ngModelChange",function(s){return n.dealerReport.dealer=s}),e.YNc(38,dn,2,2,"option",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"div",16),e.TgZ(40,"div",12),e.TgZ(41,"label",13),e._uU(42,"Modelo:"),e.qZA(),e.TgZ(43,"input",17),e.NdJ("ngModelChange",function(s){return n.dealerReport.model=s}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(44,"hr"),e.TgZ(45,"div",1),e.TgZ(46,"div",11),e.TgZ(47,"label",18),e._uU(48,"Desde(dd/mm/yyyy):"),e.qZA(),e.TgZ(49,"div",12),e.TgZ(50,"input",19,20),e.NdJ("ngModelChange",function(s){return n.dealerReport.from=s}),e.qZA(),e.TgZ(52,"span",21),e.YNc(53,un,2,0,"button",22),e.qZA(),e.TgZ(54,"span",21),e.TgZ(55,"button",23),e.NdJ("click",function(){return e.CHM(i),e.MAs(51).toggleCalendar()}),e._UZ(56,"i",24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"div",11),e.TgZ(58,"label",25),e._uU(59,"Hasta(dd/mm/yyyy):"),e.qZA(),e.TgZ(60,"div",12),e.TgZ(61,"input",26,27),e.NdJ("ngModelChange",function(s){return n.dealerReport.to=s}),e.qZA(),e.TgZ(63,"span",21),e.YNc(64,_n,2,0,"button",22),e.qZA(),e.TgZ(65,"span",21),e.TgZ(66,"button",23),e.NdJ("click",function(){return e.CHM(i),e.MAs(62).toggleCalendar()}),e._UZ(67,"i",24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(68,"div",28),e.TgZ(69,"div",12),e._UZ(70,"br"),e.TgZ(71,"button",29),e._uU(72,"Buscar"),e.qZA(),e._uU(73," \xa0 "),e.TgZ(74,"button",30),e.NdJ("click",function(){return n.generateExcel()}),e._UZ(75,"i",31),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(76,"hr"),e.TgZ(77,"div",32),e.TgZ(78,"table",33),e.TgZ(79,"thead"),e.TgZ(80,"tr"),e.TgZ(81,"th"),e._uU(82,"#"),e.qZA(),e.TgZ(83,"th"),e._uU(84,"Chasis"),e.qZA(),e.TgZ(85,"th"),e._uU(86,"Modelo"),e.qZA(),e.TgZ(87,"th"),e._uU(88,"Color"),e.qZA(),e.TgZ(89,"th"),e._uU(90,"Fecha Inspecci\xf3n"),e.qZA(),e.TgZ(91,"th"),e._uU(92,"Responsable"),e.qZA(),e.TgZ(93,"th"),e._uU(94,"Observaci\xf3n"),e.qZA(),e.TgZ(95,"th"),e._uU(96,"Concesionario"),e.qZA(),e.TgZ(97,"th"),e._uU(98,"Transportista"),e.qZA(),e.TgZ(99,"th"),e._uU(100,"Gu\xeda"),e.qZA(),e.TgZ(101,"th"),e._uU(102,"Chofer"),e.qZA(),e.TgZ(103,"th"),e._uU(104,"No. Pedido"),e.qZA(),e.TgZ(105,"th"),e._uU(106,"No. Factura"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(107,"tbody"),e.YNc(108,mn,28,16,"tr",34),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const i=e.MAs(30);e.xp6(12),e.hij("Enviados: ",n.sentVehicles,""),e.xp6(4),e.hij("Inspeccionados: ",n.inspectedVehicles,""),e.xp6(4),e.hij("Pendientes: ",n.pendingVehicles,""),e.xp6(4),e.hij("Cerrados: ",n.closedVehicles,""),e.xp6(4),e.hij("Efectividad: ",n.effectiveness," %"),e.xp6(9),e.Q6J("ngModel",n.dealerReport.dealer),e.xp6(1),e.Q6J("ngForOf",n.dealers),e.xp6(5),e.Q6J("ngModel",n.dealerReport.model),e.xp6(7),e.Q6J("ngModel",n.dealerReport.from)("options",n.myDatePickerOptions)("locale","es"),e.xp6(3),e.Q6J("ngIf",n.dealerReport.from),e.xp6(8),e.Q6J("ngModel",n.dealerReport.to)("options",n.myDatePickerOptions)("locale","es"),e.xp6(3),e.Q6J("ngIf",n.dealerReport.to),e.xp6(7),e.Q6J("disabled",!i.form.valid),e.xp6(37),e.Q6J("ngForOf",n.tracks)}},directives:[c._Y,c.JL,c.F,c.EJ,c.Q7,c.JJ,c.On,g.sg,c.Fj,y.w_,g.O5,c.YN,c.Kr],pipes:[g.uU],styles:[".ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}"]}),o})();function Zn(o,a){if(1&o&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.Oqu(t.nombre)}}function fn(o,a){if(1&o&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Tn(o,a){if(1&o&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.Oqu(t.nombre)}}function bn(o,a){if(1&o&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.descripcion),e.xp6(1),e.Oqu(t.descripcion)}}function vn(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(56).clearDate()}),e._UZ(1,"i",41),e.qZA()}}function qn(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(67).clearDate()}),e._UZ(1,"i",41),e.qZA()}}function Cn(o,a){if(1&o&&e._UZ(0,"img",49),2&o){const t=a.$implicit,n=e.oxw(2);e.Q6J("src",n.sanitizer.bypassSecurityTrustResourceUrl(t.image),e.LSH)}}function An(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"div",43),e.TgZ(2,"b"),e._uU(3,"Fotos"),e.qZA(),e.TgZ(4,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw().bsModalRef.hide()}),e.TgZ(5,"span",45),e._uU(6,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",46),e.YNc(8,Cn,1,1,"img",47),e.qZA(),e.TgZ(9,"div",42),e.TgZ(10,"button",48),e.NdJ("click",function(){return e.CHM(t),e.oxw().print()}),e._uU(11,"Imprimir"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(8),e.Q6J("ngForOf",t.photos)}}function Mn(o,a){1&o&&(e.TgZ(0,"th"),e._uU(1,"Destino"),e.qZA())}function xn(o,a){1&o&&(e.TgZ(0,"th"),e._uU(1,"Origen"),e.qZA())}function kn(o,a){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.destino_anterior)}}function On(o,a){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.origen_anterior)}}function yn(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.YNc(7,kn,2,1,"td",38),e.YNc(8,On,2,1,"td",38),e.TgZ(9,"td"),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.qZA(),e.TgZ(26,"td"),e.TgZ(27,"a",48),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(),p=e.MAs(83);return s.openModal(p,r.novedad_id)}),e._UZ(28,"i",50),e._uU(29),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit,n=a.index,i=e.oxw();e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.chasis),e.xp6(2),e.Oqu(t.descripcion),e.xp6(1),e.Q6J("ngIf","entrada"==i.inspectionPointReport.event),e.xp6(1),e.Q6J("ngIf","salida"==i.inspectionPointReport.event),e.xp6(2),e.Oqu(e.xi3(11,14,t.fecha,"dd/MM/yyyy HH:mm")),e.xp6(3),e.Oqu(t.usuario),e.xp6(2),e.Oqu(t.nombre_parte),e.xp6(2),e.Oqu(t.tipo_novedad),e.xp6(2),e.Oqu(t.observacion),e.xp6(2),e.Oqu(t.transportista_anterior),e.xp6(2),e.Oqu(t.guia_anterior),e.xp6(2),e.Oqu(t.chofer),e.xp6(4),e.hij(" ",t.numeroFotos,"")}}let Un=(()=>{class o{constructor(t,n,i,r,s,p,l){this.trackingService=t,this.functionsService=n,this.destinationService=i,this.originService=r,this.sanitizer=s,this.router=p,this.modalService=l,this.numberVehicles=0,this.vehicles=0,this.damageVehicles=0,this.effectiveness=0,this.myDatePickerOptions={dateFormat:"dd/mm/yyyy",dateRange:!1,showFooterToday:!0}}ngOnInit(){this.inspectionPointReport=new j,this.trackingService.getOrigins().then(t=>{this.origins=t;const n=new O;n.nombre="CONCESIONARIO",this.origins.push(n);const i=new O;i.nombre="AUTOCONSUMO",this.origins.push(i);const r=new O;r.nombre="EMPLEADO",this.origins.push(r),this.origins=this.functionsService.sortObjectArray(this.origins)}),this.events=["entrada","salida"],this.trackingService.getModels().then(t=>{this.models=t,this.models=this.functionsService.sortModelsObjectArray(this.models);const n=new K;n.descripcion="TODOS",this.models.unshift(n)}),this.placeLabel="Destino:"}search(){this.tracks=null,this.trackingService.damageReport(this.inspectionPointReport.inspectionPoint,this.inspectionPointReport.event,this.inspectionPointReport.place,this.inspectionPointReport.model,this.inspectionPointReport.from.singleDate.epoc,this.inspectionPointReport.to.singleDate.epoc).then(t=>{this.tracks=t.tracks,this.vehicles=t.vehicles,this.damageVehicles=t.damageVehicles,this.effectiveness=t.effectiveness})}generateExcel(){this.trackingService.damageReportExcel(this.inspectionPointReport.inspectionPoint,this.inspectionPointReport.event,this.inspectionPointReport.place,this.inspectionPointReport.model,this.inspectionPointReport.from.singleDate.epoc,this.inspectionPointReport.to.singleDate.epoc)}setDestinations(){"entrada"===this.inspectionPointReport.event&&(this.placeLabel="Origen:",this.originService.getOrigins(this.inspectionPointReport.inspectionPoint).then(t=>{this.places=t,this.places=this.functionsService.sortObjectArray(this.places);const n=new w;n.nombre="TODOS",this.places.unshift(n)})),"salida"===this.inspectionPointReport.event&&(this.placeLabel="Destino:",this.destinationService.getDestinations(this.inspectionPointReport.inspectionPoint).then(t=>{this.places=t,this.places=this.functionsService.sortObjectArray(this.places);const n=new w;n.nombre="TODOS",this.places.unshift(n)}))}openModal(t,n){this.trackingService.getPhotos(n).then(i=>{this.photos=i,this.bsModalRef=this.modalService.show(t)})}resetOptions(){this.inspectionPointReport.event=null,this.inspectionPointReport.place=null,this.inspectionPointReport.model=null}print(){const t=document.getElementsByClassName("modal fade in")[0].innerHTML;console.log(t);const n=window.open("","_blank","top=0,left=0,height=100%,width=auto");n.document.open(),n.document.write(`\n      <html>\n        <head>\n        </head>\n    <body onload="window.print();window.close()">${t}</body>\n      </html>`),n.document.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b),e.Y36(C),e.Y36(F),e.Y36(L),e.Y36(T.H7),e.Y36(d.F0),e.Y36(q.tT))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-damage-report"]],features:[e._Bn([b,C,F,L])],decls:117,vars:24,consts:[[1,"wrapper","wrapper-content"],[1,"row"],[1,"col-lg-12"],[1,"ibox","float-e-margins"],[1,"ibox-title"],[1,"col-sm-5"],[1,"col-sm-2",2,"background-color","#1D5493","padding-top","10px"],["color","white"],[1,"col-sm-3",2,"background-color","#1D5493","padding-top","10px"],[3,"ngSubmit"],["trackForm","ngForm"],[1,"ibox-content"],[1,"col-sm-3"],[1,"input-group"],["for","evento"],["id","origin","required","","name","inspectionPoint",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-2"],["id","origin","required","","name","event",1,"form-control",3,"ngModel","ngModelChange","change"],["id","place","name","place",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-4"],["id","origin","name","model",1,"form-control",3,"ngModel","ngModelChange"],["name","dateFrom","placeholder","Ingrese una fecha","angular-mydatepicker","","required","",1,"form-control",3,"ngModel","options","locale","ngModelChange"],["dp_from","angular-mydatepicker"],[1,"input-group-btn"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fa","fa-calendar-o"],["name","dateTo","placeholder","Ingrese una fecha","angular-mydatepicker","","required","",1,"form-control",3,"ngModel","options","locale","ngModelChange"],["dp_to","angular-mydatepicker"],[1,"col-sm-6"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-file-excel-o"],["id","photosSection",1,"row"],["myModal",""],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"fa","fa-close"],[1,"modal-header"],["align","center"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true",2,"font-size","140%"],[1,"modal-body"],["style","margin:auto; display:table; border:1px solid black;","width","400px","height","400px",3,"src",4,"ngFor","ngForOf"],[3,"click"],["width","400px","height","400px",2,"margin","auto","display","table","border","1px solid black",3,"src"],[1,"fa","fa-camera"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",1),e.TgZ(6,"div",5),e.TgZ(7,"h5"),e._uU(8,"Reporte Novedades"),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"h5"),e.TgZ(11,"font",7),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",8),e.TgZ(14,"h5"),e.TgZ(15,"font",7),e._uU(16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",6),e.TgZ(18,"h5"),e.TgZ(19,"font",7),e._uU(20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"form",9,10),e.NdJ("ngSubmit",function(){return n.search()}),e.TgZ(23,"div",11),e.TgZ(24,"div",1),e.TgZ(25,"div",12),e.TgZ(26,"div",13),e.TgZ(27,"label",14),e._uU(28,"Punto de inspecci\xf3n:"),e.qZA(),e.TgZ(29,"select",15),e.NdJ("ngModelChange",function(s){return n.inspectionPointReport.inspectionPoint=s})("change",function(){return n.resetOptions()}),e.YNc(30,Zn,2,2,"option",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",17),e.TgZ(32,"div",13),e.TgZ(33,"label",14),e._uU(34,"Evento:"),e.qZA(),e.TgZ(35,"select",18),e.NdJ("ngModelChange",function(s){return n.inspectionPointReport.event=s})("change",function(){return n.setDestinations()}),e.YNc(36,fn,2,2,"option",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",12),e.TgZ(38,"div",13),e.TgZ(39,"label",14),e._uU(40),e.qZA(),e.TgZ(41,"select",19),e.NdJ("ngModelChange",function(s){return n.inspectionPointReport.place=s}),e.YNc(42,Tn,2,2,"option",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"div",20),e.TgZ(44,"div",13),e.TgZ(45,"label",14),e._uU(46,"Modelo:"),e.qZA(),e.TgZ(47,"select",21),e.NdJ("ngModelChange",function(s){return n.inspectionPointReport.model=s}),e.YNc(48,bn,2,2,"option",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(49,"hr"),e.TgZ(50,"div",1),e.TgZ(51,"div",12),e.TgZ(52,"label",14),e._uU(53,"Desde(dd/mm/yyyy):"),e.qZA(),e.TgZ(54,"div",13),e.TgZ(55,"input",22,23),e.NdJ("ngModelChange",function(s){return n.inspectionPointReport.from=s}),e.qZA(),e.TgZ(57,"span",24),e.YNc(58,vn,2,0,"button",25),e.qZA(),e.TgZ(59,"span",24),e.TgZ(60,"button",26),e.NdJ("click",function(){return e.CHM(i),e.MAs(56).toggleCalendar()}),e._UZ(61,"i",27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"div",12),e.TgZ(63,"label",14),e._uU(64,"Hasta(dd/mm/yyyy):"),e.qZA(),e.TgZ(65,"div",13),e.TgZ(66,"input",28,29),e.NdJ("ngModelChange",function(s){return n.inspectionPointReport.to=s}),e.qZA(),e.TgZ(68,"span",24),e.YNc(69,qn,2,0,"button",25),e.qZA(),e.TgZ(70,"span",24),e.TgZ(71,"button",26),e.NdJ("click",function(){return e.CHM(i),e.MAs(67).toggleCalendar()}),e._UZ(72,"i",27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(73,"div",30),e.TgZ(74,"div",13),e._UZ(75,"br"),e.TgZ(76,"button",31),e._uU(77,"Buscar"),e.qZA(),e._uU(78," \xa0 "),e.TgZ(79,"button",32),e.NdJ("click",function(){return n.generateExcel()}),e._UZ(80,"i",33),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(81,"div",34),e.YNc(82,An,12,1,"ng-template",null,35,e.W1O),e.qZA(),e._UZ(84,"hr"),e.TgZ(85,"div",36),e.TgZ(86,"table",37),e.TgZ(87,"thead"),e.TgZ(88,"tr"),e.TgZ(89,"th"),e._uU(90,"#"),e.qZA(),e.TgZ(91,"th"),e._uU(92,"Chasis"),e.qZA(),e.TgZ(93,"th"),e._uU(94,"Modelo"),e.qZA(),e.YNc(95,Mn,2,0,"th",38),e.YNc(96,xn,2,0,"th",38),e.TgZ(97,"th"),e._uU(98,"Fecha Inspecci\xf3n"),e.qZA(),e.TgZ(99,"th"),e._uU(100,"Responsable"),e.qZA(),e.TgZ(101,"th"),e._uU(102,"Parte"),e.qZA(),e.TgZ(103,"th"),e._uU(104,"Da\xf1o"),e.qZA(),e.TgZ(105,"th"),e._uU(106,"Observaci\xf3n"),e.qZA(),e.TgZ(107,"th"),e._uU(108,"Transportista"),e.qZA(),e.TgZ(109,"th"),e._uU(110,"Gu\xeda"),e.qZA(),e.TgZ(111,"th"),e._uU(112,"Chofer"),e.qZA(),e.TgZ(113,"th"),e._uU(114,"Fotos"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(115,"tbody"),e.YNc(116,yn,30,17,"tr",39),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const i=e.MAs(22);e.xp6(12),e.hij("Veh\xedculos: ",n.vehicles,""),e.xp6(4),e.hij("Veh\xedculos con da\xf1os: ",n.damageVehicles,""),e.xp6(4),e.hij("Efectividad: ",n.effectiveness," %"),e.xp6(9),e.Q6J("ngModel",n.inspectionPointReport.inspectionPoint),e.xp6(1),e.Q6J("ngForOf",n.origins),e.xp6(5),e.Q6J("ngModel",n.inspectionPointReport.event),e.xp6(1),e.Q6J("ngForOf",n.events),e.xp6(4),e.Oqu(n.placeLabel),e.xp6(1),e.Q6J("ngModel",n.inspectionPointReport.place),e.xp6(1),e.Q6J("ngForOf",n.places),e.xp6(5),e.Q6J("ngModel",n.inspectionPointReport.model),e.xp6(1),e.Q6J("ngForOf",n.models),e.xp6(7),e.Q6J("ngModel",n.inspectionPointReport.from)("options",n.myDatePickerOptions)("locale","es"),e.xp6(3),e.Q6J("ngIf",n.inspectionPointReport.from),e.xp6(8),e.Q6J("ngModel",n.inspectionPointReport.to)("options",n.myDatePickerOptions)("locale","es"),e.xp6(3),e.Q6J("ngIf",n.inspectionPointReport.to),e.xp6(7),e.Q6J("disabled",!i.form.valid),e.xp6(19),e.Q6J("ngIf","salida"==n.inspectionPointReport.event),e.xp6(1),e.Q6J("ngIf","entrada"==n.inspectionPointReport.event),e.xp6(20),e.Q6J("ngForOf",n.tracks)}},directives:[c._Y,c.JL,c.F,c.EJ,c.Q7,c.JJ,c.On,g.sg,c.Fj,y.w_,g.O5,c.YN,c.Kr],pipes:[g.uU],styles:[".ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}"]}),o})();class Pn{}function wn(o,a){if(1&o&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Fn(o,a){if(1&o&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Rn(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.qZA()),2&o){const t=a.$implicit;e.xp6(2),e.Oqu(t.lugar),e.xp6(2),e.Oqu(t.cantidad),e.xp6(2),e.Oqu(t.fecha)}}let Jn=(()=>{class o{constructor(t,n){this.trackingService=t,this.router=n,this.years=[],this.months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]}ngOnInit(){this.peakReport=new Pn;const t=(new Date).getFullYear();for(let n=2014;n<=t;n++)this.years.push(String(n))}search(){const t=this.months.indexOf(this.peakReport.month)+1;this.trackingService.peakReport(this.peakReport.year,t).then(n=>{this.peakReportResult=n})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b),e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-dealer-report"]],features:[e._Bn([b,C])],decls:43,vars:6,consts:[[1,"wrapper","wrapper-content"],[1,"row"],[1,"col-lg-12"],[1,"ibox","float-e-margins"],[1,"ibox-title"],[1,"col-sm-4",2,"padding-top","10px"],[3,"ngSubmit"],["trackForm","ngForm"],[1,"ibox-content"],[1,"col-sm-3"],[1,"input-group"],["for","evento"],["id","year","required","","name","year",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-4"],["id","origin","required","","name","month",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-5"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",1),e.TgZ(6,"div",5),e.TgZ(7,"h5"),e._uU(8,"Reporte Picos por deposito"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"form",6,7),e.NdJ("ngSubmit",function(){return n.search()}),e.TgZ(11,"div",8),e.TgZ(12,"div",1),e.TgZ(13,"div",9),e.TgZ(14,"div",10),e.TgZ(15,"label",11),e._uU(16,"A\xf1o:"),e.qZA(),e.TgZ(17,"select",12),e.NdJ("ngModelChange",function(r){return n.peakReport.year=r}),e.YNc(18,wn,2,2,"option",13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",14),e.TgZ(20,"div",10),e.TgZ(21,"label",11),e._uU(22,"Mes:"),e.qZA(),e.TgZ(23,"select",15),e.NdJ("ngModelChange",function(r){return n.peakReport.month=r}),e.YNc(24,Fn,2,2,"option",13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",16),e.TgZ(26,"div",10),e._UZ(27,"br"),e.TgZ(28,"button",17),e._uU(29,"Buscar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(30,"hr"),e.TgZ(31,"div",18),e.TgZ(32,"table",19),e.TgZ(33,"thead"),e.TgZ(34,"tr"),e.TgZ(35,"th"),e._uU(36,"Deposito"),e.qZA(),e.TgZ(37,"th"),e._uU(38,"Cantidad"),e.qZA(),e.TgZ(39,"th"),e._uU(40,"Fecha"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"tbody"),e.YNc(42,Rn,7,3,"tr",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const i=e.MAs(10);e.xp6(17),e.Q6J("ngModel",n.peakReport.year),e.xp6(1),e.Q6J("ngForOf",n.years),e.xp6(5),e.Q6J("ngModel",n.peakReport.month),e.xp6(1),e.Q6J("ngForOf",n.months),e.xp6(4),e.Q6J("disabled",!i.form.valid),e.xp6(14),e.Q6J("ngForOf",n.peakReportResult)}},directives:[c._Y,c.JL,c.F,c.EJ,c.Q7,c.JJ,c.On,g.sg,c.YN,c.Kr],styles:[".ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}"]}),o})(),Nn=(()=>{class o{ngAfterViewInit(){jQuery("body").addClass("gray-bg")}ngOnDestroy(){jQuery("body").removeClass("gray-bg")}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-blank"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[d.lC],encapsulation:2}),o})();function ee(){jQuery(document).width()<769?jQuery("body").addClass("body-small"):jQuery("body").removeClass("body-small")}h(9856);var te={moduleTracking:{title:"Tracking",iconClass:"fa fa-car",options:[{name:"Tracking",permission:"Administraci\xf3n de Tracking",path:"/search-vehicle",scopes:[],subRoutes:["track-form/:chasis","photos/:novedadId/:chasis/:origin"]}]},moduleLocation:{title:"Cambio de ubicaci\xf3n",iconClass:"fa fa-location-arrow",options:[{name:"Cambio de ubicaci\xf3n",permission:"Administraci\xf3n de Cambio de Ubicaci\xf3n",path:"/search-internal-vehicle",scopes:[],subRoutes:["change-location/:chasis"]}]},moduleReports:{title:"Reportes",iconClass:"fa fa-th-large",options:[{name:"Tracking",permission:"Reporte de Tracking",path:"/search-tracking",scopes:[],subRoutes:[]},{name:"Punto Inspecci\xf3n",permission:"Reporte de Punto Inspecci\xf3n",path:"/inspection-point-report",scopes:[],subRoutes:[]},{name:"Stock",permission:"Reporte de Stock",path:"/stock-report",scopes:[],subRoutes:[]},{name:"Concesionario",permission:"Reporte de Concesionario",path:"/dealer-report",scopes:[],subRoutes:[]},{name:"Novedades",permission:"Reporte de Novedades",path:"/damage-report",scopes:[],subRoutes:[]},{name:"Picos por deposito",permission:"Reporte de Picos por Dep\xf3sito",path:"/peak-report",scopes:[],subRoutes:[]},{name:"Patios",permission:"Reporte de Patios",path:"/patios-report",scopes:[],subRoutes:[]},{name:"Ubicaciones especiales",permission:"Reporte de Ubicaciones especiales",path:"/special-locations-report",scopes:[],subRoutes:[]},{name:"Bit\xe1coras",permission:"Reporte de Bit\xe1coras",path:"/binnacles-report",scopes:[],subRoutes:[]}]},moduleMaintenance:{title:"Mantenimiento",iconClass:"fa fa-wrench",options:[{name:"Por Chasis",permission:"Administraci\xf3n de Mantenimiento por Chasis",path:"/maintenance/chassis",scopes:[],subRoutes:[]},{name:"Por bloque",permission:"Administraci\xf3n de Mantenimiento por bloque",path:"/maintenance/batch",scopes:[],subRoutes:[]},{name:"Tiempos Destinos",permission:"Administraci\xf3n de Mantenimiento de Tiempos Destinos",path:"/maintenance/destinations",scopes:[],subRoutes:[]}]},moduleSettings:{title:"Configuraci\xf3n",iconClass:"fa fa-cog",options:[{name:"Modelos",permission:"Administraci\xf3n de Mantenimiento de Modelos",path:"/config/models",scopes:[],subRoutes:["config/models/:model","config/models/:model/faces/:face","config/models/new/face","config/models/modify/face/:model"]},{name:"Repositorios SMB",permission:"Administraci\xf3n de Mantenimiento de Repositorios SMB",path:"/config/smb-management",scopes:[],subRoutes:[]}]}};let oe=(()=>{class o{constructor(){this.permissions="permissions"}getPermission(){const t=sessionStorage.getItem(this.permissions)||null;return JSON.parse(t)||[]}setPermission(t){sessionStorage.setItem(this.permissions,JSON.stringify(t))}removePermission(){sessionStorage.removeItem(this.permissions)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var V=h(6416);const ie=function(o){return{active:o}},Sn=function(o){return[o]};function In(o,a){if(1&o&&(e.TgZ(0,"li",12),e.TgZ(1,"a",16),e._uU(2),e.qZA(),e.qZA()),2&o){const t=a.$implicit,n=e.oxw(2);e.Q6J("ngClass",e.VKq(3,ie,n.activeRoute("dashboard5"))),e.xp6(1),e.Q6J("routerLink",e.VKq(5,Sn,t.path)),e.xp6(1),e.Oqu(t.name)}}const En=function(o){return{in:o}};function Bn(o,a){if(1&o&&(e.TgZ(0,"li",12),e.TgZ(1,"a"),e._UZ(2,"i",12),e.TgZ(3,"span",13),e._uU(4),e.qZA(),e._UZ(5,"span",14),e.qZA(),e.TgZ(6,"ul",15),e.YNc(7,In,3,7,"li",11),e.qZA(),e.qZA()),2&o){const t=a.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(5,ie,n.activeRoute("dashboards"))),e.xp6(2),e.Q6J("ngClass",n.modules[t].iconClass),e.xp6(2),e.Oqu(n.modules[t].title),e.xp6(2),e.Q6J("ngClass",e.VKq(7,En,n.activeRoute("dashboards"))),e.xp6(1),e.Q6J("ngForOf",n.modules[t].options)}}let jn=(()=>{class o{constructor(t,n){this.router=t,this.permissionsService=n,this.objectKeys=Object.keys,this.userName=sessionStorage.getItem("user-name-label");const i=this.permissionsService.getPermission();this.modules=this.generateOptions(te,i)}moduleIsAccesible(t,n){return n.find(i=>t.permission===i.rsname&&i.scopes.includes("Visualizar"))}generateOptions(t,n){const i=Object.keys(t),r={};for(let s=0;s<i.length;s++){const p=t[i[s]].options.filter(l=>this.moduleIsAccesible(l,n));p.length>0&&(r[i[s]]=Object.assign(Object.assign({},t[i[s]]),{options:p}))}return r}ngAfterViewInit(){jQuery("#side-menu").metisMenu(),jQuery("body").hasClass("fixed-sidebar")&&jQuery(".sidebar-collapse").slimscroll({height:"100%"})}activeRoute(t){return this.router.url.indexOf(t)>-1}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.F0),e.Y36(oe))},o.\u0275cmp=e.Xpm({type:o,selectors:[["navigation"]],decls:14,vars:2,consts:[["role","navigation",1,"navbar-default","navbar-static-side"],[1,"sidebar-collapse"],["id","side-menu",1,"nav","metismenu"],[1,"nav-header"],["dropdown","",1,"profile-element"],["dropdownToggle",""],[1,"block","m-t-xs"],[1,"font-bold"],[1,"text-muted","text-xs","block"],[1,"logo-element"],["alt","image","src","assets/images/littleLogo.png","width","30px","height","25px",1,"img-circle"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"nav-label"],[1,"fa","arrow"],[1,"nav","nav-second-level","collapse",3,"ngClass"],[3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"nav",0),e.TgZ(1,"div",1),e.TgZ(2,"ul",2),e.TgZ(3,"li",3),e.TgZ(4,"div",4),e.TgZ(5,"a",5),e.TgZ(6,"span",6),e.TgZ(7,"strong",7),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"span",8),e._uU(10,"usuario "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",9),e._UZ(12,"img",10),e.qZA(),e.qZA(),e.YNc(13,Bn,8,9,"li",11),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Oqu(n.userName),e.xp6(5),e.Q6J("ngForOf",n.objectKeys(n.modules)))},directives:[V.TO,V.Mq,g.sg,g.mk,d.yS],encapsulation:2}),o})(),Ln=(()=>{class o{constructor(t){this.router=t}toggleNavigation(){jQuery("body").toggleClass("mini-navbar"),!jQuery("body").hasClass("mini-navbar")||jQuery("body").hasClass("body-small")?(jQuery("#side-menu").hide(),setTimeout(function(){jQuery("#side-menu").fadeIn(400)},200)):jQuery("body").hasClass("fixed-sidebar")?(jQuery("#side-menu").hide(),setTimeout(function(){jQuery("#side-menu").fadeIn(400)},100)):jQuery("#side-menu").removeAttr("style")}closeSession(){sessionStorage.clear(),this.router.navigate([""])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["topnavbar"]],decls:10,vars:0,consts:[[1,"row","border-bottom"],["role","navigation",1,"navbar","navbar-static-top",2,"margin-bottom","0"],[1,"navbar-header"],[1,"minimalize-styl-2","btn","btn-primary",3,"click"],[1,"fa","fa-bars"],[1,"nav","navbar-top-links","navbar-right"],[3,"click"],[1,"fa","fa-sign-out"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"nav",1),e.TgZ(2,"div",2),e.TgZ(3,"a",3),e.NdJ("click",function(){return n.toggleNavigation()}),e._UZ(4,"i",4),e.qZA(),e.qZA(),e.TgZ(5,"ul",5),e.TgZ(6,"li"),e.TgZ(7,"a",6),e.NdJ("click",function(){return n.closeSession()}),e._UZ(8,"i",7),e._uU(9," Cerrar sesi\xf3n "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA())},encapsulation:2}),o})(),ae=(()=>{class o{onResize(){ee()}ngOnInit(){ee()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-basic"]],hostBindings:function(t,n){1&t&&e.NdJ("resize",function(){return n.onResize()},!1,e.Jf7)},decls:6,vars:0,consts:[["id","wrapper"],["id","page-wrapper",1,"gray-bg"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"navigation"),e.TgZ(2,"div",1),e._UZ(3,"topnavbar"),e._UZ(4,"router-outlet"),e._UZ(5,"footer"),e.qZA(),e.qZA())},directives:[jn,Ln,d.lC],encapsulation:2}),o})(),f=(()=>{class o{constructor(t,n,i){this.router=t,this.permissionsService=n,this.authenticationService=i}moduleIsAccesible(t,n){return n.find(i=>t.permission===i.rsname&&i.scopes.includes("Visualizar"))}isMatchingPath(t,n){const i=t.split("/").filter(Boolean),r=n.split("/").filter(Boolean);if(i.length!==r.length)return!1;for(let s=0;s<i.length;s++){const p=i[s],l=r[s];if(!l.startsWith(":")&&p!==l)return!1}return!0}generateOptions(t,n){const i=Object.keys(t);let r=[],s=[];for(let p=0;p<i.length;p++){const l=t[i[p]].options.filter(u=>this.moduleIsAccesible(u,n));if(l.length>0){r=[...r,...l];let u=[];l.forEach(Z=>{u=[...u,...Z.subRoutes]}),s=[...s,...u]}}return{options:r,subRoutes:s}}canActivate(t,n){const i=this.authenticationService.getAuthInfo().accessToken;if(["#",""].includes(n.url)||n.url.includes("#"))return!0;if(!i)return this.router.navigate([""]),!1;const r=this.permissionsService.getPermission(),s=te,{options:p,subRoutes:l}=this.generateOptions(s,r),u=[...null==p?void 0:p.map(Z=>Z.path),"/init"];if(!(null==p?void 0:p.length))return this.router.navigate(["not-found"]),!1;if(!u.includes(n.url)){for(let Z=0;Z<l.length;Z++)if(this.isMatchingPath(n.url,l[Z]))return!0;return!1}return!0}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(d.F0),e.LFG(oe),e.LFG(D))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),G=(()=>{class o{constructor(t){this.http=t,this.modelUrl=__apiBaseUrl+"/novelties/models"}getModels(){return this.http.get(this.modelUrl,{responseType:"json",observe:"response"}).toPromise().then(t=>t.body).catch(this.handleError)}handleError(t){return t.error instanceof ErrorEvent?console.error("An error occurred",t.error.message):console.error(`Backend returned code ${t.status}, body was: ${t.error}`),Promise.reject(t.error.message||t.error||t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();function Qn(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"a",7),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&o){const t=a.$implicit;e.xp6(2),e.MGl("routerLink","/config/models/",t.name,""),e.xp6(1),e.Oqu(t.name)}}let Yn=(()=>{class o{constructor(t){this.modelsService=t}loadModels(){this.modelsService.getModels().then(t=>{!0!==t.response.status?alert(t.response.error.message):this.models=t.models}).catch(t=>{t.response.error?alert(t.response.error.message):alert("Error deconocido, revisar conexi\xf3n")})}ngOnInit(){this.loadModels()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(G))},o.\u0275cmp=e.Xpm({type:o,selectors:[["model"]],features:[e._Bn([G])],decls:14,vars:1,consts:[[1,"ibox-title"],["routerLink","/config/models/new/face",1,"btn"],[1,"fa","fa-plus-circle",2,"font-size","1.5em"],[1,"ibox-content"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h5"),e._uU(2,"Modelos"),e.qZA(),e.TgZ(3,"button",1),e._UZ(4,"i",2),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"table",5),e.TgZ(8,"thead"),e.TgZ(9,"tr"),e.TgZ(10,"th"),e._uU(11,"Nombre "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"tbody"),e.YNc(13,Qn,4,2,"tr",6),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(13),e.Q6J("ngForOf",n.models))},directives:[d.rH,g.sg,d.yS],styles:[".ibox-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:inline-block;font-size:14px;margin:5px 0 0;padding:0;text-overflow:ellipsis;float:left}.ibox-title[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline;padding:0;float:right}"]}),o})(),R=(()=>{class o{constructor(t){this.http=t,this.modelUrl=__apiBaseUrl+"/novelties/faces"}getFaces(t){return this.http.get(`${this.modelUrl}/${t}`,{responseType:"json",observe:"response"}).toPromise().then(n=>n.body).catch(this.handleError)}getFace(t){return this.http.get(`${__apiBaseUrl}/novelties/face/${t}`,{responseType:"json",observe:"response"}).toPromise().then(n=>n.body).catch(this.handleError)}handleError(t){return t.error instanceof ErrorEvent?console.error("An error occurred",t.error.message):console.error(`Backend returned code ${t.status}, body was: ${t.error}`),Promise.reject(t.error.message||t.error||t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();function $n(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"a",12),e._UZ(3,"img",13),e.qZA(),e.qZA(),e.TgZ(4,"td"),e.TgZ(5,"a",12),e._uU(6),e.qZA(),e.qZA(),e.qZA()),2&o){const t=a.$implicit,n=e.oxw();e.xp6(2),e.hYB("routerLink","/config/models/",n.model,"/faces/",t.id,""),e.xp6(1),e.MGl("src","",n.noveltiesImageBaseUrl+t.image,".jpg",e.LSH),e.xp6(2),e.hYB("routerLink","/config/models/",n.model,"/faces/",t.id,""),e.xp6(1),e.Oqu(t.name)}}let Hn=(()=>{class o{constructor(t,n,i){this.activeRoute=t,this.facesService=n,this.router=i,this.noveltiesImageBaseUrl=__noveltiesImageBaseUrl}loadFaces(t){this.facesService.getFaces(t).then(n=>{!0!==n.response.status?alert(n.response.error.message):this.faces=n.faces}).catch(n=>{n.response.error?alert(n.response.error.message):alert("Error desconocido, revisar conexi\xf3n")})}ngOnInit(){this.model=this.activeRoute.snapshot.paramMap.get("model"),this.loadFaces(this.model)}modifyFace(){this.router.navigate(["/config/models/modify/face",this.model]).catch(t=>console.log(t))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.gz),e.Y36(R),e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-face"]],features:[e._Bn([R])],decls:23,vars:2,consts:[[1,"ibox-title"],[1,"table","table-striped"],["width","20"],["routerLink","/config/models"],[1,"fa","fa-chevron-left"],[1,"nav-label"],[1,"btn",3,"click"],[1,"fa","fa-edit",2,"font-size","1.5em"],[1,"ibox-content"],[1,"table-responsive"],["width","20px"],[4,"ngFor","ngForOf"],[3,"routerLink"],["width","120px","height","60px",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"table",1),e.TgZ(2,"tr"),e.TgZ(3,"th",2),e.TgZ(4,"a",3),e._UZ(5,"i",4),e.qZA(),e.qZA(),e.TgZ(6,"th"),e._UZ(7,"span",5),e.TgZ(8,"h5"),e._uU(9),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return n.modifyFace()}),e._UZ(11,"i",7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"div",9),e.TgZ(14,"table",1),e.TgZ(15,"thead"),e.TgZ(16,"tr"),e.TgZ(17,"th",10),e._uU(18,"Imagen "),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Nombre "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"tbody"),e.YNc(22,$n,7,6,"tr",11),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.hij("Modelo: ",n.model,""),e.xp6(13),e.Q6J("ngForOf",n.faces))},directives:[d.yS,g.sg],styles:["th[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline;padding:0;float:right;background-color:transparent}"]}),o})(),re=(()=>{class o{constructor(t){this.http=t,this.headers=new m.WM({"Content-Type":"application/json"})}getParts(t){return this.http.get(`${__apiBaseUrl}/novelties/parts/${t}`,{responseType:"json",observe:"response"}).toPromise().then(n=>n.body).catch(this.handleError)}createPart(t){return this.http.post(`${__apiBaseUrl}/novelties/parts`,JSON.stringify({part:t}),{responseType:"json",headers:this.headers,observe:"response"}).toPromise().then(n=>n.body).catch(this.handleError)}updatePart(t){return this.http.put(`${__apiBaseUrl}/novelties/parts`,JSON.stringify({part:t}),{headers:this.headers,responseType:"json",observe:"response"}).toPromise().then(n=>n.body).catch(this.handleError)}deletePart(t){return this.http.delete(`${__apiBaseUrl}/novelties/parts/${t}`,{responseType:"json",observe:"response"}).toPromise().then(n=>n.body).catch(this.handleError)}handleError(t){return t.error instanceof ErrorEvent?console.error("An error occurred",t.error.message):console.error(`Backend returned code ${t.status}, body was: ${t.error}`),Promise.reject(t.error.message||t.message||t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();const zn=["myCanvas"];function Vn(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",17),e.TgZ(1,"table",18),e.TgZ(2,"thead"),e.TgZ(3,"tr"),e._UZ(4,"th",19),e.TgZ(5,"th",20),e._uU(6,"Nombre "),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Posici\xf3n X "),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Posici\xf3n Y "),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Radio "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"tbody"),e.TgZ(14,"tr",21),e.TgZ(15,"td",22),e.TgZ(16,"a",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().upsert()}),e._UZ(17,"i",23),e.qZA(),e.TgZ(18,"a",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancel()}),e._UZ(19,"i",24),e.qZA(),e.qZA(),e.TgZ(20,"td"),e.TgZ(21,"input",25),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().selected.name=i}),e.qZA(),e.qZA(),e.TgZ(22,"td"),e.TgZ(23,"input",26),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().selected.xPosition=i}),e.qZA(),e.qZA(),e.TgZ(24,"td"),e.TgZ(25,"input",27),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().selected.yPosition=i}),e.qZA(),e.qZA(),e.TgZ(26,"td"),e.TgZ(27,"input",28),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().selected.radio=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(21),e.Q6J("ngModel",t.selected.name),e.xp6(2),e.Q6J("ngModel",t.selected.xPosition),e.xp6(2),e.Q6J("ngModel",t.selected.yPosition),e.xp6(2),e.Q6J("ngModel",t.selected.radio)}}function Gn(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"a",6),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().delete(r)}),e._UZ(3,"i",29),e.qZA(),e.qZA(),e.TgZ(4,"td"),e.TgZ(5,"a",6),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().edit(r)}),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(6),e.Oqu(t.name),e.xp6(2),e.Oqu(t.xPosition),e.xp6(2),e.Oqu(t.yPosition),e.xp6(2),e.Oqu(t.radio)}}let Xn=(()=>{class o{constructor(t,n,i){this.activatedRoute=t,this.partsService=n,this.facesService=i,this.model="",this.view="",this.image="4runerFrontal",this.selected={id:-1,status:!1,face:"",name:"",xPosition:0,yPosition:0,radio:0,user:sessionStorage.getItem("user-name")},this.noveltiesImageBaseUrl=__noveltiesImageBaseUrl}ngOnInit(){const t=this.activatedRoute.snapshot.paramMap.get("face");this.loadFace(t),this.loadParts(t)}ngOnChanges(t){console.log(t)}add(){this.emptySelected(),this.selected.status=!0}emptySelected(){this.selected={id:-1,status:!1,face:this.activatedRoute.snapshot.paramMap.get("face"),name:"",xPosition:0,yPosition:0,radio:0,user:sessionStorage.getItem("user-name")}}edit(t){this.drawPart(t),this.selected=t,this.selected.face=this.activatedRoute.snapshot.paramMap.get("face"),this.selected.status=!0}upsert(){if(-1===this.selected.id)return this.insert();this.update()}insert(){this.selected.face=this.activatedRoute.snapshot.paramMap.get("face"),this.selected.status=!0,this.partsService.createPart(this.selected).then(t=>{if(!0===t.response.status)return this.emptySelected(),void this.ngOnInit();alert(t.response.error.message)}).catch(t=>{t.response.error?alert(t.response.error.message):alert("Error deconocido, revisar conexi\xf3n")})}update(){this.partsService.updatePart(this.selected).then(t=>{if(!0===t.response.status)return this.emptySelected(),void this.ngOnInit();alert(t.response.error.message)}).catch(t=>{t.response.error?alert(t.response.error.message):alert("Error deconocido, revisar conexi\xf3n")})}delete(t){confirm("\xbfSeguro que desea eliminar "+t.name+"?")&&this.partsService.deletePart(t.id).then(n=>{if(!0===n.response.status)return this.emptySelected(),void this.ngOnInit();alert(n.response.error.message)}).catch(n=>{n.response.error?alert(n.response.error.message):alert("Error deconocido, revisar conexi\xf3n")})}cancel(){this.draw(),this.selected.status=!1}loadParts(t){this.partsService.getParts(t).then(n=>{if(!0===n.response.status)return this.parts=n.parts,void this.draw();alert(n.response.error.message)}).catch(n=>{n.response.error?alert(n.response.error.message):alert("Error deconocido, revisar conexi\xf3n")})}loadFace(t){this.facesService.getFace(t).then(n=>{if(!0===n.response.status)return this.model=n.face.model,this.view=n.face.name,void(this.image=n.face.image);alert(n.response.error.message)}).catch(n=>{n.response.error?alert(n.response.error.message):alert("Error deconocido, revisar conexi\xf3n")})}drawPart(t){this.draw();const n=this.canvasRef.nativeElement.getContext("2d");n.beginPath(),n.fillStyle="#0000FF",n.moveTo(t.xPosition,t.yPosition),n.arc(t.xPosition/2.4,t.yPosition/2.4,t.radio/4,0,2*Math.PI,!1),n.fill()}draw(){const t=this.canvasRef.nativeElement.getContext("2d");t.beginPath(),t.clearRect(0,0,800,800),t.fillStyle="#FF000088",this.parts.forEach(n=>{t.moveTo(n.xPosition,n.yPosition),t.arc(n.xPosition/2.4,n.yPosition/2.4,n.radio/4,0,2*Math.PI,!1)}),t.fill()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.gz),e.Y36(re),e.Y36(R))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-part"]],viewQuery:function(t,n){if(1&t&&e.Gf(zn,5),2&t){let i;e.iGM(i=e.CRH())&&(n.canvasRef=i.first)}},features:[e._Bn([re,R]),e.TTD],decls:38,vars:6,consts:[[1,"ibox-title"],[1,"table","table-striped"],["width","20"],[3,"routerLink"],[1,"fa","fa-chevron-left"],[1,"ibox-content"],[3,"click"],[1,"fa","fa-plus-square"],[1,"table-responsive"],["class","ibox-edit",4,"ngIf"],["width","10px"],[4,"ngFor","ngForOf"],[1,"outsideWrapper"],[1,"insideWrapper"],["width","100%","height","auto",1,"coveredImage",3,"src"],[1,"coveringCanvas"],["myCanvas",""],[1,"ibox-edit"],[1,"table"],["width","30px"],["width","330px"],["name","upsertRow"],["width","40px"],[1,"fa","fa-save"],[1,"fa","fa-window-close"],["type","text","id","name","name","name","minlength","3","maxlength","50","placeholder","Nombre",2,"width","100%",3,"ngModel","ngModelChange"],["type","number","id","xPosition","name","xPosition","required","","minlength","1","maxlength","3","placeholder","Posici\xf3n X",1,"form-control",2,"width","50%",3,"ngModel","ngModelChange"],["type","number","id","yPosition","name","yPosition","required","","minlength","1","maxlength","3","placeholder","Posici\xf3n Y",1,"form-control",2,"width","50%",3,"ngModel","ngModelChange"],["type","number","id","radio","name","radio","required","","minlength","1","maxlength","2","placeholder","Radio",1,"form-control",2,"width","50%",3,"ngModel","ngModelChange"],[1,"fa","fa-trash"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"table",1),e.TgZ(2,"tr"),e.TgZ(3,"th",2),e.TgZ(4,"a",3),e._UZ(5,"i",4),e.qZA(),e.qZA(),e.TgZ(6,"th"),e.TgZ(7,"h5"),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"th"),e.TgZ(10,"h5"),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",5),e.TgZ(13,"a",6),e.NdJ("click",function(){return n.add()}),e._UZ(14,"i",7),e.qZA(),e.TgZ(15,"a",6),e.NdJ("click",function(){return n.add()}),e._uU(16,"Agregar"),e.qZA(),e.TgZ(17,"div",8),e.YNc(18,Vn,28,4,"div",9),e.TgZ(19,"table",1),e.TgZ(20,"thead"),e.TgZ(21,"tr"),e._UZ(22,"th",10),e.TgZ(23,"th"),e._uU(24,"Nombre "),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Posici\xf3n X "),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Posici\xf3n Y "),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Radio "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"tbody"),e.YNc(32,Gn,13,4,"tr",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",12),e.TgZ(34,"div",13),e._UZ(35,"img",14),e._UZ(36,"canvas",15,16),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.MGl("routerLink","/config/models/",n.model,""),e.xp6(4),e.hij("Modelo: ",n.model,""),e.xp6(3),e.hij("Vista: ",n.view,""),e.xp6(7),e.Q6J("ngIf",n.selected.status),e.xp6(14),e.Q6J("ngForOf",n.parts),e.xp6(3),e.MGl("src","",n.noveltiesImageBaseUrl+n.image,".jpg",e.LSH))},directives:[d.yS,g.O5,g.sg,c.Fj,c.wO,c.nD,c.JJ,c.On,c.wV,c.Q7],styles:[""]}),o})();const se=`${__apiBaseUrl}/track`,Wn=`${se}/patiosReport`,Kn=`${se}/patiosExcelReport`;let ce=(()=>{class o{constructor(t,n){this.http=t,this.downloadService=n}static handleError(t){return console.error("An error occurred",t),Promise.reject(t.error.message||t.message||t)}requestForPatiosReport(){return this.http.get(Wn,{responseType:"json"}).toPromise().then(t=>t).catch(o.handleError)}requestForPatiosExcelReport(){this.downloadService.downloadBlobFile(Kn,"ReportePatios.xlsx")}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN),e.LFG(B))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();function eo(o,a){if(1&o&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e.TgZ(2,"div",7),e.TgZ(3,"div"),e._uU(4),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.ekj("location-free",void 0===t.vehiculo)("location-occupied",void 0!==t.vehiculo)("location-hidden",t.ocultar),e.Q6J("triggers",void 0!==t.vehiculo?"mouseenter:mouseleave":"")("popoverTitle",null==t.vehiculo?null:t.vehiculo.descripcion)("popover","Color: "+(null==t.vehiculo?null:t.vehiculo.color)),e.xp6(3),e.Oqu(t.nombre),e.xp6(2),e.Oqu((null==t.vehiculo?null:t.vehiculo.chasis)||"Disponible")}}function to(o,a){if(1&o&&(e.TgZ(0,"div",1),e.TgZ(1,"div",2),e._uU(2),e.qZA(),e.TgZ(3,"div",3),e.YNc(4,eo,7,11,"div",4),e.qZA(),e.qZA()),2&o){const t=a.$implicit;e.xp6(2),e.Oqu(t.indice),e.xp6(2),e.Q6J("ngForOf",t.ubicaciones)}}let no=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-locations-rows-component"]],inputs:{locationsMap:"locationsMap"},decls:1,vars:1,consts:[["class","row locations-container",4,"ngFor","ngForOf"],[1,"row","locations-container"],[1,"index-item"],[1,"locations"],["class","col-md-2",4,"ngFor","ngForOf"],[1,"col-md-2"],[1,"location",3,"triggers","popoverTitle","popover"],[1,"content"]],template:function(t,n){1&t&&e.YNc(0,to,5,2,"div",0),2&t&&e.Q6J("ngForOf",n.locationsMap)},directives:[g.sg,U.k5],styles:[".locations-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:10px;margin-bottom:20px;padding:10px}.locations-container[_ngcontent-%COMP%]:not(:last-child){border-bottom-style:solid;border-width:1px;border-color:#e7eaec}.locations-container[_ngcontent-%COMP%] > .index-item[_ngcontent-%COMP%]{font-size:30px;width:45px;margin-left:10px;color:#fff;background-color:#bdbdbd;text-align:center;margin-right:10px}.locations-container[_ngcontent-%COMP%] > .locations[_ngcontent-%COMP%]{width:100%;margin-top:15px}.locations[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:15px;padding-left:10px;padding-right:10px}.location[_ngcontent-%COMP%]{height:60px;text-align:center}.location-free[_ngcontent-%COMP%]{background:#1BB183}.location-occupied[_ngcontent-%COMP%]{background:#EC5C67}.location-hidden[_ngcontent-%COMP%]{opacity:.2}.location[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{padding-top:11px;color:#fff}"]}),o})(),le=(()=>{class o{transform(t){return t.slice().reverse()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=e.Yjl({name:"reverse",type:o,pure:!0}),o})();function oo(o,a){if(1&o&&(e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw().$implicit;e.ekj("location-free",void 0===t.vehiculo)("location-occupied",void 0!==t.vehiculo)("location-hidden",t.ocultar),e.Q6J("triggers",void 0!==t.vehiculo?"mouseenter:mouseleave":"")("popoverTitle",null==t.vehiculo?null:t.vehiculo.descripcion)("popover","Color: "+(null==t.vehiculo?null:t.vehiculo.color)),e.xp6(3),e.Oqu(t.nombre),e.xp6(2),e.Oqu((null==t.vehiculo?null:t.vehiculo.chasis)||"Disponible")}}function io(o,a){1&o&&e._UZ(0,"div",10)}function ao(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,oo,6,11,"div",6),e.YNc(2,io,1,0,"div",7),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",!t.existe),e.xp6(1),e.Q6J("ngIf",t.existe)}}function ro(o,a){if(1&o&&(e.TgZ(0,"div",2),e.TgZ(1,"div",3),e._uU(2),e.qZA(),e.TgZ(3,"div",4),e.YNc(4,ao,3,2,"div",5),e.qZA(),e.qZA()),2&o){const t=a.$implicit,n=a.index;e.ekj("col-md-offset-1",(n+1)%3==0||0===n),e.xp6(2),e.Oqu(t.indice),e.xp6(2),e.Q6J("ngForOf",t.ubicaciones)}}let so=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-locations-columns-component"]],inputs:{locationsMap:"locationsMap"},decls:3,vars:3,consts:[[1,"row"],["class","locations-container col-md-2",3,"col-md-offset-1",4,"ngFor","ngForOf"],[1,"locations-container","col-md-2"],[1,"index-item"],[1,"locations"],[4,"ngFor","ngForOf"],["class","location",3,"triggers","popoverTitle","popover","location-free","location-occupied","location-hidden",4,"ngIf"],["class","location",4,"ngIf"],[1,"location",3,"triggers","popoverTitle","popover"],[1,"content"],[1,"location"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ro,5,4,"div",1),e.ALo(2,"reverse"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,n.locationsMap)))},directives:[g.sg,g.O5,U.k5],pipes:[le],styles:[".locations-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:10px;margin-bottom:20px}.locations-container[_ngcontent-%COMP%] > .index-item[_ngcontent-%COMP%]{font-size:30px;width:100%;text-align:center}.locations-container[_ngcontent-%COMP%] > .locations[_ngcontent-%COMP%]{width:100%}.locations[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:15px}.location[_ngcontent-%COMP%]{height:60px;text-align:center}.location-free[_ngcontent-%COMP%]{background:#1BB183}.location-occupied[_ngcontent-%COMP%]{background:#EC5C67}.location-hidden[_ngcontent-%COMP%]{opacity:.2}.location[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{padding-top:11px;color:#fff}"]}),o})();function co(o,a){if(1&o&&(e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",10),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw().$implicit;e.ekj("location-free",void 0===t.vehiculo)("location-occupied",void 0!==t.vehiculo)("location-hidden",t.ocultar),e.Q6J("triggers",void 0!==t.vehiculo?"mouseenter:mouseleave":"")("popoverTitle",null==t.vehiculo?null:t.vehiculo.descripcion)("popover","Color: "+(null==t.vehiculo?null:t.vehiculo.color)),e.xp6(3),e.Oqu(t.nombre),e.xp6(2),e.Oqu((null==t.vehiculo?null:t.vehiculo.chasis)||"Disponible")}}function lo(o,a){1&o&&e._UZ(0,"div",11)}function po(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,co,6,11,"div",6),e.YNc(2,lo,1,0,"div",7),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",!t.existe),e.xp6(1),e.Q6J("ngIf",t.existe)}}function go(o,a){if(1&o&&(e.TgZ(0,"div",2),e.TgZ(1,"div",3),e._uU(2),e.qZA(),e.TgZ(3,"div",4),e.YNc(4,po,3,2,"div",5),e.qZA(),e.qZA()),2&o){const t=a.$implicit;e.ekj("col-sm-offset-1",4===a.index),e.xp6(2),e.Oqu(t.indice),e.xp6(2),e.Q6J("ngForOf",t.ubicaciones)}}let uo=(()=>{class o{constructor(){this.maxRows=0}ngOnInit(){if(0===this.locationsMap.length)return;const t=JSON.parse(JSON.stringify(this.locationsMap));t.sort((n,i)=>n.ubicaciones.length<i.ubicaciones.length?1:n.ubicaciones.length>i.ubicaciones.length?-1:0),this.maxRows=t[0].ubicaciones.length}createRange(){const t=[];for(let n=1;n<=this.maxRows;n++)t.push(n);return t}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-locations-columns2-component"]],inputs:{locationsMap:"locationsMap"},decls:3,vars:3,consts:[[1,"row"],["class","locations-container col-md-1",3,"col-sm-offset-1",4,"ngFor","ngForOf"],[1,"locations-container","col-md-1"],[1,"index-item"],[1,"locations"],[4,"ngFor","ngForOf"],["class","location",3,"triggers","popoverTitle","popover","location-free","location-occupied","location-hidden",4,"ngIf"],["class","location",4,"ngIf"],[1,"location",3,"triggers","popoverTitle","popover"],[1,"content"],[2,"word-wrap","break-word"],[1,"location"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,go,5,4,"div",1),e.ALo(2,"reverse"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,n.locationsMap)))},directives:[g.sg,g.O5,U.k5],pipes:[le],styles:[".locations-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:10px;margin-bottom:20px;width:83pt}.locations-container[_ngcontent-%COMP%] > .index-item[_ngcontent-%COMP%]{font-size:30px;width:100%;text-align:center}.location[_ngcontent-%COMP%] > .index-item[_ngcontent-%COMP%]{font-size:30px;width:100%;text-align:center}.locations-container[_ngcontent-%COMP%] > .locations[_ngcontent-%COMP%]{width:100%}.locations[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:15px}.location[_ngcontent-%COMP%]{height:60px;text-align:center}.location-free[_ngcontent-%COMP%]{background:#1BB183}.location-occupied[_ngcontent-%COMP%]{background:#EC5C67}.location-hidden[_ngcontent-%COMP%]{opacity:.2}.location[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{padding-top:11px;color:#fff;font-size:9pt}"]}),o})();function _o(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",28),e._UZ(2,"app-locations-rows-component",29),e.qZA(),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("locationsMap",t.mapaUbicaciones)}}function mo(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",28),e._UZ(2,"app-locations-columns-component",29),e.qZA(),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("locationsMap",t.mapaUbicaciones)}}function ho(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",28),e._UZ(2,"app-locations-columns2-component",29),e.qZA(),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("locationsMap",t.mapaUbicaciones)}}function Zo(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().onPatioRowClick(r)}),e.TgZ(1,"td",23),e._UZ(2,"span",24),e._uU(3),e.qZA(),e.TgZ(4,"td",25),e.TgZ(5,"b"),e._uU(6,"Libres:"),e.qZA(),e._uU(7),e.qZA(),e.TgZ(8,"td",25),e.TgZ(9,"b"),e._uU(10,"Ocupadas:"),e.qZA(),e._uU(11),e.qZA(),e.TgZ(12,"td",26),e.TgZ(13,"b"),e._uU(14,"Total:"),e.qZA(),e._uU(15),e.qZA(),e.qZA(),e.YNc(16,_o,3,1,"tr",27),e.YNc(17,mo,3,1,"tr",27),e.YNc(18,ho,3,1,"tr",27)}if(2&o){const t=a.$implicit,n=a.odd;e.Tol(t.mostrarUbicaciones?"footable-even footable-detail-show":"footable-even"),e.Q6J("ngClass",n?"footable-odd":"footable-even"),e.xp6(3),e.hij(" ",t.nombre," "),e.xp6(4),e.hij(" ",t.libres," "),e.xp6(4),e.hij(" ",t.ocupadas," "),e.xp6(4),e.hij(" ",t.total," "),e.xp6(1),e.Q6J("ngIf",t.mostrarUbicaciones&&"filas"===t.distribucionUbicaciones),e.xp6(1),e.Q6J("ngIf",t.mostrarUbicaciones&&"columnas"===t.distribucionUbicaciones),e.xp6(1),e.Q6J("ngIf",t.mostrarUbicaciones&&"columnas2"===t.distribucionUbicaciones)}}let fo=(()=>{class o{constructor(t){this.patioReportService=t,this.showAllLocationsText="Mostrar todas las ubicaciones",this.hideLocationsText="Ocultar ubicaciones",this.showOrHideLocationsButtonText=this.showAllLocationsText,this.isShowingAllLocations=!1}ngOnInit(){this.loadPatios()}onSearchButtonClick(t){t=t.trim().toUpperCase(),this.isInvalidQuery(t)?this.resetPatiosState():(this.resetShowOrHideLocationsButton(),this.handleSearchRequest(t))}onShowAllLocationsButtonClick(){this.toggleLocationsButtonText(),this.isShowingAllLocations=!this.isShowingAllLocations,this.patios.forEach(t=>t.mostrarUbicaciones=this.isShowingAllLocations)}onPatioRowClick(t){t.mostrarUbicaciones=!t.mostrarUbicaciones,this.showLocationsIfApply()}onDeleteTextButtonClick(t){t.value="",t.focus(),this.resetShowOrHideLocationsButton(),this.resetPatiosState()}onRefreshTextButtonClick(){this.loadPatios()}onExportAsExcelButtonClick(){this.patioReportService.requestForPatiosExcelReport()}loadPatios(){this.patioReportService.requestForPatiosReport().then(t=>this.patios=t)}isInvalidQuery(t){return 0===t.length}resetPatiosState(){this.patios.forEach(t=>{t.mostrarUbicaciones=!1,t.mapaUbicaciones.forEach(n=>n.ubicaciones.forEach(i=>i.ocultar=!1))})}resetShowOrHideLocationsButton(){this.setShowAllLocationsText(),this.isShowingAllLocations=!1}handleSearchRequest(t){let n=null;this.patios.some((i,r)=>(n=this.searchVehiclePosition(t,i.mapaUbicaciones,r),n.isNotEmpty())),this.updatePatios(n)}searchVehiclePosition(t,n,i){const r=new To;return n.some((s,p)=>s.ubicaciones.some((l,u)=>null!=l.vehiculo&&(l.vehiculo.chasis.indexOf(t)>=0?(r.patioIndex=i,r.locationMapIndex=p,r.locationIndex=u,r.isNotEmpty()):void 0))),r}updatePatios(t){t.isNotEmpty()?this.hideLocations(t):this.resetPatiosState()}hideLocations(t){this.patios.forEach((n,i)=>n.mapaUbicaciones.forEach((r,s)=>r.ubicaciones.forEach((p,l)=>{t.patioIndex!==i||t.locationMapIndex!==s||t.locationIndex!==l?p.ocultar=!0:(n.mostrarUbicaciones=!0,p.ocultar=!1),t.patioIndex!==i&&(n.mostrarUbicaciones=!1)})))}toggleLocationsButtonText(){this.isShowingAllLocations?this.setShowAllLocationsText():this.setHideLocationsText()}setShowAllLocationsText(){this.showOrHideLocationsButtonText=this.showAllLocationsText}setHideLocationsText(){this.showOrHideLocationsButtonText=this.hideLocationsText}showLocationsIfApply(){const t=this.patios.length;let n=0;this.patios.forEach(i=>{i.mostrarUbicaciones&&n++}),t===n?(this.setHideLocationsText(),this.isShowingAllLocations=!0):(this.setShowAllLocationsText(),this.isShowingAllLocations=!1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ce))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-patios-report"]],features:[e._Bn([ce])],decls:35,vars:2,consts:[[1,"wrapper","wrapper-content"],[1,"row"],[1,"col-lg-12"],[1,"ibox","float-e-margins"],[1,"ibox-title"],[1,"ibox-content"],[1,"col-sm-4"],[1,"input-group"],["type","text","minlength","4","maxlength","24",1,"input-sm","form-control",3,"keyup"],["search",""],[1,"input-group-btn"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-close"],[1,"col-sm-3"],[1,"fa","fa-refresh"],[1,"fa","fa-file-excel-o"],[1,"col-sm-5"],[1,"input-group","pull-right"],["type","submit",1,"btn","btn-sm","btn-default",3,"click"],[1,"footable","table"],["colspan","3"],["ngFor","",3,"ngForOf"],[3,"ngClass","click"],[1,"footable-visible","footable-first-column"],[1,"footable-toggle"],[1,"footable-visible"],[1,"footable-visible","footable-last-column"],[4,"ngIf"],["colspan","100%",1,"locations-rows"],[3,"locationsMap"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h5"),e._uU(6,"Reporte de Patios"),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",1),e.TgZ(9,"div",6),e.TgZ(10,"form"),e.TgZ(11,"div",7),e.TgZ(12,"input",8,9),e.NdJ("keyup",function(){e.CHM(i);const s=e.MAs(13);return n.onSearchButtonClick(s.value)}),e.qZA(),e.TgZ(14,"span",10),e.TgZ(15,"button",11),e.NdJ("click",function(){e.CHM(i);const s=e.MAs(13);return n.onDeleteTextButtonClick(s)}),e._UZ(16,"i",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",13),e.TgZ(18,"button",11),e.NdJ("click",function(){return n.onRefreshTextButtonClick()}),e._UZ(19,"i",14),e.qZA(),e.TgZ(20,"button",11),e.NdJ("click",function(){return n.onExportAsExcelButtonClick()}),e._UZ(21,"i",15),e.qZA(),e.qZA(),e.TgZ(22,"div",16),e.TgZ(23,"div",17),e.TgZ(24,"button",18),e.NdJ("click",function(){return n.onShowAllLocationsButtonClick()}),e._uU(25),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"table",19),e.TgZ(27,"thead"),e.TgZ(28,"tr"),e.TgZ(29,"th"),e._uU(30,"Patio"),e.qZA(),e.TgZ(31,"th",20),e._uU(32,"Detalle"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"tbody"),e.YNc(34,Zo,19,10,"ng-template",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(25),e.hij(" ",n.showOrHideLocationsButtonText,""),e.xp6(9),e.Q6J("ngForOf",n.patios))},directives:[c._Y,c.JL,c.F,g.sg,g.mk,g.O5,no,so,uo],styles:['@font-face{font-family:"footable";src:url(footable.eot);src:url(footable.eot?#iefix) format("embedded-opentype"),url(footable.woff) format("woff"),url(footable.ttf) format("truetype"),url(footable.svg#footable) format("svg");font-weight:normal;font-style:normal}@media screen and (-webkit-min-device-pixel-ratio: 0){@font-face{font-family:"footable";src:url(http://webapplayers.com/inspinia_admin-v2.9.2/css/plugins/footable/fonts/footable.svg#footable) format("svg");font-weight:normal;font-style:normal}}.footable[_ngcontent-%COMP%]{width:100%}.footable.breakpoint[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-bottom:none}.footable.breakpoint[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e001"}.footable.breakpoint[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover:not(.footable-row-detail){cursor:pointer}.footable.breakpoint[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.footable-cell-detail[_ngcontent-%COMP%]{background:#eee;border-top:none}.footable.breakpoint[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]{display:inline-block;font-family:"footable";speak:none;font-style:normal;font-weight:normal;font-feature-settings:normal;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;padding-right:5px;font-size:14px;color:#888}.footable.breakpoint[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e000"}.footable.breakpoint.toggle-circle[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e005"}.footable.breakpoint.toggle-circle[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e004"}.footable.breakpoint.toggle-circle-filled[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e003"}.footable.breakpoint.toggle-circle-filled[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e002"}.footable.breakpoint.toggle-square[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e007"}.footable.breakpoint.toggle-square[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e006"}.footable.breakpoint.toggle-square-filled[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e009"}.footable.breakpoint.toggle-square-filled[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e008"}.footable.breakpoint.toggle-arrow[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e00f"}.footable.breakpoint.toggle-arrow[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e011"}.footable.breakpoint.toggle-arrow-small[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e013"}.footable.breakpoint.toggle-arrow-small[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e015"}.footable.breakpoint.toggle-arrow-circle[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e01b"}.footable.breakpoint.toggle-arrow-circle[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e01d"}.footable.breakpoint.toggle-arrow-circle-filled[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e00b"}.footable.breakpoint.toggle-arrow-circle-filled[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e00d"}.footable.breakpoint.toggle-arrow-tiny[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e01f"}.footable.breakpoint.toggle-arrow-tiny[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e021"}.footable.breakpoint.toggle-arrow-alt[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e017"}.footable.breakpoint.toggle-arrow-alt[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e019"}.footable.breakpoint.toggle-medium[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]{font-size:18px}.footable.breakpoint.toggle-large[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]{font-size:24px}.footable[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:-moz-none;user-select:none}.footable[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th.footable-sortable[_ngcontent-%COMP%]:hover{cursor:pointer}.footable[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th.footable-sorted[_ngcontent-%COMP%] > span.footable-sort-indicator[_ngcontent-%COMP%]:before{content:"\\e013"}.footable[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th.footable-sorted-desc[_ngcontent-%COMP%] > span.footable-sort-indicator[_ngcontent-%COMP%]:before{content:"\\e012"}.footable[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%] > span.footable-sort-indicator[_ngcontent-%COMP%]{display:inline-block;font-family:"footable";speak:none;font-style:normal;font-weight:normal;font-feature-settings:normal;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;padding-left:5px}.footable[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%] > span.footable-sort-indicator[_ngcontent-%COMP%]:before{content:"\\e022"}.footable[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{margin:0}.footable.no-paging[_ngcontent-%COMP%]   .hide-if-no-paging[_ngcontent-%COMP%]{display:none}.footable-row-detail-inner[_ngcontent-%COMP%]{display:table}.footable-row-detail-row[_ngcontent-%COMP%]{display:table-row;line-height:1.5em}.footable-row-detail-group[_ngcontent-%COMP%]{display:block;line-height:2em;font-size:1.2em;font-weight:bold}.footable-row-detail-name[_ngcontent-%COMP%]{display:table-cell;font-weight:bold;padding-right:.5em}.footable-row-detail-value[_ngcontent-%COMP%]{display:table-cell}.footable-odd[_ngcontent-%COMP%]{background-color:#f7f7f7}',".footable[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:18px}.footable[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;background:#1D5493;color:#fff}.footable[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.locations-rows[_ngcontent-%COMP%]{font-size:14px;background:white;color:#000}.footable-toggle[_ngcontent-%COMP%]{font-size:15px!important;color:#fff!important}.footable[_ngcontent-%COMP%]   .detail-container[_ngcontent-%COMP%]{font-size:14px}"]}),o})();class To{isNotEmpty(){return void 0!==this.patioIndex||void 0!==this.locationIndex}}const pe=`${__apiBaseUrl}/track`,bo=`${pe}/specialLocations`,vo=`${pe}/carsBySpecialLocation`;let ge=(()=>{class o{constructor(t,n){this.http=t,this.downloadService=n}static handleError(t){return console.error("An error occurred",t),Promise.reject(t.error.message||t.message||t)}findAllSpecialLocations(){return this.http.get(bo,{responseType:"json"}).toPromise().then(t=>t).catch(o.handleError)}findCars(t){const n=this.createCarsBySpecialLocationUrl(t);return this.http.get(n,{responseType:"json"}).toPromise().then(i=>i).catch(o.handleError)}requestForExcelReport(t){const n=this.createCarsBySpecialLocationUrl(t);this.downloadService.downloadBlobFile(n.concat("&type=excel"),"ReporteUbicacionesEspeciales.xlsx")}createCarsBySpecialLocationUrl(t){let n=vo+"?codigo="+t.specialLocation;return void 0!==t.chassis&&(n+="&chasis="+t.chassis),n}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN),e.LFG(B))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();class qo{constructor(){this.specialLocation=""}}function Co(o,a){if(1&o&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.codigo)}}function Ao(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.qZA()),2&o){const t=a.$implicit;e.xp6(2),e.Oqu(t.ubicacion),e.xp6(2),e.Oqu(t.chasis),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(t.color)}}let Mo=(()=>{class o{constructor(t){this.specialLocationsService=t,this.specialLocationDefaultValue="",this.carsRequest=new qo,this.totalOfVehicles=0}ngOnInit(){this.specialLocationsService.findAllSpecialLocations().then(t=>this.specialLocations=t)}onSearchSubmit(){this.isValidCarRequest()?this.specialLocationsService.findCars(this.carsRequest).then(t=>this.loadCars(t)):alert("Debe escoger una ubicaci\xf3n especial")}onExportAsExcelButtonClick(){this.isValidCarRequest()&&this.specialLocationsService.requestForExcelReport(this.carsRequest)}isValidCarRequest(){return this.carsRequest.specialLocation!==this.specialLocationDefaultValue}loadCars(t){this.cars=t,this.totalOfVehicles=t.length}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ge))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-special-component"]],features:[e._Bn([ge])],decls:50,vars:7,consts:[[1,"wrapper","wrapper-content"],[1,"row"],[1,"col-lg-12"],[1,"ibox","float-e-margins"],[1,"ibox-title"],[1,"ibox-content"],[3,"ngSubmit"],[1,"row","form-group"],[1,"col-sm-2"],["name","specialLocation","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"defaultSelected"],["value","TODAS"],[4,"ngFor","ngForOf"],[1,"col-sm-3"],["name","chassis","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-4"],["type","submit",1,"btn","btn-sm","btn-primary"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-file-excel-o"],[1,"col-sm-2",2,"text-align","right"],[2,"color","red"],["id","special-locations-table-container",1,"row"],[1,"table","table-striped","table-responsive"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h5"),e._uU(6,"Reporte de Ubicaciones Especiales"),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"form",6),e.NdJ("ngSubmit",function(){return n.onSearchSubmit()}),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"label"),e._uU(12,"Ubicaci\xf3n especial"),e.qZA(),e.TgZ(13,"select",9),e.NdJ("ngModelChange",function(r){return n.carsRequest.specialLocation=r}),e.TgZ(14,"option",10),e._uU(15),e.qZA(),e.TgZ(16,"option",11),e._uU(17,"TODAS"),e.qZA(),e.YNc(18,Co,2,1,"option",12),e.qZA(),e.qZA(),e.TgZ(19,"div",13),e.TgZ(20,"label"),e._uU(21,"Chasis"),e.qZA(),e.TgZ(22,"input",14),e.NdJ("ngModelChange",function(r){return n.carsRequest.chassis=r}),e.qZA(),e.qZA(),e.TgZ(23,"div",15),e._UZ(24,"br"),e.TgZ(25,"div"),e.TgZ(26,"button",16),e._uU(27,"Buscar"),e.qZA(),e.TgZ(28,"button",17),e.NdJ("click",function(){return n.onExportAsExcelButtonClick()}),e._UZ(29,"i",18),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",19),e.TgZ(31,"h5"),e._uU(32,"Veh\xedculos: "),e.TgZ(33,"span",20),e._uU(34),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(35,"hr"),e.TgZ(36,"div",21),e.TgZ(37,"table",22),e.TgZ(38,"thead"),e.TgZ(39,"tr"),e.TgZ(40,"th"),e._uU(41,"Ubicacion"),e.qZA(),e.TgZ(42,"th"),e._uU(43,"Chasis"),e.qZA(),e.TgZ(44,"th"),e._uU(45,"Descripcion"),e.qZA(),e.TgZ(46,"th"),e._uU(47,"Color"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"tbody"),e.YNc(49,Ao,9,4,"tr",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(13),e.Q6J("ngModel",n.carsRequest.specialLocation),e.xp6(1),e.Q6J("defaultSelected",!0),e.xp6(1),e.Oqu(n.specialLocationDefaultValue),e.xp6(3),e.Q6J("ngForOf",n.specialLocations),e.xp6(4),e.Q6J("ngModel",n.carsRequest.chassis),e.xp6(12),e.Oqu(n.totalOfVehicles),e.xp6(15),e.Q6J("ngForOf",n.cars))},directives:[c._Y,c.JL,c.F,c.EJ,c.Q7,c.JJ,c.On,c.YN,c.Kr,g.sg,c.Fj],styles:['@font-face{font-family:"footable";src:url(footable.eot);src:url(footable.eot?#iefix) format("embedded-opentype"),url(footable.woff) format("woff"),url(footable.ttf) format("truetype"),url(footable.svg#footable) format("svg");font-weight:normal;font-style:normal}@media screen and (-webkit-min-device-pixel-ratio: 0){@font-face{font-family:"footable";src:url(http://webapplayers.com/inspinia_admin-v2.9.2/css/plugins/footable/fonts/footable.svg#footable) format("svg");font-weight:normal;font-style:normal}}.footable[_ngcontent-%COMP%]{width:100%}.footable.breakpoint[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border-bottom:none}.footable.breakpoint[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e001"}.footable.breakpoint[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:hover:not(.footable-row-detail){cursor:pointer}.footable.breakpoint[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.footable-cell-detail[_ngcontent-%COMP%]{background:#eee;border-top:none}.footable.breakpoint[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]{display:inline-block;font-family:"footable";speak:none;font-style:normal;font-weight:normal;font-feature-settings:normal;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;padding-right:5px;font-size:14px;color:#888}.footable.breakpoint[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e000"}.footable.breakpoint.toggle-circle[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e005"}.footable.breakpoint.toggle-circle[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e004"}.footable.breakpoint.toggle-circle-filled[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e003"}.footable.breakpoint.toggle-circle-filled[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e002"}.footable.breakpoint.toggle-square[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e007"}.footable.breakpoint.toggle-square[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e006"}.footable.breakpoint.toggle-square-filled[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e009"}.footable.breakpoint.toggle-square-filled[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e008"}.footable.breakpoint.toggle-arrow[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e00f"}.footable.breakpoint.toggle-arrow[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e011"}.footable.breakpoint.toggle-arrow-small[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e013"}.footable.breakpoint.toggle-arrow-small[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e015"}.footable.breakpoint.toggle-arrow-circle[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e01b"}.footable.breakpoint.toggle-arrow-circle[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e01d"}.footable.breakpoint.toggle-arrow-circle-filled[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e00b"}.footable.breakpoint.toggle-arrow-circle-filled[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e00d"}.footable.breakpoint.toggle-arrow-tiny[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e01f"}.footable.breakpoint.toggle-arrow-tiny[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e021"}.footable.breakpoint.toggle-arrow-alt[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.footable-detail-show[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e017"}.footable.breakpoint.toggle-arrow-alt[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]:before{content:"\\e019"}.footable.breakpoint.toggle-medium[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]{font-size:18px}.footable.breakpoint.toggle-large[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%] > span.footable-toggle[_ngcontent-%COMP%]{font-size:24px}.footable[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:-moz-none;user-select:none}.footable[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th.footable-sortable[_ngcontent-%COMP%]:hover{cursor:pointer}.footable[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th.footable-sorted[_ngcontent-%COMP%] > span.footable-sort-indicator[_ngcontent-%COMP%]:before{content:"\\e013"}.footable[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th.footable-sorted-desc[_ngcontent-%COMP%] > span.footable-sort-indicator[_ngcontent-%COMP%]:before{content:"\\e012"}.footable[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%] > span.footable-sort-indicator[_ngcontent-%COMP%]{display:inline-block;font-family:"footable";speak:none;font-style:normal;font-weight:normal;font-feature-settings:normal;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;padding-left:5px}.footable[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%] > span.footable-sort-indicator[_ngcontent-%COMP%]:before{content:"\\e022"}.footable[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{margin:0}.footable.no-paging[_ngcontent-%COMP%]   .hide-if-no-paging[_ngcontent-%COMP%]{display:none}.footable-row-detail-inner[_ngcontent-%COMP%]{display:table}.footable-row-detail-row[_ngcontent-%COMP%]{display:table-row;line-height:1.5em}.footable-row-detail-group[_ngcontent-%COMP%]{display:block;line-height:2em;font-size:1.2em;font-weight:bold}.footable-row-detail-name[_ngcontent-%COMP%]{display:table-cell;font-weight:bold;padding-right:.5em}.footable-row-detail-value[_ngcontent-%COMP%]{display:table-cell}.footable-odd[_ngcontent-%COMP%]{background-color:#f7f7f7}',".ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}#special-locations-table-container[_ngcontent-%COMP%]{padding:0 15px 15px}"]}),o})();const xo=`${__apiBaseUrl}/track/binnaclesReport`;let de=(()=>{class o{constructor(t,n){this.http=t,this.downloadService=n}static handleError(t){return console.error("An error occurred",t),Promise.reject(t.error.message||t.message||t)}requestForBinnaclesExcelReport(t){let n=this.buildRequestUrl(t);n+=n.includes("?")?"&type=excel":"?type=excel",this.downloadService.downloadBlobFile(n,"ReporteBit\xe1coras.xlsx")}findAllBinnacles(t){const n=this.buildRequestUrl(t);return this.http.get(n,{responseType:"json"}).toPromise().then(i=>i).catch(o.handleError)}buildRequestUrl(t){const r=t.since,s=t.until;return`${xo}/${t.username}?${this.concatChassisIfApply(t.chassis)}${this.concatSinceIfApply(r)}${this.concatUntilIfApply(s)}`}concatChassisIfApply(t){return void 0!==t&&t.trim().length>0?`&chasis=${t}`:""}concatSinceIfApply(t){return null!=t?`&desde=${this.formatDate(t.singleDate.jsDate)}`:""}concatUntilIfApply(t){if(null!=t){const n=t.singleDate.jsDate,i=n.getDate()+1;return n.setDate(i),`&hasta=${this.formatDate(n)}`}return""}formatDate(t){return`${this.pad(t.getFullYear())}-${this.pad(t.getMonth()+1)}-${this.pad(t.getDate())}`}pad(t){return t<10?`0${t}`:t}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN),e.LFG(B))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();class ko{}var Q=h(7233);function Oo(o,a){if(1&o&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function yo(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(21).clearDate()}),e._UZ(1,"i",35),e.qZA()}}function Uo(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(32).clearDate()}),e._UZ(1,"i",35),e.qZA()}}function Po(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.qZA()),2&o){const t=a.$implicit;e.xp6(2),e.Oqu(t.chasis),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(t.color),e.xp6(2),e.Oqu(t.evento),e.xp6(2),e.Oqu(t.posicion_ninera),e.xp6(2),e.Oqu(t.conductor),e.xp6(2),e.Oqu(t.guia),e.xp6(2),e.Oqu(t.usuario),e.xp6(2),e.Oqu(t.fecha_hora_creacion),e.xp6(2),e.Oqu(t.observacion)}}let wo=(()=>{class o{constructor(t){this.binnaclesReportService=t,this.usernames=["","TODOS","SEGURIDAD1","SEGURIDAD2"],this.binnaclesRequest=new ko,this.myDatePickerOptions={dateFormat:"dd/mm/yyyy",dateRange:!1,showFooterToday:!0}}onSearchButtonClick(){this.isValidRequest()?this.binnaclesReportService.findAllBinnacles(this.binnaclesRequest).then(t=>this.handleBinnaclesResponse(t)):alert("Debe seleccionar un usuario")}onExcelButtonClick(){void 0!==this.binnaclesRequest.username&&this.binnaclesRequest.username.length&&this.binnaclesReportService.requestForBinnaclesExcelReport(this.binnaclesRequest)}isValidRequest(){return this.isValidUsername()}isValidUsername(){const t=this.binnaclesRequest.username;return void 0!==t&&t.length>0}handleBinnaclesResponse(t){t.length>0?this.binnacles=t:alert("No se encontraron resultados")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(de))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],features:[e._Bn([de])],decls:77,vars:15,consts:[[1,"wrapper","wrapper-content"],[1,"row"],[1,"col-lg-12"],[1,"ibox","float-e-margins"],[1,"ibox-title"],[1,"ibox-content"],[3,"ngSubmit"],["searchBinnacleForm","ngForm"],[1,"row","form-group"],[1,"col-sm-2"],["name","username",1,"form-control",3,"ngModel","required","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","dateFrom"],["name","fromDate-input",1,"input-group"],["name","dateFrom","placeholder","Ingrese una fecha","angular-mydatepicker","","required","",1,"form-control",3,"ngModel","options","locale","ngModelChange"],["dp_from","angular-mydatepicker"],[1,"input-group-btn"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fa","fa-calendar-o"],["for","dateTo"],[1,"input-group"],["name","dateTo","placeholder","Ingrese una fecha","angular-mydatepicker","","required","",1,"form-control",3,"ngModel","options","locale","ngModelChange"],["dp_to","angular-mydatepicker"],[1,"col-sm-3"],["for","chassis"],["name","chassis","type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-file-excel-o"],["id","binnacles-table-container",1,"row"],[3,"itemSize"],[1,"table","table-striped","table-responsive"],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"value"],[1,"fa","fa-close"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h5"),e._uU(6,"Reporte de Bit\xe1coras"),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"form",6,7),e.NdJ("ngSubmit",function(){return n.onSearchButtonClick()}),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.TgZ(12,"label"),e._uU(13,"Usuario"),e.qZA(),e.TgZ(14,"select",10),e.NdJ("ngModelChange",function(s){return n.binnaclesRequest.username=s}),e.YNc(15,Oo,2,2,"option",11),e.qZA(),e.qZA(),e.TgZ(16,"div",9),e.TgZ(17,"label",12),e._uU(18,"Desde"),e.qZA(),e.TgZ(19,"div",13),e.TgZ(20,"input",14,15),e.NdJ("ngModelChange",function(s){return n.binnaclesRequest.since=s}),e.qZA(),e.TgZ(22,"span",16),e.YNc(23,yo,2,0,"button",17),e.qZA(),e.TgZ(24,"span",16),e.TgZ(25,"button",18),e.NdJ("click",function(){return e.CHM(i),e.MAs(21).toggleCalendar()}),e._UZ(26,"i",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",9),e.TgZ(28,"label",20),e._uU(29,"Hasta"),e.qZA(),e.TgZ(30,"div",21),e.TgZ(31,"input",22,23),e.NdJ("ngModelChange",function(s){return n.binnaclesRequest.until=s}),e.qZA(),e.TgZ(33,"span",16),e.YNc(34,Uo,2,0,"button",17),e.qZA(),e.TgZ(35,"span",16),e.TgZ(36,"button",18),e.NdJ("click",function(){return e.CHM(i),e.MAs(32).toggleCalendar()}),e._UZ(37,"i",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",24),e.TgZ(39,"label",25),e._uU(40,"Chasis"),e.qZA(),e.TgZ(41,"input",26),e.NdJ("ngModelChange",function(s){return n.binnaclesRequest.chassis=s}),e.qZA(),e.qZA(),e.TgZ(42,"div",24),e._UZ(43,"br"),e.TgZ(44,"div"),e.TgZ(45,"button",27),e._uU(46," Buscar "),e.qZA(),e.TgZ(47,"button",28),e.NdJ("click",function(){return n.onExcelButtonClick()}),e._UZ(48,"i",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(49,"hr"),e.TgZ(50,"div",30),e.TgZ(51,"cdk-virtual-scroll-viewport",31),e.TgZ(52,"table",32),e.TgZ(53,"thead"),e.TgZ(54,"tr"),e.TgZ(55,"th"),e._uU(56,"Chasis"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"Descripcion"),e.qZA(),e.TgZ(59,"th"),e._uU(60,"Color"),e.qZA(),e.TgZ(61,"th"),e._uU(62,"Evento"),e.qZA(),e.TgZ(63,"th"),e._uU(64,"Posicion ni\xf1era"),e.qZA(),e.TgZ(65,"th"),e._uU(66,"Conductor"),e.qZA(),e.TgZ(67,"th"),e._uU(68,"Guia"),e.qZA(),e.TgZ(69,"th"),e._uU(70,"Usuario"),e.qZA(),e.TgZ(71,"th"),e._uU(72,"Fecha hora creaci\xf3n"),e.qZA(),e.TgZ(73,"th"),e._uU(74,"Observaci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(75,"tbody"),e.YNc(76,Po,21,10,"tr",33),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const i=e.MAs(9);e.xp6(14),e.Q6J("ngModel",n.binnaclesRequest.username)("required",!0),e.xp6(1),e.Q6J("ngForOf",n.usernames),e.xp6(5),e.Q6J("ngModel",n.binnaclesRequest.since)("options",n.myDatePickerOptions)("locale","es"),e.xp6(3),e.Q6J("ngIf",n.binnaclesRequest.since),e.xp6(8),e.Q6J("ngModel",n.binnaclesRequest.until)("options",n.myDatePickerOptions)("locale","es"),e.xp6(3),e.Q6J("ngIf",n.binnaclesRequest.until),e.xp6(7),e.Q6J("ngModel",n.binnaclesRequest.chassis),e.xp6(4),e.Q6J("disabled",i.form.invalid),e.xp6(6),e.Q6J("itemSize",20),e.xp6(25),e.Q6J("cdkVirtualForOf",n.binnacles)}},directives:[c._Y,c.JL,c.F,c.EJ,c.JJ,c.On,c.Q7,g.sg,c.Fj,y.w_,g.O5,Q.N7,Q.xd,Q.x0,c.YN,c.Kr],styles:[".ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}#binnacles-table-container[_ngcontent-%COMP%]{padding:0 15px 15px}table[_ngcontent-%COMP%]{width:100%}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:800px}"]}),o})();const J=`${__apiBaseUrl}/smb-repository`;let Y=(()=>{class o{constructor(t){this.http=t}getElements(t){return this.http.get(t?`${J}?path=${t}`:J,{responseType:"json"}).toPromise().then(i=>i)}deleteElement(t,n){return this.http.request("delete",J,{observe:"response",body:{path:t?`${t}${n.name}`:n.name}}).toPromise().then(r=>r.ok)}renameElement(t,n){const i=this.buildRenamePaths(t,n);return this.http.patch(J,i,{observe:"response"}).toPromise().then(r=>r.ok)}addFiles(t,n){const i=t||"/",r=n.map(s=>this.mapFileHandleToHttpPost(i,s));return Promise.all(r)}downloadFile(t,n){window.location.href=`${J}/file?path=${t?`${t}${n.name}`:`${n.name}`}`}buildRenamePaths(t,n){return t?{oldPath:`${t}${n.element.name}`,newPath:`${t}${n.newName}`}:{oldPath:`/${n.element.name}`,newPath:`/${n.newName}`}}mapFileHandleToHttpPost(t,n){const{file:i}=n,r=this.buildAddFileFormData(t,i);return this.http.post(J,r,{observe:"response"}).toPromise().then(s=>s.ok)}buildAddFileFormData(t,n){const i=new FormData;return i.append("destination",t),i.append("file",n),i}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();function Fo(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"i",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().navigateUp()}),e.qZA()}}let ue=(()=>{class o{constructor(){this.navigatedUp=new e.vpe,this.onRefresh=new e.vpe}navigateUp(){this.navigatedUp.emit()}refresh(){this.onRefresh.emit()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-file-nav-bar"]],inputs:{canNavigateUp:"canNavigateUp",path:"path"},outputs:{navigatedUp:"navigatedUp",onRefresh:"onRefresh"},decls:6,vars:2,consts:[["id","file-nav-bar"],["class","fa fa-arrow-left",3,"click",4,"ngIf"],["id","reload",1,"btn","btn-primary",3,"click"],[1,"fa","fa-refresh"],[1,"fa","fa-arrow-left",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2"),e.YNc(2,Fo,1,0,"i",1),e._uU(3),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return n.refresh()}),e._UZ(5,"i",3),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",n.canNavigateUp),e.xp6(1),e.hij(" ",n.path,""))},directives:[g.O5],styles:["#file-nav-bar[_ngcontent-%COMP%]{padding:1vw;display:flex}#file-nav-bar[_ngcontent-%COMP%]   #reload[_ngcontent-%COMP%]{align-self:center;margin-left:auto}#file-nav-bar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}"]}),o})();var S=h(6101),_e=h(9441),Ro=h(8059);let Jo=(()=>{class o{constructor(t){this.sanitizer=t,this.droppedFiles=new e.vpe,this.border="none",this.opacity="1"}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.border="1px dotted",this.opacity="0.5"}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.border="none",this.opacity="1"}onDrop(t){t.preventDefault(),t.stopPropagation(),this.border="none",this.opacity="1";const n=[];for(let i=0;i<t.dataTransfer.files.length;i++){const r=t.dataTransfer.files[i],s=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(r));n.push({file:r,url:s})}n.length>0&&this.droppedFiles.emit(n)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T.H7))},o.\u0275dir=e.lG2({type:o,selectors:[["","appDropFile",""]],hostVars:4,hostBindings:function(t,n){1&t&&e.NdJ("dragover",function(r){return n.onDragOver(r)})("dragleave",function(r){return n.onDragLeave(r)})("drop",function(r){return n.onDrop(r)}),2&t&&e.Udp("border",n.border)("opacity",n.opacity)},outputs:{droppedFiles:"droppedFiles"}}),o})();const No=["renameModal"];function Do(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"label"),e._uU(3,"Renombrar: "),e.qZA(),e.TgZ(4,"input",3),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().name=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSaveButtonPressed()}),e._uU(7,"Guardar"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.name)}}let So=(()=>{class o{constructor(t){this.modalService=t,this.renamedElement=new e.vpe}ngOnInit(){this.modalSubject.subscribe(t=>{this.elementToRename=t,this.openModalHandler(t.name)})}onSaveButtonPressed(){this.renamedElement.emit({element:this.elementToRename,newName:this.name}),this.bsModalRef.hide()}openModalHandler(t){t&&(this.name=t,this.bsModalRef=this.modalService.show(this.renameModal))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q.tT))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-rename-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(No,5),2&t){let i;e.iGM(i=e.CRH())&&(n.renameModal=i.first)}},inputs:{modalSubject:"modalSubject"},outputs:{renamedElement:"renamedElement"},decls:2,vars:0,consts:[["renameModal",""],[1,"modal-body"],[1,"input-group"],[1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],[1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&e.YNc(0,Do,8,1,"ng-template",null,0,e.W1O)},directives:[c.Fj,c.JJ,c.On],encapsulation:2}),o})();const Io=["file"],Eo=function(o,a){return[o,a]},Bo=function(o){return{"color-red":o}};function jo(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"div",7,8),e.TgZ(3,"i",9),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().navigate(r)}),e.qZA(),e.TgZ(4,"h3",9),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().navigate(r)}),e._uU(5),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit,n=e.oxw();e.xp6(1),e.Q6J("contextMenu",n.menu)("contextMenuSubject",t),e.xp6(2),e.Q6J("ngClass",e.WLB(5,Eo,n.isFolder(t)?"icon fa fa-folder":"icon fa fa-file-text",n.isFolder(t)||t.name!=n.scrollToElement?"":"active")),e.xp6(1),e.Q6J("ngClass",e.VKq(8,Bo,t.name==n.scrollToElement)),e.xp6(1),e.Oqu(t.name)}}function Lo(o,a){1&o&&e._uU(0," Descargar ")}function Qo(o,a){1&o&&e._uU(0," Renombrar ")}function Yo(o,a){1&o&&e._uU(0," Borrar ")}let me=(()=>{class o{constructor(t){this.navigateDown=new e.vpe,this.onDelete=new e.vpe,this.onRename=new e.vpe,this.onAddFiles=new e.vpe,this.onDownload=new e.vpe,this.onFileSelected=new e.vpe,this.renameModalSubject=new _e.xQ,this.differ=t.find([]).create(null)}ngDoCheck(){if(!this.differ.diff(this.elements)||void 0===this.scrollToElement)return;const n=this.elements.findIndex(r=>r.name===this.scrollToElement);n<0||void 0===this.files||n>=this.files.toArray().length||(this.files.toArray()[n].nativeElement.scrollIntoView({behavior:"smooth",block:"start"}),(0,Ro.H)(1e3,1e3).subscribe(()=>this.scrollToElement=void 0))}navigate(t){this.isFolder(t)?this.navigateDown.emit(t):this.onFileSelected.emit(t)}isFolder(t){return"D"===t.type||"DA"===t.type}canBeDownloaded(t){return"D"!==t.type&&"DA"!==t.type}canBeDeleted(t){return"D"!==t.type&&"DA"!==t.type}delete(t){this.onDelete.emit(t)}rename(t){this.onRename.emit(t)}onDropped(t){this.onAddFiles.emit(t)}download(t){this.onDownload.emit(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.ZZ4))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-file-manager"]],viewQuery:function(t,n){if(1&t&&(e.Gf(S.GI,5),e.Gf(Io,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.menu=i.first),e.iGM(i=e.CRH())&&(n.files=i)}},inputs:{elements:"elements",scrollToElement:"scrollToElement"},outputs:{navigateDown:"navigateDown",onDelete:"onDelete",onRename:"onRename",onAddFiles:"onAddFiles",onDownload:"onDownload",onFileSelected:"onFileSelected"},decls:8,vars:4,consts:[["id","file-manager","appDropFile","",3,"droppedFiles"],[1,"row"],["class","col-md-2",4,"ngFor","ngForOf"],["contextMenuItem","",3,"visible","execute"],["contextMenuItem","",3,"execute"],[3,"modalSubject","renamedElement"],[1,"col-md-2"],[1,"element",3,"contextMenu","contextMenuSubject"],["file",""],[3,"ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("droppedFiles",function(r){return n.onDropped(r)}),e.TgZ(1,"div",1),e.YNc(2,jo,6,10,"div",2),e.TgZ(3,"context-menu"),e.YNc(4,Lo,1,0,"ng-template",3),e.NdJ("execute",function(r){return n.download(r.item)}),e.YNc(5,Qo,1,0,"ng-template",4),e.NdJ("execute",function(r){return n.renameModalSubject.next(r.item)}),e.YNc(6,Yo,1,0,"ng-template",3),e.NdJ("execute",function(r){return n.delete(r.item)}),e.qZA(),e.TgZ(7,"app-rename-modal",5),e.NdJ("renamedElement",function(r){return n.rename(r)}),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngForOf",n.elements),e.xp6(2),e.Q6J("visible",n.canBeDownloaded),e.xp6(2),e.Q6J("visible",n.canBeDeleted),e.xp6(1),e.Q6J("modalSubject",n.renameModalSubject))},directives:[Jo,g.sg,S.GI,S.n5,So,S.HW,g.mk],styles:["#file-manager[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]{margin:1vw 1.2vw;display:flex;flex-direction:column;align-items:center}#file-manager[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{min-height:2.5vh}#file-manager[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:3.5vw;padding-bottom:1vw;cursor:pointer}#file-manager[_ngcontent-%COMP%]   .element[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.8vw;cursor:pointer}.color-red[_ngcontent-%COMP%]{color:red}.fa-file-text.active[_ngcontent-%COMP%]{color:red}"]}),o})(),$o=(()=>{class o{constructor(t){this.smbManagerService=t,this.canNavigateUp=!1}ngOnInit(){this.loadElements()}navigateToFolder(t){this.currentPath=this.pushToPath(this.currentPath,t.name),this.refresh(),this.canNavigateUp=!0}navigateUp(){this.currentPath&&(this.currentPath=this.popFromPath(this.currentPath),this.refresh(),this.updateCanNavigateUpIfApply())}refresh(){this.loadElements(this.currentPath)}deleteElement(t){confirm(`Desea borrar el item ${t.name}?`)&&this.smbManagerService.deleteElement(this.currentPath,t).then(i=>i?this.refresh():null).catch(i=>console.log(i))}renameElement(t){this.smbManagerService.renameElement(this.currentPath,t).then(n=>n?this.refresh():null).catch(n=>console.log(n))}addFiles(t){this.smbManagerService.addFiles(this.currentPath,t).then(n=>n?this.refresh():null).catch(n=>console.log(n))}downloadElement(t){this.smbManagerService.downloadFile(this.currentPath,t)}loadElements(t=null){this.smbManagerService.getElements(t).then(n=>this.elements=n).catch(n=>console.log(n))}updateCanNavigateUpIfApply(){this.currentPath||(this.canNavigateUp=!1)}pushToPath(t,n){let i=t||"";return i+=`${n}/`,i}popFromPath(t){let n=t||"";const i=n.split("/");return i.splice(i.length-2,1),n=i.join("/"),n}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sbm-management"]],features:[e._Bn([Y])],decls:7,vars:3,consts:[[1,"wrapper","wrapper-content"],[1,"row"],[1,"col-lg-12"],[1,"ibox"],[1,"ibox-content"],[3,"path","canNavigateUp","navigatedUp","onRefresh"],[3,"elements","navigateDown","onDelete","onRename","onAddFiles","onDownload"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"app-file-nav-bar",5),e.NdJ("navigatedUp",function(){return n.navigateUp()})("onRefresh",function(){return n.refresh()}),e.qZA(),e.TgZ(6,"app-file-manager",6),e.NdJ("navigateDown",function(r){return n.navigateToFolder(r)})("onDelete",function(r){return n.deleteElement(r)})("onRename",function(r){return n.renameElement(r)})("onAddFiles",function(r){return n.addFiles(r)})("onDownload",function(r){return n.downloadElement(r)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("path",n.currentPath||"Tracking SMB")("canNavigateUp",n.canNavigateUp),e.xp6(1),e.Q6J("elements",n.elements))},directives:[ue,me],encapsulation:2}),o})();const Ho=["fileManager"];let zo=(()=>{class o{constructor(t,n){this.bsModalRef=t,this.smbManagerService=n,this.onImageSelected=new _e.xQ,this.elements=new Array,this.scrollToElement=void 0,this.currentPath="novelties/vehicles/",this.canNavigateUp=!1,this.options={position:["top","right"],timeOut:0,showProgressBar:!1,pauseOnHover:!1,clickToClose:!1}}ngOnInit(){this.loadElements(this.currentPath)}navigateUp(){this.currentPath&&(this.currentPath=this.popFromPath(this.currentPath),this.refresh(),this.updateCanNavigateUpIfApply())}refresh(){this.loadElements(this.currentPath)}fileSelected(t){this.onImageSelected.next([this.faceName,t.name]),this.bsModalRef.hide()}addFiles(t){0===t.length||!confirm(`Agregar el archivo ${t[0].file.name}?`)||this.smbManagerService.addFiles(this.currentPath,t).then(i=>{i&&this.refresh(),this.scrollToElement=t[0].file.name}).catch(i=>{console.log(i)})}loadElements(t=null){this.smbManagerService.getElements(t).then(n=>{this.elements=n}).catch(n=>console.log(n))}updateCanNavigateUpIfApply(){this.canNavigateUp=!1}popFromPath(t){let n=t||"";const i=n.split("/");return i.splice(i.length-2,1),n=i.join("/"),n}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q.UZ),e.Y36(Y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-file-manager"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ho,5),2&t){let i;e.iGM(i=e.CRH())&&(n.fileManager=i.first)}},features:[e._Bn([Y])],decls:8,vars:4,consts:[[1,"modal-header"],[3,"path","canNavigateUp","navigatedUp","onRefresh"],[1,"modal-body"],[3,"elements","scrollToElement","onAddFiles","onFileSelected"],["fileManager",""],[1,"modal-footer"],["type","button",1,"btn","btn-default",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"app-file-nav-bar",1),e.NdJ("navigatedUp",function(){return n.navigateUp()})("onRefresh",function(){return n.refresh()}),e.qZA(),e.qZA(),e.TgZ(2,"div",2),e.TgZ(3,"app-file-manager",3,4),e.NdJ("onAddFiles",function(r){return n.addFiles(r)})("onFileSelected",function(r){return n.fileSelected(r)}),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"button",6),e.NdJ("click",function(){return n.bsModalRef.hide()}),e._uU(7,"Cerrar"),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("path","Seleccione un archivo")("canNavigateUp",n.canNavigateUp),e.xp6(2),e.Q6J("elements",n.elements)("scrollToElement",n.scrollToElement))},directives:[ue,me],encapsulation:2}),o})();class he{constructor(a,t,n){this.model=a,this.user=t,this.faces=n}}class Vo{}let Ze=(()=>{class o{constructor(t){this.http=t,this.headers=new m.WM({"Content-Type":"application/json"}),this.url=__apiBaseUrl+"/novelties/face"}saveNewModel(t){return this.http.post(this.url,JSON.stringify(t),{headers:this.headers,responseType:"json"}).toPromise().catch(this.handleError)}updateModel(t){return this.http.put(this.url,JSON.stringify(t),{headers:this.headers,responseType:"json"}).toPromise().catch(this.handleError)}handleError(t){return console.error("An error occurred",t),Promise.reject(t.message||t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();function Go(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"a"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td"),e.TgZ(5,"div"),e.TgZ(6,"button",16),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().openModalWithComponent(r.name)}),e._uU(7,"Examinar..."),e.qZA(),e.TgZ(8,"label"),e._uU(9),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(3),e.Oqu(t.name),e.xp6(6),e.Oqu(t.image||"No se ha seleccionado ning\xfan archivo.")}}let fe=(()=>{class o{constructor(t,n,i,r,s){this.modalService=t,this.modelService=n,this.facesService=i,this.route=r,this.router=s,this.newModel=void 0,this.isNewModel=!1,this.isFormValid=!1,this.submitButtonTitle=""}ngOnInit(){const n=["frontal","derecha","izquierda","posterior"].map(i=>{const r=new Vo;return r.name=i,r});if(void 0!==this.route.snapshot.params.model){const i=this.route.snapshot.params.model;this.isNewModel=!1,this.submitButtonTitle="Actualizar",this.newModel=new he(i,sessionStorage.getItem("user-name"),[]),this.loadFaces(i)}else this.isNewModel=!0,this.submitButtonTitle="Crear",this.newModel=new he("",sessionStorage.getItem("user-name"),n)}loadFaces(t){this.facesService.getFaces(t).then(n=>{!0!==n.response.status?alert(n.response.error.message):this.newModel.faces=n.faces}).catch(()=>{alert("Error desconocido, revisar conexi\xf3n")})}nameUpdated(t){this.newModel.model=t,this.validateForm()}openModalWithComponent(t){const n=this.modalService.show(zo,{class:"modal-lg"});n.content.faceName=t,n.content.onImageSelected.subscribe(i=>{const r=this.newModel.faces.findIndex(s=>s.name===i[0]);void 0!==r&&(this.newModel.faces[r].name=i[0],this.newModel.faces[r].image=i[1].substring(0,i[1].lastIndexOf("."))),this.validateForm()})}validateForm(){const t=void 0!==this.newModel.model&&this.newModel.model.length>0,n=this.newModel.faces.map(i=>void 0!==i.name&&"string"==typeof i.name&&i.name.length>0&&void 0!==i.image&&"string"==typeof i.image&&i.image.length>0).reduce((i,r)=>i&&r);this.isFormValid=t&&n}navigateBack(){this.router.navigate([this.isNewModel?"/config/models":"/config/models/"+this.newModel.model])}performAction(){this.isNewModel?this.saveNewFace():this.updateModel()}saveNewFace(){this.validateForm(),this.isFormValid?this.modelService.saveNewModel(this.newModel).then(t=>{t?(alert("Se ha guardado el nuevo modelo exitosamente."),this.navigateBack()):alert("No se pudo completar la operaci\xf3n. Por favor vuelva a intentarlo.")}).catch(t=>{alert(t)}):alert("Por favor complete todos los campos")}updateModel(){this.validateForm(),this.isFormValid?this.modelService.updateModel(this.newModel).then(t=>{t?(alert("Se ha actualizado modelo exitosamente."),this.navigateBack()):alert("No se pudo completar la operaci\xf3n. Por favor vuelva a intentarlo.")}).catch(t=>{alert(t)}):alert("Por favor complete todos los campos")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q.tT),e.Y36(Ze),e.Y36(R),e.Y36(d.gz),e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-face-modifier"]],features:[e._Bn([R,Ze])],decls:32,vars:6,consts:[[1,"ibox-title"],[1,"table","table-striped"],["width","20"],[3,"click"],[1,"fa","fa-chevron-left"],[1,"nav-label"],[1,"ibox-content"],[1,"ibox-content",2,"padding-left","10px"],[1,"col-lg-3",2,"width","80px","height","40px"],[1,"col-lg-3",2,"height","40px"],["placeholder","Nuevo modelo",1,"form-control",3,"value","disabled","change"],["name",""],["type","submit",1,"btn","btn-primary",2,"display","inline","float","right",3,"disabled","click"],[1,"table-responsive"],[2,"width","60px"],[4,"ngFor","ngForOf"],["type","submit",1,"input-button",2,"margin-right","10px",3,"click"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"table",1),e.TgZ(2,"tr"),e.TgZ(3,"th",2),e.TgZ(4,"a",3),e.NdJ("click",function(){return n.navigateBack()}),e._UZ(5,"i",4),e.qZA(),e.qZA(),e.TgZ(6,"th"),e._UZ(7,"span",5),e.TgZ(8,"h5"),e._uU(9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",6),e.TgZ(11,"div",7),e.TgZ(12,"div",8),e.TgZ(13,"label"),e._uU(14,"Modelo:"),e.qZA(),e.qZA(),e.TgZ(15,"div",9),e.TgZ(16,"input",10,11),e.NdJ("change",function(){e.CHM(i);const s=e.MAs(17);return n.nameUpdated(s.value)}),e.qZA(),e._UZ(18,"br"),e.qZA(),e.TgZ(19,"button",12),e.NdJ("click",function(){return n.performAction()}),e._uU(20),e.qZA(),e.qZA(),e.TgZ(21,"div",6),e.TgZ(22,"div",13),e.TgZ(23,"table",1),e.TgZ(24,"thead"),e.TgZ(25,"tr"),e.TgZ(26,"th",14),e._uU(27,"Nombre"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Imagen"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"tbody"),e.YNc(31,Go,10,2,"tr",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(9),e.Oqu(n.newModel.model||"Nuevo Modelo"),e.xp6(7),e.Q6J("value",n.newModel.model)("disabled",!n.isNewModel),e.xp6(3),e.Q6J("disabled",!n.isFormValid),e.xp6(1),e.Oqu(n.submitButtonTitle),e.xp6(11),e.Q6J("ngForOf",n.newModel.faces))},directives:[g.sg],styles:[".col-lg-3[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:flex;align-items:center}.col-lg-3[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center}"]}),o})(),Te=(()=>{class o{constructor(t){this.modalService=t,this.modifyItem=new e.vpe,this.deleteItem=new e.vpe,this.motive=""}ngOnInit(){}closeModal(){this.modalRef.hide()}getModalTitle(){return this.modalRef.content.modalTitle}updateMotive(t){this.motive=t}disableSaveButton(){return!!this.motive}saveModal(){"eliminaci\xf3n"===this.getModalTitle()?this.deleteItem.emit(this.motive):this.modifyItem.emit(this.motive),this.closeModal()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q.tT))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-reason-modal"]],inputs:{modalRef:"modalRef"},outputs:{modifyItem:"modifyItem",deleteItem:"deleteItem"},decls:16,vars:2,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-lg-12"],["rows","6",1,"form-control",3,"change","keyup"],["motive",""],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-default",3,"click"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"h4",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return n.closeModal()}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"textarea",7,8),e.NdJ("change",function(){e.CHM(i);const s=e.MAs(10);return n.updateMotive(s.value)})("keyup",function(){e.CHM(i);const s=e.MAs(10);return n.updateMotive(s.value)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"button",10),e.NdJ("click",function(){return n.saveModal()}),e._uU(13,"Guardar"),e.qZA(),e.TgZ(14,"button",11),e.NdJ("click",function(){return n.closeModal()}),e._uU(15,"Close"),e.qZA(),e.qZA()}2&t&&(e.xp6(2),e.hij("Motivo de ",n.getModalTitle(),""),e.xp6(10),e.Q6J("disabled",!n.disableSaveButton()))},encapsulation:2}),o})();function Xo(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),r=e.MAs(23);return i.openModal(r,"eliminaci\xf3n")}),e._uU(3,"Eliminar Tracking"),e.qZA(),e.qZA(),e.qZA()}}function Wo(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"app-reason-modal",15),e.NdJ("modifyItem",function(i){return e.CHM(t),e.oxw().modifyTrack(i)})("deleteItem",function(i){return e.CHM(t),e.oxw().deleteTrack(i)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("modalRef",t.modalRef)}}let Ko=(()=>{class o{constructor(t){this.modalService=t,this.modifyEvent=new e.vpe,this.deleteEvent=new e.vpe,this.datePickerOptions={dateFormat:"dd/mm/yyyy",showFooterToday:!0}}ngOnInit(){this.trackingId=this.track.guia;const t=new Date(this.track.fecha);this.trackingDate=t,this.initialTrackDate={date:{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}}}updateTrackingNumber(t){this.trackingId=t}onDateChanged(t){this.trackingDate=new Date(t.singleDate.jsDate)}modifyTrack(t){this.modifyEvent.emit([this.track.id,this.trackingId,this.trackingDate,t])}deleteTrack(t){this.deleteEvent.emit([this.track.id,t])}openModal(t,n){this.modalRef=this.modalService.show(t),this.modalRef.content={modalTitle:n}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q.tT))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modify-track"]],inputs:{track:"track",isDeleteActive:"isDeleteActive"},outputs:{modifyEvent:"modifyEvent",deleteEvent:"deleteEvent"},decls:24,vars:6,consts:[["id","app-modify-track",1,"ibox-content",2,"padding-left","10px","background-color","transparent"],[1,"row"],[1,"col-lg-3"],["placeholder","N\xfamero de gu\xeda",1,"form-control",3,"value","change"],["trackindID",""],[1,"input-group"],["name","dateFrom","angular-mydatepicker","",1,"form-control",3,"placeholder","ngModel","options","locale","ngModelChange","dateChanged"],["dp_from","angular-mydatepicker"],[1,"input-group-btn"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fa","fa-calendar-o"],["type","button",1,"btn","btn-sm","btn-primary",2,"padding","3px","width","150px",3,"click"],["class","row",4,"ngIf"],["reasonModal",""],["type","button",1,"btn","btn-sm","btn-danger",2,"padding","3px","width","150px",3,"click"],[3,"modalRef","modifyItem","deleteItem"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"label"),e._uU(4,"Gu\xeda:"),e.qZA(),e.TgZ(5,"input",3,4),e.NdJ("change",function(){e.CHM(i);const s=e.MAs(6);return n.updateTrackingNumber(s.value)}),e.qZA(),e.qZA(),e.TgZ(7,"div",2),e.TgZ(8,"label"),e._uU(9,"Fecha:"),e.qZA(),e.TgZ(10,"div",5),e.TgZ(11,"input",6,7),e.NdJ("ngModelChange",function(s){return n.initialTrackDate=s})("dateChanged",function(s){return n.onDateChanged(s)}),e.qZA(),e.TgZ(13,"span",8),e.TgZ(14,"button",9),e.NdJ("click",function(){return e.CHM(i),e.MAs(12).toggleCalendar()}),e._UZ(15,"i",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",1),e.TgZ(17,"div",2),e.TgZ(18,"button",11),e.NdJ("click",function(){e.CHM(i);const s=e.MAs(23);return n.openModal(s,"actualizaci\xf3n")}),e._uU(19,"Actualizar Tracking"),e.qZA(),e.qZA(),e.qZA(),e._UZ(20,"hr"),e.YNc(21,Xo,4,0,"div",12),e.YNc(22,Wo,1,1,"ng-template",null,13,e.W1O),e.qZA()}2&t&&(e.xp6(5),e.Q6J("value",n.track.guia),e.xp6(6),e.Q6J("placeholder",n.trackingDate.toLocaleDateString("es-EC"))("ngModel",n.initialTrackDate)("options",n.datePickerOptions)("locale","es"),e.xp6(10),e.Q6J("ngIf",n.isDeleteActive))},directives:[c.Fj,y.w_,c.JJ,c.On,g.O5,Te],styles:[""]}),o})();function ei(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"td",18),e._uU(2),e.qZA(),e.TgZ(3,"td",18),e._uU(4),e.qZA(),e.TgZ(5,"td",18),e._uU(6),e.qZA(),e.TgZ(7,"td",18),e._uU(8),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.tracks[0].chasis),e.xp6(2),e.Oqu(t.tracks[0].descripcion),e.xp6(2),e.Oqu(t.tracks[0].motor),e.xp6(2),e.Oqu(t.tracks[0].color)}}function ti(o,a){if(1&o&&(e.TgZ(0,"button",21),e._UZ(1,"i",22),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("popover",t.observacion)}}function ni(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"Sin observaci\xf3n"),e.qZA())}function oi(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",23),e.TgZ(2,"app-modify-track",24),e.NdJ("modifyEvent",function(i){return e.CHM(t),e.oxw(2).modifyTrack(i)})("deleteEvent",function(i){return e.CHM(t),e.oxw(2).deleteTrack(i)}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw().$implicit,n=e.oxw();e.xp6(2),e.Q6J("track",t)("isDeleteActive",n.isDeleteActive)}}function ii(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().selectTrack(r.id)}),e.TgZ(2,"td"),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e.YNc(26,ti,2,1,"button",20),e.YNc(27,ni,2,0,"span",13),e.qZA(),e.TgZ(28,"td"),e._uU(29),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.qZA(),e.TgZ(32,"td"),e._uU(33),e.qZA(),e.qZA(),e.YNc(34,oi,3,2,"tr",13),e.BQk()}if(2&o){const t=a.$implicit,n=e.oxw();e.xp6(3),e.Oqu(e.xi3(4,17,t.fecha,"dd/MM/yyyy HH:mm")),e.xp6(3),e.Oqu(t.usuario),e.xp6(2),e.Oqu(t.evento),e.xp6(2),e.Oqu(t.origen),e.xp6(2),e.Oqu(t.destino),e.xp6(2),e.Oqu(t.ubicacion),e.xp6(2),e.Oqu(t.combustible),e.xp6(2),e.Oqu(t.transportista),e.xp6(2),e.Oqu(t.guia),e.xp6(2),e.Oqu(t.chofer),e.xp6(2),e.Oqu(t.kilometraje),e.xp6(2),e.Q6J("ngIf",null!==t.observacion&&t.observacion.length>0),e.xp6(1),e.Q6J("ngIf",null==t.observacion),e.xp6(2),e.Oqu(t.pedido),e.xp6(2),e.Oqu(t.factura),e.xp6(2),e.Oqu(t.bl),e.xp6(1),e.Q6J("ngIf",t.id===n.selectedTrack&&"interno"!=t.evento.toLowerCase())}}let ai=(()=>{class o{constructor(t,n,i,r,s){this.trackingService=t,this.functionsService=n,this.route=i,this.datepipe=r,this.router=s,this.tracks=[],this.selectedTrack=0,this.isDeleteActive=!1,this.chassis=""}ngOnInit(){}searchTracks(t){null==t||t.length<6?alert("Debe ingresar un m\xednimo 6 caracteres"):this.trackingService.getTracks(t,"web").then(n=>{n.length>0?(this.chassis=t,this.tracks=n):(alert("No se encontraron resultados"),this.tracks=[])})}selectTrack(t){t!==this.selectedTrack?(this.isDeleteActive=t===this.tracks[0].id,this.selectedTrack=t):this.selectedTrack=-1}modifyTrack(t){const n=this.tracks.find(p=>p.id===this.selectedTrack);if(void 0===n)return void alert("Un error ha ocurrido y no se pudo actualizar el registro.");const i=new Date(n.fecha);if(void 0===i)return void alert("Un error ha ocurrido y no se pudo actualizar el registro.");const r=v(t[2]).add(0===t[2].getHours()?i.getHours():0,"hours").add(0===t[2].getMinutes()?i.getMinutes():0,"minutes").toDate();if(void 0===r)return void alert("Un error ha ocurrido y no se pudo actualizar el registro.");if(void 0===t[3])return void alert("Falta ingresar una justificaci\xf3n para actualizar el registro.");const s=this.datepipe.transform(r,"dd/MM/yyyy HH:mm");this.trackingService.updateTrackById([t[0]],t[1],s,t[3],!1).then(()=>{this.selectedTrack=-1,this.searchTracks(this.chassis),alert("Se ha actualizado correctamente el registro")}).catch(p=>alert(p))}deleteTrack(t){const n=this.tracks.find(s=>s.id===t[0]);if(void 0===n||null==n)return void alert("Un error ha ocurrido y no se pudo eliminar el registro.");if(void 0===t[1]||null==t[1])return void alert("Falta ingresar una justificaci\xf3n para actualizar el registro.");let i="\xbfEst\xe1 seguro que desea eliminar este registo?.@Esta acci\xf3n no se puede revertir";const r=n.novedades.find(s=>s.numeroFotos>0);if(i=i.replace("@",r?" El registro tiene fotograf\xedas asociadas. ":" "),confirm(i)){const s=this.datepipe.transform(new Date,"dd/MM/yyyy HH:mm");this.trackingService.deleteTrackById(n.id,n.guia,s,t[1]).then(()=>{this.selectedTrack=-1,this.searchTracks(this.chassis),alert("Se ha eliminado correctamente el registro")}).catch(p=>alert(p))}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b),e.Y36(C),e.Y36(d.gz),e.Y36(g.uU),e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-maintenance-chassis"]],features:[e._Bn([b,C,g.uU])],decls:67,vars:2,consts:[[1,"wrapper","wrapper-content"],[1,"row"],[1,"col-lg-12"],[1,"ibox","float-e-margins"],[1,"ibox-title"],[1,"ibox-content"],[1,"col-sm-3"],[1,"input-group"],["type","text","placeholder","Ingrese al menos 6 n\xfameros","required","","minlength","4","maxlength","24",1,"input-sm","form-control"],["search",""],[1,"input-group-btn"],["type","submit",1,"btn","btn-sm","btn-primary",3,"click"],[1,"table"],[4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped"],[2,"text-align","center"],[4,"ngFor","ngForOf"],[2,"color","white","background-color","#009ACD"],[3,"click"],["type","button","class","btn btn-default","placement","bottom","outsideClick","true",3,"popover",4,"ngIf"],["type","button","placement","bottom","outsideClick","true",1,"btn","btn-default",3,"popover"],[1,"fa","fa-eye","text-success"],["colspan","15"],[3,"track","isDeleteActive","modifyEvent","deleteEvent"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h5"),e._uU(6,"Mantenimiento por chasis"),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",1),e.TgZ(9,"div",6),e.TgZ(10,"form"),e.TgZ(11,"div",7),e._UZ(12,"input",8,9),e.TgZ(14,"span",10),e.TgZ(15,"button",11),e.NdJ("click",function(){e.CHM(i);const s=e.MAs(13);return n.searchTracks(s.value)}),e._uU(16," Buscar "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"table",12),e.TgZ(18,"thead"),e.TgZ(19,"tr"),e.TgZ(20,"th"),e._uU(21,"Chasis"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Modelo"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Motor"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Color"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"tbody"),e.YNc(29,ei,9,4,"tr",13),e.qZA(),e.qZA(),e._UZ(30,"br"),e.TgZ(31,"div",14),e.TgZ(32,"table",15),e.TgZ(33,"thead"),e.TgZ(34,"tr"),e.TgZ(35,"th",16),e._uU(36,"Fecha"),e.qZA(),e.TgZ(37,"th",16),e._uU(38,"Usuario"),e.qZA(),e.TgZ(39,"th",16),e._uU(40,"Evento"),e.qZA(),e.TgZ(41,"th",16),e._uU(42,"Origen"),e.qZA(),e.TgZ(43,"th",16),e._uU(44,"Destino"),e.qZA(),e.TgZ(45,"th",16),e._uU(46,"Ubicaci\xf3n"),e.qZA(),e.TgZ(47,"th",16),e._uU(48,"Gasolina"),e.qZA(),e.TgZ(49,"th",16),e._uU(50,"Transportista"),e.qZA(),e.TgZ(51,"th",16),e._uU(52,"Gu\xeda"),e.qZA(),e.TgZ(53,"th",16),e._uU(54,"Chofer"),e.qZA(),e.TgZ(55,"th",16),e._uU(56,"Kil\xf3metros"),e.qZA(),e.TgZ(57,"th",16),e._uU(58,"Observaci\xf3n"),e.qZA(),e.TgZ(59,"th",16),e._uU(60,"Pedido"),e.qZA(),e.TgZ(61,"th",16),e._uU(62,"Factura"),e.qZA(),e.TgZ(63,"th",16),e._uU(64,"B/L"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"tbody"),e.YNc(66,ii,35,20,"ng-container",17),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&t&&(e.xp6(29),e.Q6J("ngIf",n.tracks.length>0),e.xp6(37),e.Q6J("ngForOf",n.tracks))},directives:[c._Y,c.JL,c.F,g.O5,g.sg,U.k5,Ko],pipes:[g.uU],styles:["td[_ngcontent-%COMP%]{padding-left:20px;color:#000}.chasis[_ngcontent-%COMP%]{font-size:20px;font-weight:bold}.infoVehicle[_ngcontent-%COMP%]{background-color:#ccc;padding:20px}.ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}label[_ngcontent-%COMP%]{cursor:pointer}#upload-photo[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:-1}#page[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0;margin:0}#page[_ngcontent-%COMP%]{border-collapse:collapse}"]}),o})();function ri(o,a){if(1&o&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function si(o,a){if(1&o&&(e.TgZ(0,"div",6),e.TgZ(1,"label"),e._uU(2),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.hij("Registros encontrados: ",t.tracks.length,"")}}function ci(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",6),e.TgZ(2,"label"),e._uU(3,"Gu\xeda:"),e.qZA(),e.TgZ(4,"input",12,13),e.NdJ("input",function(){e.CHM(t);const i=e.MAs(5);return e.oxw().onTrackingNumberChanged(i.value)}),e.qZA(),e.qZA(),e.TgZ(6,"div",6),e.TgZ(7,"div",14),e.TgZ(8,"label"),e._uU(9,"Evento:"),e.qZA(),e.TgZ(10,"select",15),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().originDestinationPoint.event=i}),e.YNc(11,ri,2,2,"option",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",6),e.TgZ(13,"div",14),e._UZ(14,"br"),e.TgZ(15,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().searchTracksByTrackingId()}),e._uU(16,"Buscar"),e.qZA(),e.qZA(),e.qZA(),e.YNc(17,si,3,1,"div",18),e.qZA()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("value",t.trackingId),e.xp6(6),e.Q6J("ngModel",t.originDestinationPoint.event),e.xp6(1),e.Q6J("ngForOf",t.events),e.xp6(4),e.Q6J("disabled",null==t.trackingId||0==t.trackingId.length),e.xp6(2),e.Q6J("ngIf",t.tracks.length>0)}}function li(o,a){if(1&o&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.Oqu(t.nombre)}}function pi(o,a){if(1&o&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.Oqu(t.nombre)}}function gi(o,a){if(1&o&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function di(o,a){if(1&o&&(e.TgZ(0,"div",6),e.TgZ(1,"label"),e._uU(2),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.hij("Registros encontrados: ",t.tracks.length,"")}}function ui(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",6),e.TgZ(2,"div",14),e.TgZ(3,"label"),e._uU(4,"Origen:"),e.qZA(),e.TgZ(5,"select",20),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().originDestinationPoint.inspectionPoint=i})("change",function(){return e.CHM(t),e.oxw().resetDestinations()}),e.YNc(6,li,2,2,"option",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",14),e.TgZ(9,"label"),e._uU(10,"Destino:"),e.qZA(),e.TgZ(11,"select",21),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().originDestinationPoint.place=i}),e.YNc(12,pi,2,2,"option",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"div",14),e.TgZ(15,"label"),e._uU(16,"Evento:"),e.qZA(),e.TgZ(17,"select",22),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().originDestinationPoint.event=i}),e.YNc(18,gi,2,2,"option",16),e.qZA(),e.qZA(),e.qZA(),e.YNc(19,di,3,1,"div",18),e.qZA()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.originDestinationPoint.inspectionPoint),e.xp6(1),e.Q6J("ngForOf",t.origins),e.xp6(5),e.Q6J("ngModel",t.originDestinationPoint.place),e.xp6(1),e.Q6J("ngForOf",t.destinations),e.xp6(5),e.Q6J("ngModel",t.originDestinationPoint.event),e.xp6(1),e.Q6J("ngForOf",t.events),e.xp6(1),e.Q6J("ngIf",t.tracks.length>0)}}function _i(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(6).clearDate()}),e._UZ(1,"i",35),e.qZA()}}function mi(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(17).clearDate()}),e._UZ(1,"i",35),e.qZA()}}function hi(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",6),e.TgZ(2,"label"),e._uU(3,"Desde:"),e.qZA(),e.TgZ(4,"div",23),e.TgZ(5,"input",24,25),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().trackingFromDate=i})("dateChanged",function(i){return e.CHM(t),e.oxw().onDateFromChanged(i)}),e.qZA(),e.TgZ(7,"span",26),e.YNc(8,_i,2,0,"button",27),e.qZA(),e.TgZ(9,"span",26),e.TgZ(10,"button",28),e.NdJ("click",function(){return e.CHM(t),e.MAs(6).toggleCalendar()}),e._UZ(11,"i",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",6),e.TgZ(13,"label"),e._uU(14,"Hasta:"),e.qZA(),e.TgZ(15,"div",30),e.TgZ(16,"input",31,32),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().trackingToDate=i})("dateChanged",function(i){return e.CHM(t),e.oxw().onDateToChanged(i)}),e.qZA(),e.TgZ(18,"span",26),e.YNc(19,mi,2,0,"button",27),e.qZA(),e.TgZ(20,"span",26),e.TgZ(21,"button",28),e.NdJ("click",function(){return e.CHM(t),e.MAs(17).toggleCalendar()}),e._UZ(22,"i",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",33),e.TgZ(24,"div",14),e._UZ(25,"br"),e.TgZ(26,"button",34),e.NdJ("click",function(){return e.CHM(t),e.oxw().searchBatchTracks()}),e._uU(27,"Buscar"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.trackingFromDate)("options",t.myDpOptions)("locale","es"),e.xp6(3),e.Q6J("ngIf",t.trackingFromDate),e.xp6(8),e.Q6J("ngModel",t.trackingToDate)("options",t.myDpOptions)("locale","es"),e.xp6(3),e.Q6J("ngIf",t.trackingToDate)}}function Zi(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",6),e.TgZ(2,"div",14),e.TgZ(3,"label"),e._uU(4,"Nueva gu\xeda:"),e.qZA(),e.TgZ(5,"input",36,37),e.NdJ("change",function(){e.CHM(t);const i=e.MAs(6);return e.oxw().updateTrackingNumber(i.value)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",14),e.TgZ(9,"label"),e._uU(10,"Nueva fecha:"),e.qZA(),e.TgZ(11,"div",14),e.TgZ(12,"input",38,39),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().newTrackingDate=i})("dateChanged",function(i){return e.CHM(t),e.oxw().updateTrackingDate(i)}),e.qZA(),e.TgZ(14,"span",26),e.TgZ(15,"button",28),e.NdJ("click",function(){return e.CHM(t),e.MAs(13).toggleCalendar()}),e._UZ(16,"i",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",33),e.TgZ(18,"div",14),e._UZ(19,"br"),e.TgZ(20,"button",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),r=e.MAs(26);return i.openModal(r)}),e._uU(21,"Actualizar"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("value",t.newTrackingId),e.xp6(7),e.Q6J("ngModel",t.newTrackingDate)("options",t.myDpOptions)("locale","es")}}function fi(o,a){if(1&o&&(e.TgZ(0,"button",48),e._UZ(1,"i",49),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("popover",t.observacion)}}function Ti(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"Sin observaci\xf3n"),e.qZA())}function bi(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",45),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).selectTrack(r.id)}),e.TgZ(2,"td"),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA(),e.TgZ(27,"td"),e.YNc(28,fi,2,1,"button",46),e.YNc(29,Ti,2,0,"span",47),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.qZA(),e.TgZ(32,"td"),e._uU(33),e.qZA(),e.TgZ(34,"td"),e._uU(35),e.qZA(),e.qZA(),e.BQk()}if(2&o){const t=a.$implicit;e.xp6(3),e.Oqu(e.xi3(4,17,t.fecha,"dd/MM/yyyy HH:mm")),e.xp6(3),e.Oqu(t.chasis),e.xp6(2),e.Oqu(t.evento),e.xp6(2),e.Oqu(t.origen),e.xp6(2),e.Oqu(t.destino),e.xp6(2),e.Oqu(t.ubicacion),e.xp6(2),e.Oqu(t.usuario),e.xp6(2),e.Oqu(t.combustible),e.xp6(2),e.Oqu(t.transportista),e.xp6(2),e.Oqu(t.guia),e.xp6(2),e.Oqu(t.chofer),e.xp6(2),e.Oqu(t.kilometraje),e.xp6(2),e.Q6J("ngIf",null!==t.observacion&&t.observacion.length>0),e.xp6(1),e.Q6J("ngIf",null==t.observacion),e.xp6(2),e.Oqu(t.pedido),e.xp6(2),e.Oqu(t.factura),e.xp6(2),e.Oqu(t.bl)}}function vi(o,a){if(1&o&&(e.TgZ(0,"div",41),e.TgZ(1,"table",42),e.TgZ(2,"thead"),e.TgZ(3,"tr"),e.TgZ(4,"th",43),e._uU(5,"Fecha"),e.qZA(),e.TgZ(6,"th",43),e._uU(7,"Chasis"),e.qZA(),e.TgZ(8,"th",43),e._uU(9,"Evento"),e.qZA(),e.TgZ(10,"th",43),e._uU(11,"Origen"),e.qZA(),e.TgZ(12,"th",43),e._uU(13,"Destino"),e.qZA(),e.TgZ(14,"th",43),e._uU(15,"Ubicaci\xf3n"),e.qZA(),e.TgZ(16,"th",43),e._uU(17,"Usuario"),e.qZA(),e.TgZ(18,"th",43),e._uU(19,"Gasolina"),e.qZA(),e.TgZ(20,"th",43),e._uU(21,"Transportista"),e.qZA(),e.TgZ(22,"th",43),e._uU(23,"Gu\xeda"),e.qZA(),e.TgZ(24,"th",43),e._uU(25,"Chofer"),e.qZA(),e.TgZ(26,"th",43),e._uU(27,"Kil\xf3metros"),e.qZA(),e.TgZ(28,"th",43),e._uU(29,"Observaci\xf3n"),e.qZA(),e.TgZ(30,"th",43),e._uU(31,"Pedido"),e.qZA(),e.TgZ(32,"th",43),e._uU(33,"Factura"),e.qZA(),e.TgZ(34,"th",43),e._uU(35,"B/L"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"tbody"),e.YNc(37,bi,36,20,"ng-container",44),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(37),e.Q6J("ngForOf",t.tracks)}}function qi(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"app-reason-modal",50),e.NdJ("modifyItem",function(i){return e.CHM(t),e.oxw().updateTracksInBatch(i)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("modalRef",t.modalRef)}}let Ci=(()=>{class o{constructor(t,n,i,r,s){this.trackingService=t,this.destinationService=n,this.datepipe=i,this.router=r,this.modalService=s,this.tracks=[],this.origins=[],this.destinations=[],this.events=["entrada","salida"],this.trackingId="",this.newTrackingId="",this.newTrackingDate=null,this.originDestinationPoint=new j,this.trackingFromDate=null,this.trackingToDate=null,this.isByDateSelected=!1,this.myDpOptions={dateRange:!1,dateFormat:"dd/mm/yyyy",showFooterToday:!0},this.selectedTrack=0}ngOnInit(){this.trackingService.getOrigins().then(t=>{this.origins=t})}changeSearchMethod(t){this.isByDateSelected=t,this.tracks=[],this.originDestinationPoint=new j,this.trackingFromDate=null,this.trackingToDate=null,this.newTrackingDate=null}searchTracksByTrackingId(){null!=this.trackingId?(this.tracks=[],this.trackingService.getTracksByTrackingId(this.trackingId,this.originDestinationPoint.event).then(t=>{0!==t.length?this.tracks=t:alert("No se encontraron registros con los par\xe1metros especificados.")}).catch(t=>{alert(t)})):alert("Debe ingresar el n\xfamero de gu\xeda.")}resetDestinations(){this.destinations=[],this.destinationService.getDestinations(this.originDestinationPoint.inspectionPoint).then(t=>{this.destinations=t})}searchBatchTracks(){if(null==this.trackingFromDate||null==this.trackingToDate||null==this.originDestinationPoint.inspectionPoint||0===this.originDestinationPoint.inspectionPoint.length||null==this.originDestinationPoint.place||0===this.originDestinationPoint.place.length||void 0===this.originDestinationPoint.event)return void alert("Debe completar los par\xe1metros para realizar la b\xfasqueda");const t=this.datepipe.transform(this.trackingFromDate.singleDate.jsDate,"dd/MM/yyyy"),n=this.datepipe.transform(this.trackingToDate.singleDate.jsDate,"dd/MM/yyyy");this.trackingService.getBatchTrackings(this.originDestinationPoint.inspectionPoint,this.originDestinationPoint.place,t,n,this.originDestinationPoint.event).then(i=>{0!==i.length?this.tracks=i:alert("No se encontraron registros con los par\xe1metros especificados.")}).catch(i=>{alert(i)})}onTrackingNumberChanged(t){this.trackingId=t}onDateFromChanged(t){this.trackingFromDate=t}onDateToChanged(t){this.trackingToDate=t}selectTrack(t){this.selectedTrack=t===this.tracks[0].id&&t!==this.selectedTrack?t:-1}updateTrackingNumber(t){this.newTrackingId=t}updateTrackingDate(t){this.newTrackingDate=t}updateTracksInBatch(t){this.isByDateSelected?this.updateTracksByDates(t):this.updateTracksByTrackingId(t)}updateTracksByTrackingId(t){if(0===this.newTrackingId.length&&null===this.newTrackingDate)return this.modalRef.hide(),void alert("Deber ingresar el nuevo n\xfamero de gu\xeda o fecha para actualizar");let n="";if(null!==this.newTrackingDate){const i=new Date,r=v(this.newTrackingDate.singleDate.jsDate).hours(i.getHours()).minutes(i.getMinutes()).toDate();n=this.datepipe.transform(r,"dd/MM/yyyy HH:mm")}this.trackingService.updateTracksByTrackingId(this.trackingId,this.newTrackingId,n,t,this.originDestinationPoint.event).then(()=>{alert("Se han actualizado correctamente los registros"),this.newTrackingId.length>0&&(this.trackingId=this.newTrackingId),this.newTrackingId="",this.newTrackingDate=null,this.searchTracksByTrackingId()}).catch(i=>alert(i))}updateTracksByDates(t){if(0===this.newTrackingId.length&&null===this.newTrackingDate)return void alert("Deber ingresar el nuevo n\xfamero de gu\xeda o fecha para actualizar");if(0===this.tracks.length)return void alert("No hay registros que deban ser actualizados");if(void 0===this.originDestinationPoint.event)return void alert("Debe seleccionar un tipo de evento.");const n=this.tracks.map(r=>r.id);let i="";if(null!==this.newTrackingDate){const r=new Date,s=v(this.newTrackingDate.singleDate.jsDate).hours(r.getHours()).minutes(r.getMinutes()).toDate();i=this.datepipe.transform(s,"dd/MM/yyyy HH:mm")}this.trackingService.updateTrackById(n,this.newTrackingId,i,t,!1).then(()=>{alert("Se han actualizado correctamente los registros"),this.newTrackingId.length>0&&(this.trackingId=this.newTrackingId),null!==this.newTrackingDate&&(this.trackingToDate=this.newTrackingDate,this.trackingFromDate=this.newTrackingDate),this.newTrackingId="",this.newTrackingDate=null,this.searchBatchTracks()}).catch(r=>alert(r))}openModal(t){this.modalRef=this.modalService.show(t),this.modalRef.content={modalTitle:"actualizaci\xf3n"}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b),e.Y36(F),e.Y36(g.uU),e.Y36(d.F0),e.Y36(q.tT))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-maintenance-batch"]],features:[e._Bn([b,F,g.uU])],decls:27,vars:7,consts:[[1,"wrapper","wrapper-content"],[1,"row"],[1,"col-lg-12"],[1,"ibox","float-e-margins"],[1,"ibox-title"],[1,"ibox-content"],[1,"col-sm-3"],["role","group","aria-label","Basic example",1,"btn-group"],[1,"btn","btn-primary",3,"disabled","click"],["class","row",4,"ngIf"],["class","table-responsive",4,"ngIf"],["reasonModal",""],["type","text","placeholder","Ingrese el n\xfamero de gu\xeda","required","","minlength","4","maxlength","24",1,"input-sm","form-control",3,"value","input"],["trackindID",""],[1,"input-group"],["id","event2","name","event2",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["class","col-sm-3",4,"ngIf"],[3,"value"],["id","origin","name","origin","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["id","destination","name","destination","required","",1,"form-control",3,"ngModel","ngModelChange"],["id","event1","name","event1","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","fromDate-input",1,"input-group"],["name","fromDate","placeholder","Ingrese una fecha","angular-mydatepicker","","required","",1,"form-control",3,"ngModel","options","locale","ngModelChange","dateChanged"],["dp_from","angular-mydatepicker"],[1,"input-group-btn"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fa","fa-calendar-o"],["name","toDateinput",1,"input-group"],["name","toDate","placeholder","Ingrese una fecha","angular-mydatepicker","","required","",1,"form-control",3,"ngModel","options","locale","ngModelChange","dateChanged"],["dp_to","angular-mydatepicker"],[1,"col-sm-6"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fa","fa-close"],["placeholder","N\xfamero de gu\xeda",1,"form-control",3,"value","change"],["newTrackindID",""],["name","updateDate","placeholder","Ingrese una fecha","angular-mydatepicker","",1,"form-control",3,"ngModel","options","locale","ngModelChange","dateChanged"],["dp_new","angular-mydatepicker"],["type","button",1,"btn","btn-primary",3,"click"],[1,"table-responsive"],[1,"table","table-striped"],[2,"text-align","center"],[4,"ngFor","ngForOf"],[3,"click"],["type","button","class","btn btn-default","placement","bottom","outsideClick","true",3,"popover",4,"ngIf"],[4,"ngIf"],["type","button","placement","bottom","outsideClick","true",1,"btn","btn-default",3,"popover"],[1,"fa","fa-eye","text-success"],[3,"modalRef","modifyItem"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"h5"),e._uU(6,"Mantenimiento por bloque"),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",1),e.TgZ(9,"div",6),e.TgZ(10,"div",7),e.TgZ(11,"button",8),e.NdJ("click",function(){return n.changeSearchMethod(!1)}),e._uU(12,"Por Gu\xeda"),e.qZA(),e.TgZ(13,"button",8),e.NdJ("click",function(){return n.changeSearchMethod(!0)}),e._uU(14,"Por Fechas"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(15,"br"),e.YNc(16,ci,18,5,"div",9),e.YNc(17,ui,20,7,"div",9),e._UZ(18,"br"),e.YNc(19,hi,28,8,"div",9),e._UZ(20,"hr"),e.YNc(21,Zi,22,4,"div",9),e._UZ(22,"br"),e._UZ(23,"br"),e.YNc(24,vi,38,1,"div",10),e.qZA(),e.qZA(),e.qZA(),e.YNc(25,qi,1,1,"ng-template",null,11,e.W1O),e.qZA(),e.qZA()),2&t&&(e.xp6(11),e.Q6J("disabled",!n.isByDateSelected),e.xp6(2),e.Q6J("disabled",n.isByDateSelected),e.xp6(3),e.Q6J("ngIf",!n.isByDateSelected),e.xp6(1),e.Q6J("ngIf",n.isByDateSelected),e.xp6(2),e.Q6J("ngIf",n.isByDateSelected),e.xp6(2),e.Q6J("ngIf",n.tracks.length>0),e.xp6(3),e.Q6J("ngIf",n.tracks.length>0))},directives:[g.O5,c.EJ,c.JJ,c.On,g.sg,c.YN,c.Kr,c.Q7,c.Fj,y.w_,U.k5,Te],pipes:[g.uU],styles:[".ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}"]}),o})(),be=(()=>{class o{constructor(t){this.http=t,this.destinationsUrl=__apiBaseUrl+"/destinations"}getDestinations(){return this.http.get(`${this.destinationsUrl}/catalog?type=externo`,{responseType:"json"}).toPromise().then(n=>n.destinations).catch(this.handleError)}updateDestination(t){const n=sessionStorage.getItem("user-name"),i=Object.assign(Object.assign({},t),{user:n.toUpperCase()});return this.http.put(`${this.destinationsUrl}/catalog/${t.id}`,i,{responseType:"json"}).toPromise().catch(this.handleError)}handleError(t){return console.error("An error occurred",t),Promise.reject(t.error.message||t.message||t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();function Ai(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",6),e.TgZ(6,"button",7),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(),p=e.MAs(16);return s.openModal(r,p)}),e._UZ(7,"i",8),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.tiempo_cierre)}}function Mi(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"h4",10),e._uU(2,"Editar Destino"),e.qZA(),e.TgZ(3,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeModal()}),e.TgZ(4,"span",12),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",13),e.TgZ(7,"div",14),e.TgZ(8,"div",15),e.TgZ(9,"div",16),e.TgZ(10,"label",17),e._uU(11,"Nombre"),e.qZA(),e.TgZ(12,"input",18),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().destinationToEdit.nombre=i}),e.qZA(),e.qZA(),e.TgZ(13,"div",16),e.TgZ(14,"label",19),e._uU(15,"Tiempo de cierre"),e.qZA(),e.TgZ(16,"input",20),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().destinationToEdit.tiempo_cierre=i}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",21),e.TgZ(18,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.saveDestination(i.destinationToEdit)}),e._uU(19,"Guardar"),e.qZA(),e.TgZ(20,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeModal()}),e._uU(21,"Close"),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(12),e.Q6J("ngModel",t.destinationToEdit.nombre),e.xp6(4),e.Q6J("ngModel",t.destinationToEdit.tiempo_cierre)}}const xi=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"",component:ae,children:[{path:"#",redirectTo:"not-found"},{path:"init",component:ft,canActivate:[f]},{path:"search-vehicle",component:Pe,canActivate:[f]},{path:"search-internal-vehicle",component:Re,canActivate:[f]},{path:"change-location/:chasis",component:Ke,canActivate:[f]},{path:"stock-report",component:it,canActivate:[f]},{path:"search-tracking",component:Zt,canActivate:[f]},{path:"track-form/:chasis",component:Kt,canActivate:[f]},{path:"photos/:novedadId/:chasis/:origin",component:tn,canActivate:[f]},{path:"inspection-point-report",component:pn,canActivate:[f]},{path:"dealer-report",component:hn,canActivate:[f]},{path:"damage-report",component:Un,canActivate:[f]},{path:"peak-report",component:Jn,canActivate:[f]},{path:"patios-report",component:fo,canActivate:[f]},{path:"special-locations-report",component:Mo,canActivate:[f]},{path:"binnacles-report",component:wo,canActivate:[f]},{path:"config/models",component:Yn,canActivate:[f]},{path:"config/models/:model",component:Hn,canActivate:[f]},{path:"config/models/:model/faces/:face",component:Xn,canActivate:[f]},{path:"config/models/new/face",component:fe,canActivate:[f]},{path:"config/models/modify/face/:model",component:fe,canActivate:[f]},{path:"config/smb-management",component:$o,canActivate:[f]},{path:"maintenance/chassis",component:ai,canActivate:[f]},{path:"maintenance/batch",component:Ci,canActivate:[f]},{path:"maintenance/destinations",component:(()=>{class o{constructor(t,n){this.destinationsService=t,this.modalService=n}loadDestinations(){this.destinationsService.getDestinations().then(t=>{this.destinations=t}).catch(t=>{t.response.error?alert(t.response.error.message):alert("Error deconocido, revisar conexi\xf3n")})}saveDestination(){this.destinationToEdit&&this.destinationsService.updateDestination(this.destinationToEdit).then(t=>{this.loadDestinations(),this.closeModal()}).catch(t=>{alert(t)})}openModal(t,n){this.destinationToEdit=Object.assign({},t),this.modalRef=this.modalService.show(n)}closeModal(){this.modalRef.hide()}ngOnInit(){this.loadDestinations()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(be),e.Y36(q.tT))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-destinations"]],features:[e._Bn([G,be])],decls:17,vars:1,consts:[[1,"ibox-title"],[1,"ibox-content"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["changeDestinationModal",""],[2,"text-align","center"],[1,"btn",3,"click"],[1,"fa","fa-pencil",2,"font-size","1.5em"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-lg-12"],[1,"form-group"],["for","destinationToEdit_Nombre"],["type","text","id","destinationToEdit_Nombre","disabled","",1,"form-control",3,"ngModel","ngModelChange"],["for","destinationToEdit_TiempoCierre"],["type","text","id","destinationToEdit_TiempoCierre",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-default",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h5"),e._uU(2,"Destinos"),e.qZA(),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"div",2),e.TgZ(5,"table",3),e.TgZ(6,"thead"),e.TgZ(7,"tr"),e.TgZ(8,"th"),e._uU(9,"Nombre "),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Tiempo de cierre "),e.qZA(),e._UZ(12,"th"),e.qZA(),e.qZA(),e.TgZ(13,"tbody"),e.YNc(14,Ai,8,2,"tr",4),e.qZA(),e.qZA(),e.qZA(),e.YNc(15,Mi,22,2,"ng-template",null,5,e.W1O),e.qZA()),2&t&&(e.xp6(14),e.Q6J("ngForOf",n.destinations))},directives:[g.sg,c.Fj,c.JJ,c.On],styles:[""]}),o})(),canActivate:[f]}]},{path:"",component:ae,children:[{path:"not-found",component:Tt}]},{path:"",component:Nn,children:[{path:"login",component:Me}]},{path:"**",redirectTo:"not-found"}];let ki=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-root"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[d.lC],styles:[""]}),o})(),Oi=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[T.b2,d.Bz]]}),o})(),yi=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[T.b2,d.Bz,V.mr.forRoot()]]}),o})();var Ui=h(5871);let Pi=(()=>{class o{constructor(t,n){this.authService=t,this.router=n}intercept(t,n){return[`${__authUrl}/auth/realms/Toyota/protocol/openid-connect/token`,`${__apiBaseUrl}/`].includes(t.url)?n.handle(t):this.authService.getAccessToken().pipe((0,H.w)(r=>(r&&(t=t.clone({setHeaders:{Authorization:`Bearer ${r}`}})),n.handle(t).pipe((0,I.K)(s=>(401===s.status&&this.router.navigate([""]),(0,Ui._)(s)))))))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(D),e.LFG(d.F0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})(),wi=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o,bootstrap:[ki]}),o.\u0275inj=e.cJS({providers:[D,{provide:m.TP,useClass:Pi,multi:!0},{provide:g.S$,useClass:g.Do},f],imports:[[Q.Cl,y._7,T.b2,c.u5,m.JF,yi,Oi,d.Bz.forRoot(xi,{relativeLinkResolution:"legacy"}),ve.Is,U.UU.forRoot(),S.vI.forRoot({}),q.zk.forRoot(),qe.PW]]}),o})();(0,e.G48)(),T.q6().bootstrapModule(wi)},6700:function(A,M,h){var T={"./af":2275,"./af.js":2275,"./ar":857,"./ar-dz":1218,"./ar-dz.js":1218,"./ar-kw":4754,"./ar-kw.js":4754,"./ar-ly":6680,"./ar-ly.js":6680,"./ar-ma":2178,"./ar-ma.js":2178,"./ar-sa":6522,"./ar-sa.js":6522,"./ar-tn":5682,"./ar-tn.js":5682,"./ar.js":857,"./az":164,"./az.js":164,"./be":9774,"./be.js":9774,"./bg":947,"./bg.js":947,"./bm":1832,"./bm.js":1832,"./bn":9650,"./bn-bd":4477,"./bn-bd.js":4477,"./bn.js":9650,"./bo":6005,"./bo.js":6005,"./br":8492,"./br.js":8492,"./bs":534,"./bs.js":534,"./ca":2061,"./ca.js":2061,"./cs":4737,"./cs.js":4737,"./cv":1167,"./cv.js":1167,"./cy":7996,"./cy.js":7996,"./da":9528,"./da.js":9528,"./de":4540,"./de-at":9430,"./de-at.js":9430,"./de-ch":7978,"./de-ch.js":7978,"./de.js":4540,"./dv":3426,"./dv.js":3426,"./el":6616,"./el.js":6616,"./en-au":3816,"./en-au.js":3816,"./en-ca":2162,"./en-ca.js":2162,"./en-gb":3305,"./en-gb.js":3305,"./en-ie":1954,"./en-ie.js":1954,"./en-il":3060,"./en-il.js":3060,"./en-in":9923,"./en-in.js":9923,"./en-nz":3540,"./en-nz.js":3540,"./en-sg":6505,"./en-sg.js":6505,"./eo":1907,"./eo.js":1907,"./es":6640,"./es-do":1246,"./es-do.js":1246,"./es-mx":6131,"./es-mx.js":6131,"./es-us":6430,"./es-us.js":6430,"./es.js":6640,"./et":2551,"./et.js":2551,"./eu":2711,"./eu.js":2711,"./fa":2109,"./fa.js":2109,"./fi":3390,"./fi.js":3390,"./fil":7860,"./fil.js":7860,"./fo":8216,"./fo.js":8216,"./fr":9291,"./fr-ca":8527,"./fr-ca.js":8527,"./fr-ch":8407,"./fr-ch.js":8407,"./fr.js":9291,"./fy":7054,"./fy.js":7054,"./ga":9540,"./ga.js":9540,"./gd":3917,"./gd.js":3917,"./gl":1486,"./gl.js":1486,"./gom-deva":6245,"./gom-deva.js":6245,"./gom-latn":8868,"./gom-latn.js":8868,"./gu":9652,"./gu.js":9652,"./he":9019,"./he.js":9019,"./hi":2040,"./hi.js":2040,"./hr":3402,"./hr.js":3402,"./hu":9322,"./hu.js":9322,"./hy-am":7609,"./hy-am.js":7609,"./id":7942,"./id.js":7942,"./is":8275,"./is.js":8275,"./it":3053,"./it-ch":4378,"./it-ch.js":4378,"./it.js":3053,"./ja":6176,"./ja.js":6176,"./jv":679,"./jv.js":679,"./ka":2726,"./ka.js":2726,"./kk":2953,"./kk.js":2953,"./km":6957,"./km.js":6957,"./kn":9181,"./kn.js":9181,"./ko":7148,"./ko.js":7148,"./ku":7752,"./ku.js":7752,"./ky":5675,"./ky.js":5675,"./lb":1263,"./lb.js":1263,"./lo":5746,"./lo.js":5746,"./lt":9655,"./lt.js":9655,"./lv":8753,"./lv.js":8753,"./me":4054,"./me.js":4054,"./mi":1573,"./mi.js":1573,"./mk":202,"./mk.js":202,"./ml":8523,"./ml.js":8523,"./mn":9794,"./mn.js":9794,"./mr":6681,"./mr.js":6681,"./ms":6975,"./ms-my":9859,"./ms-my.js":9859,"./ms.js":6975,"./mt":3691,"./mt.js":3691,"./my":5152,"./my.js":5152,"./nb":7607,"./nb.js":7607,"./ne":1526,"./ne.js":1526,"./nl":6368,"./nl-be":3496,"./nl-be.js":3496,"./nl.js":6368,"./nn":8420,"./nn.js":8420,"./oc-lnc":1906,"./oc-lnc.js":1906,"./pa-in":4504,"./pa-in.js":4504,"./pl":4721,"./pl.js":4721,"./pt":5437,"./pt-br":4548,"./pt-br.js":4548,"./pt.js":5437,"./ro":1977,"./ro.js":1977,"./ru":6042,"./ru.js":6042,"./sd":8849,"./sd.js":8849,"./se":7739,"./se.js":7739,"./si":84,"./si.js":84,"./sk":2449,"./sk.js":2449,"./sl":3086,"./sl.js":3086,"./sq":3139,"./sq.js":3139,"./sr":607,"./sr-cyrl":63,"./sr-cyrl.js":63,"./sr.js":607,"./ss":131,"./ss.js":131,"./sv":1665,"./sv.js":1665,"./sw":5642,"./sw.js":5642,"./ta":3622,"./ta.js":3622,"./te":4825,"./te.js":4825,"./tet":8336,"./tet.js":8336,"./tg":9238,"./tg.js":9238,"./th":9463,"./th.js":9463,"./tk":9986,"./tk.js":9986,"./tl-ph":9672,"./tl-ph.js":9672,"./tlh":43,"./tlh.js":43,"./tr":1212,"./tr.js":1212,"./tzl":110,"./tzl.js":110,"./tzm":482,"./tzm-latn":8309,"./tzm-latn.js":8309,"./tzm.js":482,"./ug-cn":2495,"./ug-cn.js":2495,"./uk":4157,"./uk.js":4157,"./ur":5826,"./ur.js":5826,"./uz":4141,"./uz-latn":3662,"./uz-latn.js":3662,"./uz.js":4141,"./vi":2607,"./vi.js":2607,"./x-pseudo":6460,"./x-pseudo.js":6460,"./yo":2948,"./yo.js":2948,"./zh-cn":2658,"./zh-cn.js":2658,"./zh-hk":9352,"./zh-hk.js":9352,"./zh-mo":8274,"./zh-mo.js":8274,"./zh-tw":8451,"./zh-tw.js":8451};function e(m){var d=c(m);return h(d)}function c(m){if(!h.o(T,m)){var d=new Error("Cannot find module '"+m+"'");throw d.code="MODULE_NOT_FOUND",d}return T[m]}e.keys=function(){return Object.keys(T)},e.resolve=c,A.exports=e,e.id=6700},6461:function(A,M,h){var T={"./log":708};function e(m){var d=c(m);return h(d)}function c(m){if(!h.o(T,m)){var d=new Error("Cannot find module '"+m+"'");throw d.code="MODULE_NOT_FOUND",d}return T[m]}e.keys=function(){return Object.keys(T)},e.resolve=c,A.exports=e,e.id=6461},4654:function(){}},function(A){var M=function(T){return A(A.s=T)};A.O(0,["vendor"],function(){return M(3208),M(4692)}),A.O()}]);
//# sourceMappingURL=main.js.map